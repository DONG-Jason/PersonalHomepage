(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{"1ZoL":function(e,t,a){"use strict";var i=a("WpSa");a.n(i).a},"1jVV":function(e,t,a){"use strict";var i=a("WXP2");a.n(i).a},"5+qa":function(e,t,a){"use strict";var i=a("zmCa");a.n(i).a},"7sz2":function(e,t,a){},"8i1n":function(e,t,a){},"A0++":function(e,t,a){"use strict";var i=a("xUNX");a.n(i).a},BVTj:function(e,t,a){"use strict";var i=a("VYpN");a.n(i).a},GSUI:function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return l});var i=a("vDqi"),s=a.n(i),o=function(e){return s.a.get("/search/searchEnginesData",e).then(function(e){return e.data})},r=function(e){return s.a.post("/search/searchEnginesAutoComplete",e).then(function(e){return e.data})},l=function(e){return s.a.post("/search/searchLog",e).then(function(e){return e.data})}},Jych:function(e,t,a){},MxXE:function(e,t,a){"use strict";var i=a("ZDEO");a.n(i).a},OKON:function(e,t,a){"use strict";var i=a("Tzuo");a.n(i).a},Tzuo:function(e,t,a){},UTh3:function(e,t,a){"use strict";var i=a("8i1n");a.n(i).a},VYpN:function(e,t,a){},Vtdi:function(e,t,a){"use strict";a.r(t);var i=a("Kw5r"),s=a("XJYT"),o=a.n(s),r=(a("D66Q"),a("oNX8").a),l=(a("1jVV"),a("KHd+")),n=Object(l.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("div",[a("i",{class:e.searchIcon})]),e._v(" "),a("div",[a("el-autocomplete",{ref:"input",staticClass:"search-input",attrs:{placeholder:"请输入内容","fetch-suggestions":e.autoComplete},on:{select:function(t){return e.search()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.word,callback:function(t){e.word=t},expression:"word"}},[a("el-select",{staticClass:"search-engine-select",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchEngines.select,callback:function(t){e.$set(e.searchEngines,"select",t)},expression:"searchEngines.select"}},e._l(e.searchEngines.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{staticClass:"search-button",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search()}},slot:"append"})],1)],1)])},[],!1,null,"cec87b60",null);n.options.__file="Search.vue";var c=n.exports,d=a("gDS+"),u=a.n(d),m=a("gjeX"),p=a.n(m),v=a("vDqi"),h=a.n(v),_=a("YEIV"),f=a.n(_),g=a("H7qB"),b=function(e){return h.a.post("/console/consoleScriptRunOutput",e).then(function(e){return e.data})},k={name:"ConsoleScript",data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},bool:{singleDataLog:!0},activeTab:"0",activedSystem:0,activeSystem:[],subSystem:[],formData:[],formDataLoading:!1,submitButtonLoading:!1,output:{canBeTerminate:!1,loading:!1,log_id:0,logs:[],visible:!1,text:"",important_fields:[],isAlert:!1},extra_button:{visible:!1,output:"",buttonLoading:!1,loading:!1,output_temp:""},edit:{buttonLoading:!1,dialogTitle:"编辑",id:0,sub_system_id:0,title:"",start_folder:"",start_script:"",type:0,visible:!1,typeOptions:[{label:"输入框",value:"input"},{label:"选择器",value:"select"},{label:"日期",value:"date"},{label:"日期范围",value:"dateRange"}],boolOptions:[{label:"是",value:1},{label:"否",value:0}],formData:[]},singleDataOptionDialog:{visible:!1,index:0,data:[]},schedule:{label:"新建定时任务",popoverVisible:!1,dialogVisible:!1,loading:!1,schedules:[],scheduleData:{schedule_id:0,triggerDate:"",triggerTime:"",is_automatic:!1,interval:{value:1,unit:{select:2,options:[{value:1,label:"小时"},{value:2,label:"天"}]}}}}}},methods:{deepClone:function(e){var t=u()(e);return JSON.parse(t)},swapItem:function(e,t,a){return e[t]=e.splice(a,1,e[t])[0],e},handleChange:function(e){if(""!=e){for(var t=0;t<this.subSystem.length&&e!=this.subSystem[t].title;t++);this.activedSystem=this.subSystem[t].id,this.activeTab="0",this.consoleScriptSubSystemScriptFront(this.subSystem[t].id)}},editFormAddSingleData:function(){this.edit.formData.push({type:"",label:"",value:"",placeHolder:"",options:"",createable:"",disabled:"",is_important:"",remark:""})},editFormDeleted:function(e){this.edit.formData.splice(e,1)},editFormMoveUp:function(e){e>0?this.swapItem(this.edit.formData,e,e-1):this.$message({message:"已经是第一位，不能再上移了哦",type:"info"})},editFormMoveDown:function(e){e<this.edit.formData.length-1?this.swapItem(this.edit.formData,e,e+1):this.$message({message:"已经是最后一位，不能再下移了哦",type:"info"})},editFormClosed:function(){this.edit.dialogTitle="编辑",this.edit.id=0,this.edit.title="",this.edit.start_folder="",this.edit.start_script="",this.edit.type=1,this.edit.formData=[]},editFormSubmited:function(){var e=this;this.edit.buttonLoading=!0,function(e){return h.a.post("/console/consoleScriptEdit",e).then(function(e){return e.data})}({sub_system_id:this.edit.sub_system_id,script_id:this.edit.id,name:this.edit.title,start_folder:this.edit.start_folder,start_script:this.edit.start_script,type:Number(this.edit.type),detail:this.edit.formData,user:sessionStorage.getItem("user").replace(/\"/g,"")}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.edit.visible=!1,e.consoleScriptSubSystemScriptFront(e.edit.sub_system_id)),e.edit.buttonLoading=!1})},singleDataOptionDialogClicked:function(e,t){this.singleDataOptionDialog.index=e,this.singleDataOptionDialog.visible=!0,this.singleDataOptionDialog.data=""==t?[]:this.deepClone(t)},singleDataOptionDialogClosed:function(){this.singleDataOptionDialog.data=[]},singleDataOptionDialogDeleted:function(e){this.singleDataOptionDialog.data.splice(e,1)},singleDataOptionDialogAddSingleData:function(){this.singleDataOptionDialog.data.push({label:"",value:""})},singleDataOptionDialogSubmited:function(){this.edit.formData[this.singleDataOptionDialog.index].options=this.singleDataOptionDialog.data,this.singleDataOptionDialog.visible=!1},newTab:function(){this.edit.dialogTitle="新增脚本",this.edit.sub_system_id=this.subSystem[this.activedSystem-1].id,this.edit.id=0,this.edit.visible=!0},singleDataDelete:function(){var e=this;this.$confirm("确认删除吗?","提示",{}).then(function(){(function(e){return h.a.post("/console/consoleScriptDelete",e).then(function(e){return e.data})})({script_id:e.formData[e.activeTab].id,user:sessionStorage.getItem("user").replace(/\"/g,"")}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.consoleScriptSubSystemScriptFront(e.activedSystem))})}).catch(function(){})},singleDataSetting:function(){var e=this;this.consoleScriptSubSystemScriptFront(this.activedSystem).then(function(t){e.edit.dialogTitle="编辑脚本",e.edit.title=t[e.activeTab].title,e.edit.id=t[e.activeTab].id,e.edit.start_folder=t[e.activeTab].start_folder,e.edit.start_script=t[e.activeTab].start_script,e.edit.type=String(t[e.activeTab].type),e.edit.formData=t[e.activeTab].formDataDetail,e.edit.sub_system_id=t[e.activeTab].sub_system_id,e.edit.visible=!0})},singleDataShowLogs:function(){var e=this;this.output.loading=!0,this.output.logs=[],function(e){return h.a.post("/console/consoleScriptGetLogs",e).then(function(e){return e.data})}({script_id:this.formData[this.activeTab].id,user:sessionStorage.getItem("user").replace(/\"/g,"")}).then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else{e.output.logs=t.data.logs,e.output.important_fields=t.data.important_fields;for(var a=0;a<e.output.logs.length;a++)for(var i=0;i<e.output.important_fields.length;i++)e.output.logs[a][e.output.important_fields[i]]=e.output.logs[a].detail[e.output.important_fields[i]]}e.output.loading=!1})},singleDataReplay:function(){var e=this;(function(e){return h.a.post("/console/consoleScriptReplay",e).then(function(e){return e.data})})({script_id:this.formData[this.activeTab].id,user:sessionStorage.getItem("user").replace(/\"/g,"")}).then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else{e.formData[e.activeTab].version!=t.data.version&&e.$message({message:"检测到脚本配置发生过修改(V"+t.data.version+"→V"+e.formData[e.activeTab].version+")，可能无法完美恢复上一次参数",type:"info"});for(var a=0;a<e.formData[e.activeTab].formDataDetail.length;a++)try{e.formData[e.activeTab].formDataDetail[a].value=t.data.detail[e.formData[e.activeTab].formDataDetail[a].label]}catch(t){console.log("["+e.formData[e.activeTab].formDataDetail[a].label+"]恢复失败："+t)}}})},singleDataLog:function(){var e=this;(function(e){return h.a.post("/console/consoleScriptGetNewestLog",e).then(function(e){return e.data})})({script_id:this.formData[this.activeTab].id,user:sessionStorage.getItem("user").replace(/\"/g,"")}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.output.visible=!0,e.output.text=t.data[0].output,e.bool.singleDataLog&&(e.$nextTick(function(){try{new g.a(e.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1}).refresh()}catch(e){console.log("滚动条设置失败"+e)}}),e.bool.singleDataLog=!1))})},singleDataScheduleAddScheduleSubmit:function(){var e=this,t="cd "+this.formData[this.activeTab].start_folder+" && "+this.formData[this.activeTab].start_script,a=this.command_get(t,this.formData[this.activeTab].type),i=a.command,s=a.detail;(function(e){return h.a.post("/console/consoleScriptScheduleEdit",e).then(function(e){return e.data})})({user:sessionStorage.getItem("user").replace(/\"/g,""),script_id:this.formData[this.activeTab].id,command:i,detail:s,version:this.formData[this.activeTab].version,trigger_time:this.schedule.scheduleData.triggerDate+" "+this.schedule.scheduleData.triggerTime,is_automatic:1==this.schedule.scheduleData.is_automatic?1:0,interval_raw:Number(this.schedule.scheduleData.interval.value),interval_unit:this.schedule.scheduleData.interval.unit.select,schedule_id:this.schedule.scheduleData.schedule_id}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.schedule.dialogVisible=!1,e.schedule.scheduleData.triggerDate="",e.schedule.scheduleData.triggerTime="",e.schedule.scheduleData.is_automatic=!1,e.schedule.scheduleData.schedule_id=0,e.schedule.scheduleData.interval.value="",e.schedule.scheduleData.interval.unit.select=2)})},schedulenDialogClosed:function(){this.schedule.dialogVisible=!1,this.schedule.scheduleData.triggerDate="",this.schedule.scheduleData.triggerTime="",this.schedule.scheduleData.is_automatic=!1,this.schedule.scheduleData.schedule_id=0,this.schedule.scheduleData.interval.value=1,this.schedule.scheduleData.interval.unit.select=2,this.schedule.label="新建定时任务"},singleDataScheduleShowSchedules:function(){var e=this;this.schedule.loading=!0,this.schedule.schedules=[],function(e){return h.a.post("/console/consoleScriptSchedule",e).then(function(e){return e.data})}({user:sessionStorage.getItem("user").replace(/\"/g,""),script_id:this.formData[this.activeTab].id}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.schedule.loading=!1,e.schedule.schedules=t.data,e.schedule.popoverVisible=!0)})},singleDataScheduleEditSchedule:function(e){console.log(e),this.schedule.label="编辑定时任务",this.schedule.scheduleData.schedule_id=e.schedule_id,this.schedule.scheduleData.is_automatic=!!e.is_automatic,this.schedule.scheduleData.triggerDate=e.trigger_time.split(" ")[0],this.schedule.scheduleData.triggerTime=e.trigger_time.split(" ")[1].substr(0,5),this.schedule.scheduleData.interval.unit.select=e.is_automatic?e.interval_unit:2,this.schedule.scheduleData.interval.value=e.is_automatic?e.interval_raw:1,this.schedule.dialogVisible=!0},singleDataScheduleDeleteSchedule:function(e){var t=this;this.$confirm("确认停止并删除定时任务吗?","提示",{}).then(function(){(function(e){return h.a.post("/console/consoleScriptScheduleDelete",e).then(function(e){return e.data})})({user:sessionStorage.getItem("user").replace(/\"/g,""),schedule_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):t.$message({message:e.msg,type:"success"})})})},consoleScriptSubSystemScriptFront:function(e){var t=this;this.formDataLoading=!0;for(var a=0;a<this.subSystem.length&&Number(e)!=this.subSystem[a].id;a++);return function(e){return h.a.post("/console/consoleScriptSubSystemScript",e).then(function(e){return e.data})}({user:sessionStorage.getItem("user").replace(/\"/g,""),sub_system_id:this.subSystem[a].id}).then(function(e){if(200===e.code){t.formData=[],t.subSystem[a].script=[];for(var i=0;i<e.data.length;i++){var s;t.formData.push((s={title:e.data[i].name,id:e.data[i].id,start_folder:e.data[i].start_folder,start_script:e.data[i].start_script,runs:e.data[i].runs,user:e.data[i].user,update_time:e.data[i].update_time,version:e.data[i].version},f()(s,"update_time",e.data[i].update_time),f()(s,"type",e.data[i].type),f()(s,"sub_system_id",e.data[i].sub_system_id),f()(s,"formDataDetail",[]),s));for(var o=0;o<e.data[i].detail.length;o++)t.formData[t.formData.length-1].formDataDetail.push({type:e.data[i].detail[o].type,label:e.data[i].detail[o].label,value:e.data[i].detail[o].value,placeHolder:e.data[i].detail[o].place_holder,options:e.data[i].detail[o].options,createable:e.data[i].detail[o].createable,disabled:e.data[i].detail[o].disabled,remark:e.data[i].detail[o].remark,is_important:e.data[i].detail[o].is_important,visible:e.data[i].detail[o].visible,extra_button:e.data[i].detail[o].extra_button,extra_button_label:e.data[i].detail[o].extra_button_label,extra_button_script:e.data[i].detail[o].extra_button_script,version:e.data[i].detail[o].version});t.subSystem[a].script.push(e.data[i].name)}return t.subSystem[a].scriptText=t.subSystem[a].script.join("、"),t.formDataLoading=!1,t.formData}t.$message({message:e.msg,type:"error"})})},getSubSystem:function(){var e=this;(function(e){return h.a.get("/console/consoleScriptSubSystem",e).then(function(e){return e.data})})({user:sessionStorage.getItem("user").replace(/\"/g,"")}).then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else for(var a=0;a<t.data.length;a++)e.subSystem.push({id:t.data[a].id,title:t.data[a].name})})},flushOutput:function(e){var t=this;this.output.isAlert=!0;var a={process_id:e,user:sessionStorage.getItem("user").replace(/\"/g,"")};b(a).then(function(a){if(200!==a.code)t.$message({message:a.msg,type:"error"});else{if(-1==a.data.status)return t.$message({message:a.msg,type:"error"}),void(t.submitButtonLoading=!1);if(0==a.data.status)return t.output.canBeTerminate=!1,t.output.isAlert=!1,t.output.text=t.output.text+a.data.output.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),t.$message({message:"运行结束，请查看输出。",type:"success"}),t.$nextTick(function(){var e=new g.a(t.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1});e.scrollTo(0,e.maxScrollY)}),void function(e){return h.a.post("/console/consoleScriptSaveOutput",e).then(function(e){return e.data})}({log_id:t.output.log_id,output:t.output.text}).then(function(e){-1==e.data.status?t.$message({message:"记录运行日志错误！请联系管理员"+e.msg,type:"error"}):t.submitButtonLoading=!1});1==a.data.status&&(t.output.text=t.output.text+a.data.output.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),t.$nextTick(function(){try{var e=new g.a(t.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1});e.scrollTo(0,e.maxScrollY),e.destroy()}catch(e){console.log("滚动条设置失败"+e)}}),t.flushOutput(e))}})},log_output:function(e){var t=this;this.output.visible=!0,this.output.text=e,this.$nextTick(function(){try{new g.a(t.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1}).refresh()}catch(e){console.log("滚动条设置失败"+e)}})},log_replay:function(e,t){for(var a=0;a<this.formData[this.activeTab].formDataDetail.length;a++)try{this.formData[this.activeTab].formDataDetail[a].value=t[this.formData[this.activeTab].formDataDetail[a].label]}catch(e){console.log("["+this.formData[this.activeTab].formDataDetail[a].label+"]恢复失败："+e)}this.formData[this.activeTab].version!=e?this.$message({message:"参数填充成功，但是检测到脚本配置发生过修改(V"+e+"→V"+this.formData[this.activeTab].version+")，可能无法完美恢复上一次参数，请关闭列表弹出框后查看",type:"info",duration:4e3}):this.$message({message:"参数填充成功，请关闭列表弹出框后点击提交按钮以运行",type:"success"})},extraButtonFlushOutput:function(e,t,a){var i=this,s={process_id:a,user:sessionStorage.getItem("user").replace(/\"/g,"")};b(s).then(function(s){if(200!==s.code)i.$message({message:s.msg,type:"error"});else{if(-1==s.data.status)return i.$message({message:s.msg,type:"error"}),i.extra_button.loading=!1,void(i.extra_button.buttonLoading=!1);if(0==s.data.status){try{var o=JSON.parse(i.extra_button.output_temp+s.data.output);i.extra_button.output=o.data.msg.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),void 0!=o.data.value&&(i.formData[e].formDataDetail[t].value=o.data.value),void 0!=o.data.options&&(i.formData[e].formDataDetail[t].options=o.data.options)}catch(e){i.extra_button.output=(i.extra_button.output_temp+s.data.output).replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")}return i.extra_button.loading=!1,void(i.extra_button.buttonLoading=!1)}1==s.data.status&&(i.extra_button.output_temp=i.extra_button.output_temp+s.data.output,i.extraButtonFlushOutput(e,t,a))}})},extraButtonClicked:function(e,t,a){var i=this;if(this.extra_button.visible)this.extra_button.visible=!1;else{this.extra_button.output="",this.extra_button.output_temp="",this.extra_button.buttonLoading=!0;var s=this.command_get(a,2).command,o={user:sessionStorage.getItem("user").replace(/\"/g,""),command:s};this.extra_button.loading=!0,function(e){return h.a.post("/console/consoleScriptExtraButtonScriptRun",e).then(function(e){return e.data})}(o).then(function(a){if(200!==a.code)i.$message({message:a.msg,type:"error"});else{if(-1==a.data.process_id)i.$message({message:"任务创建错误，请联系管理员！",type:"error"});else var s=a.data.process_id;i.extraButtonFlushOutput(e,t,s)}})}},command_get:function(e,t){var a="",i={};if("1"==t){for(var s=0;s<this.formData[this.activeTab].formDataDetail.length;s++)if(i[this.formData[this.activeTab].formDataDetail[s].label]=this.formData[this.activeTab].formDataDetail[s].value,"dateRange"!=this.formData[this.activeTab].formDataDetail[s].type)a=a+" "+this.formData[this.activeTab].formDataDetail[s].value;else for(var o=0;o<this.formData[this.activeTab].formDataDetail[s].value.length;o++)a=a+" "+this.formData[this.activeTab].formDataDetail[s].value[o];a=e+a}else if("2"==t){var r=e;for(s=0;s<this.formData[this.activeTab].formDataDetail.length;s++)if(i[this.formData[this.activeTab].formDataDetail[s].label]=this.formData[this.activeTab].formDataDetail[s].value,"dateRange"!=this.formData[this.activeTab].formDataDetail[s].type){c=new RegExp("%"+this.formData[this.activeTab].formDataDetail[s].label+"%","g");r=r.replace(c,this.formData[this.activeTab].formDataDetail[s].value)}else{for(var l="",n=0;n<this.formData[this.activeTab].formDataDetail[s].value.length;n++)l=l+" "+this.formData[this.activeTab].formDataDetail[s].value[n];var c=new RegExp("%"+this.formData[this.activeTab].formDataDetail[s].label+"%","g");r=r.replace(c,l)}a=r}return{command:a,detail:i}},terminate:function(){var e=this;this.$confirm("确定要停止运行吗?","提示",{}).then(function(){(function(e){return h.a.post("/console/consoleScriptTerminate",e).then(function(e){return e.data})})({user:sessionStorage.getItem("user").replace(/\"/g,""),process_id:e.output.process_id}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):e.$message({message:t.msg,type:"success"})})})},outputDialogClose:function(){var e=this;this.output.isAlert?this.$confirm("在运行中关闭运行窗口会导致运行日志保存不完整，仍然要关闭吗?","提示",{}).then(function(t){e.output.text="",done()}):(this.output.text="",done())},submit:function(){var e=this;this.submitButtonLoading=!0;var t="cd "+this.formData[this.activeTab].start_folder+" && "+this.formData[this.activeTab].start_script,a=this.command_get(t,this.formData[this.activeTab].type),i=a.command,s=a.detail;(function(e){return h.a.post("/console/consoleScriptRun",e).then(function(e){return e.data})})({id:this.formData[this.activeTab].id,command:i,version:this.formData[this.activeTab].version,detail:s,user:sessionStorage.getItem("user").replace(/\"/g,"")}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):-1==t.data.process_id?e.$message({message:"任务创建错误，请联系管理员！",type:"error"}):(e.output.log_id=t.data.log_id,e.output.visible=!0,e.output.text=i+"<br>",e.output.process_id=t.data.process_id,e.output.canBeTerminate=!0,e.flushOutput(t.data.process_id))})}},mounted:function(){this.getSubSystem()}},w=(a("5+qa"),Object(l.a)(k,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row margin_bottom-medium",attrs:{gutter:20}},[a("el-col",{staticClass:"lift-side-bar",attrs:{span:5}},[a("el-card",{staticClass:"left-side-box-card"},[a("el-collapse",{attrs:{accordion:""},on:{change:e.handleChange},model:{value:e.activeSystem,callback:function(t){e.activeSystem=t},expression:"activeSystem"}},e._l(e.subSystem,function(t){return a("el-collapse-item",{key:t.key,attrs:{title:t.title,name:t.title}},[a("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.scriptText,expression:"singleSystem.scriptText!=''"}],staticClass:"collapse-div"},[e._v("包括："+e._s(t.scriptText))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.formData.length,expression:"formData.length==0"}],staticClass:"collapse-div"},[e._v("本系统暂无脚本")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.formData.length,expression:"formData.length==0"}],attrs:{type:"text",size:"small"},on:{click:e.newTab}},[e._v("需要新增？")])],1)}),1)],1)],1),e._v(" "),a("el-col",{staticClass:"right-side-bar",attrs:{span:19}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.formDataLoading,expression:"formDataLoading"}],staticClass:"right-side-box-card"},[a("el-row",[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.formData.length,expression:"formData.length==0"}],staticClass:"info-text"},[a("i",{staticClass:"el-icon-back"}),e._v(" "),a("div",[e._v("请选择左侧系统")])]),e._v(" "),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:0!=e.formData.length,expression:"formData.length!=0"}],attrs:{addable:""},on:{"tab-add":e.newTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.formData,function(t,i){return a("el-tab-pane",{key:t.key,attrs:{label:t.title,lazy:!0}},[a("td",e._l(t.formDataDetail,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.visible,expression:"singleData.visible==1"}],key:t.key},[a("el-row",{staticClass:"singleData"},[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v(e._s(t.label)+"：")])]),e._v(" "),a("td",{staticClass:"singleDataCol",attrs:{type:"flex"}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":"500",content:t.value,placement:"top"}},["input"==t.type?a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:t.placeHolder,disabled:0!=t.disabled},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}}):e._e()],1),e._v(" "),"select"==t.type?a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:t.placeHolder,disabled:0!=t.disabled,filterable:"","allow-create":0!=t.createable,"default-first-option":""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e(),e._v(" "),"date"==t.type?a("el-date-picker",{staticClass:"main_select--large",attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:t.placeHolder,disabled:0!=t.disabled},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}}):e._e(),e._v(" "),"dateRange"==t.type?a("el-date-picker",{staticClass:"main_select--large",attrs:{size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:t.placeHolder,disabled:0!=t.disabled,"picker-options":e.pickerOptions},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}}):e._e()],1),e._v(" "),a("td",{staticClass:"padding_left-small padding_right-small min_width-small"},[a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:""!=t.remark,expression:"singleData.remark!=''"}],staticClass:"question-mark",attrs:{effect:"dark",content:t.remark,placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),e._v(" "),0!=t.extra_button?a("td",[a("el-popover",{attrs:{placement:"right",width:"300",trigger:"click"},on:{"after-leave":function(t){e.extra_button.output="",e.extra_button.output_temp=""}},model:{value:e.extra_button.visible,callback:function(t){e.$set(e.extra_button,"visible",t)},expression:"extra_button.visible"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.extra_button.loading,expression:"extra_button.loading"}],staticClass:"min_height-medium",domProps:{innerHTML:e._s(e.extra_button.output)}}),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"small",disabled:e.extra_button.buttonLoading},on:{click:function(a){return e.extraButtonClicked(i,s,t.extra_button_script)}},slot:"reference"},[e._v(e._s(t.extra_button_label))])],1)],1):e._e()])],1)}),0),e._v(" "),a("td",{staticClass:"single-data-setting"},[a("el-tooltip",{attrs:{effect:"dark",content:"回放最近一次由我运行的参数",placement:"top"}},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh-left",circle:""},on:{click:function(t){return e.singleDataReplay()}}})],1),e._v(" "),a("el-tooltip",{staticClass:"noMargin",attrs:{effect:"dark",content:"查看最近一次由我运行的日志",placement:"top"}},[a("el-button",{staticClass:"noMargin",attrs:{type:"primary",plain:"",icon:"el-icon-tickets",circle:""},on:{click:function(t){return e.singleDataLog()}}})],1),e._v(" "),a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"查看最近50次运行记录",placement:"top"}},[a("el-popover",{attrs:{placement:"left",width:"1010",trigger:"click"}},[a("div",{ref:"scrollbarDiv",refInFor:!0,staticClass:"scrollbar-div max-height-medium"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.output.loading,expression:"output.loading"}],attrs:{size:"small",data:e.output.logs,stripe:""}},[a("el-table-column",{attrs:{width:"110",property:"user",label:"运行人"}}),e._v(" "),e._l(e.output.important_fields,function(e){return a("el-table-column",{key:e,attrs:{"min-width":"110",property:e,label:e}})}),e._v(" "),a("el-table-column",{attrs:{"min-width":"235",property:"options",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",width:"350",trigger:"hover"}},[e._l(t.row.detail,function(t,i){return a("tr",{key:t},[a("td",{staticClass:"td--label"},[a("b",[e._v(e._s(i+":"))])]),e._v(" "),a("td",[e._v(e._s(t))])])}),e._v(" "),a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"primary",icon:"el-icon-set-up"},slot:"reference"},[e._v("参数")])],2),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-tickets"},on:{click:function(a){return e.log_output(t.row.output)}}},[e._v("日志")]),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-refresh-left"},on:{click:function(a){return e.log_replay(t.row.version,t.row.detail)}}},[e._v("回放")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{width:"150",property:"update_time",label:"运行开始时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",property:"duration",label:"耗时"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",property:"log_id",label:"运行ID"}})],2)],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",icon:"el-icon-files",circle:"",loading:e.output.loading},on:{click:function(t){return e.singleDataShowLogs()}},slot:"reference"})],1)],1),e._v(" "),a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"定时运行",placement:"top"}},[a("el-popover",{attrs:{placement:"left",width:"900",trigger:"click","v-model":e.schedule.popoverVisible}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.schedule.loading,expression:"schedule.loading"}],attrs:{data:e.schedule.schedules,stripe:""}},[a("el-table-column",{attrs:{width:"100",property:"schedule_id",label:"定时任务ID"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",property:"user",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{width:"50",property:"is_automatic_text",label:"重复"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",property:"trigger_time",label:"下次运行时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",property:"update_time",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"250",property:"options",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",width:"350",trigger:"hover"}},[e._l(t.row.detail,function(t,i){return a("tr",{key:t},[a("td",{staticClass:"td--label"},[a("b",[e._v(e._s(i+":"))])]),e._v(" "),a("td",[e._v(e._s(t))])])}),e._v(" "),a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"primary",icon:"el-icon-set-up"},slot:"reference"},[e._v("参数")])],2),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.singleDataScheduleEditSchedule(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.singleDataScheduleDeleteSchedule(t.row.schedule_id)}}},[e._v("停止")])]}}],null,!0)})],1),e._v(" "),a("div",{staticClass:"add",staticStyle:{width:"99.87%"},on:{click:function(t){e.schedule.dialogVisible=!0}}},[a("span",[e._v("\n                        + 使用\n                        "),a("b",[e._v("当前表单填写的参数")]),e._v(" 创建定时任务\n                      ")])]),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",icon:"el-icon-alarm-clock",circle:""},on:{click:function(t){return e.singleDataScheduleShowSchedules()}},slot:"reference"})],1)],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"编辑脚本",placement:"top"}},[a("el-popover",{attrs:{placement:"bottom-end",width:"250",trigger:"hover"}},[a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[e._v(e._s("最后修改人:"))])]),e._v(" "),a("td",[e._v(e._s(t.user))])]),e._v(" "),a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[e._v(e._s("版本:"))])]),e._v(" "),a("td",[e._v(e._s("V"+t.version))])]),e._v(" "),a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[e._v(e._s("运行次数:"))])]),e._v(" "),a("td",[e._v(e._s(t.runs+"次"))])]),e._v(" "),a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[e._v(e._s("更新时间:"))])]),e._v(" "),a("td",[e._v(e._s(t.update_time))])]),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",icon:"el-icon-setting",circle:""},on:{click:function(t){return e.singleDataSetting()}},slot:"reference"})],1)],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"删除脚本",placement:"top"}},[a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.singleDataDelete()}}})],1)],1)])}),1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"60px","margin-left":"10","margin-right":"10px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.formData.length,expression:"formData.length!=0"}],staticStyle:{margin:"20px 20px 20px 20px",position:"absolute",bottom:"0",right:"0","z-index":"99"},attrs:{loading:e.submitButtonLoading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),a("el-drawer",{attrs:{title:"输出",visible:e.output.visible,size:"70%",direction:"btt","before-close":e.outputDialogClose},on:{"update:visible":function(t){return e.$set(e.output,"visible",t)}}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{ref:"outputDialog",staticClass:"output-div"},[a("div",{staticClass:"output-html",domProps:{innerHTML:e._s(e.output.text)}})])])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.output.canBeTerminate,expression:"output.canBeTerminate"}],staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small",plain:"",type:"danger"},nativeOn:{click:function(t){return e.terminate()}}},[e._v("停止运行")])],1)]),e._v(" "),a("el-drawer",{attrs:{title:e.edit.dialogTitle,visible:e.edit.visible,"close-on-click-modal":!1,size:"60%"},on:{"update:visible":function(t){return e.$set(e.edit,"visible",t)},closed:e.editFormClosed}},[a("div",{staticClass:"edit-form-card margin_left-medium margin_right-medium"},[a("div",{ref:"scrollbarDiv",staticClass:"scrollbar-div max-height-large padding-right-19"},[a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"margin_bottom-medium"},[a("el-card",[a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("脚本名称：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.edit.title,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入名称"},model:{value:e.edit.title,callback:function(t){e.$set(e.edit,"title",t)},expression:"edit.title"}})],1)],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("起始文件夹：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.edit.start_folder,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入起始文件夹"},model:{value:e.edit.start_folder,callback:function(t){e.$set(e.edit,"start_folder",t)},expression:"edit.start_folder"}})],1)],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("起始脚本：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.edit.start_script,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入起始脚本"},model:{value:e.edit.start_script,callback:function(t){e.$set(e.edit,"start_script",t)},expression:"edit.start_script"}})],1)],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("组合方式：")])]),e._v(" "),a("td",[a("div",[a("td",{staticClass:"dialog-type-order"},[a("el-radio",{attrs:{label:"1"},model:{value:e.edit.type,callback:function(t){e.$set(e.edit,"type",t)},expression:"edit.type"}},[e._v("顺序")])],1),e._v(" "),a("td",{staticClass:"dialog-type-tooltip"},[a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"顺序组合组件值来生成脚本",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),e._v(" "),a("td",{staticClass:"dialog-type-replace"},[a("el-radio",{attrs:{label:"2"},model:{value:e.edit.type,callback:function(t){e.$set(e.edit,"type",t)},expression:"edit.type"}},[e._v("替换")])],1),e._v(" "),a("td",{staticClass:"dialog-type-tooltip"},[a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"使用组件值替换起始脚本中格式为'%组件名称%'的字段来生成脚本",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)])])])])],1),e._v(" "),e._l(e.edit.formData,function(t){return a("div",{key:t.key},[a("div",{staticClass:"margin_bottom-medium"},[a("el-card",{staticClass:"edit-form-card"},[a("el-col",{attrs:{span:21}},[a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("组件名称：")])]),e._v(" "),a("td",[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入组件名称"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"singleData.label"}})],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("组件类型：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"请选择组件类型",filterable:"","default-first-option":""},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"singleData.type"}},e._l(e.edit.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),"select"==t.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("选项：")])]),e._v(" "),a("td",[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){e.singleDataOptionDialogClicked(e.edit.formData.indexOf(t),t.options)}}},[e._v("编辑选项")])],1)]):e._e(),e._v(" "),"select"==t.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否可创建选项：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:t.createable,callback:function(a){e.$set(t,"createable",a)},expression:"singleData.createable"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]):e._e(),e._v(" "),"date"!=t.type&&"dateRange"!=t.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("默认值：")])]),e._v(" "),"select"!=t.type?a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.value,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"如无默认值可以留空"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}})],1)],1):e._e(),e._v(" "),"select"==t.type?a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.value,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入选项中的'值'作为默认值，如无默认值可留空"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}})],1)],1):e._e(),e._v(" "),"select"==t.type?a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"注意：如选择器有默认值，需要填写的是选项中的'值'，而非'标签'",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1):e._e()]):e._e(),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否只读：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:t.disabled,callback:function(a){e.$set(t,"disabled",a)},expression:"singleData.disabled"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),"dateRange"!=t.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("占位文字：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.placeHolder,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"如无占位文字可以留空"},model:{value:t.placeHolder,callback:function(a){e.$set(t,"placeHolder",a)},expression:"singleData.placeHolder"}})],1)],1)]):e._e(),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("备注：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.remark,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"如无备注可以留空"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"singleData.remark"}})],1)],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否有额外按钮：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:t.extra_button,callback:function(a){e.$set(t,"extra_button",a)},expression:"singleData.extra_button"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"额外按钮配置为'是'时，组件右侧会出现一个按钮，点击按钮可以运行'额外按钮运行脚本'的脚本",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]),e._v(" "),1==t.extra_button?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("额外按钮名称：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.extra_button_label,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入额外按钮名称"},model:{value:t.extra_button_label,callback:function(a){e.$set(t,"extra_button_label",a)},expression:"singleData.extra_button_label"}})],1)],1)]):e._e(),e._v(" "),1==t.extra_button?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("额外按钮运行脚本：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.extra_button_script,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入额外按钮运行脚本"},model:{value:t.extra_button_script,callback:function(a){e.$set(t,"extra_button_script",a)},expression:"singleData.extra_button_script"}})],1)],1),e._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"点击'额外按钮'可以运行此处填写的脚本，并将此处脚本的运行输出返回至页面",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]):e._e(),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否在列表展示：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:t.is_important,callback:function(a){e.$set(t,"is_important",a)},expression:"singleData.is_important"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"选为是会将此组件使用单独的一列在运行记录中展示，建议不要设置太多列，否则会拖慢页面速度",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否显示：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为是",filterable:"","default-first-option":""},model:{value:t.visible,callback:function(a){e.$set(t,"visible",a)},expression:"singleData.visible"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"当选为'否'时，组件在页面上将不可见",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"editFormRightButtons"},[a("td",[a("i",{staticClass:"editFormRightButton editFormMoveUp el-icon-top",on:{click:function(a){e.editFormMoveUp(e.edit.formData.indexOf(t))}}})]),e._v(" "),a("td",[a("i",{staticClass:"editFormRightButton editFormMoveDown el-icon-bottom",on:{click:function(a){e.editFormMoveDown(e.edit.formData.indexOf(t))}}})]),e._v(" "),a("td",[a("i",{staticClass:"editFormRightButton editFormDeleted el-icon-close",on:{click:function(a){e.editFormDeleted(e.edit.formData.indexOf(t))}}})])])])],1)],1)])}),e._v(" "),a("div",{staticClass:"add",staticStyle:{width:"99.87%"},on:{click:function(t){return e.editFormAddSingleData()}}},[a("span",[e._v("+ 添加参数")])])],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){e.edit.visible=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",loading:e.edit.buttonLoading},nativeOn:{click:function(t){return e.editFormSubmited()}}},[e._v("提交")])],1)])]),e._v(" "),a("el-drawer",{attrs:{title:"编辑",visible:e.singleDataOptionDialog.visible,"close-on-click-modal":!1,size:"40%"},on:{"update:visible":function(t){return e.$set(e.singleDataOptionDialog,"visible",t)},closed:e.singleDataOptionDialogClosed}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[e._l(e.singleDataOptionDialog.data,function(t){return a("div",{key:t.key},[a("div",[a("td",{staticClass:"td--label--short",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("标签：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.label,placement:"top"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入选项展示文字"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"singleDataOption.label"}})],1)],1),e._v(" "),a("td",{staticClass:"td--label--short",attrs:{type:"flex"}},[a("p",{staticClass:"singleDataOptionDialogValue"},[e._v("值：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.value,placement:"top"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入选项实际的值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleDataOption.value"}})],1)],1),e._v(" "),a("td",[a("i",{staticClass:"singleDataOptionDialogDeleted el-icon-delete",on:{click:function(a){e.singleDataOptionDialogDeleted(e.singleDataOptionDialog.data.indexOf(t))}}})])])])}),e._v(" "),a("div",{staticClass:"add",staticStyle:{width:"99.87%"},on:{click:function(t){return e.singleDataOptionDialogAddSingleData()}}},[a("span",[e._v("+ 添加选项")])]),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.singleDataOptionDialog.visible=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.singleDataOptionDialogSubmited()}}},[e._v("保存")])],1)],2)]),e._v(" "),a("el-drawer",{attrs:{title:e.schedule.label,visible:e.schedule.dialogVisible,"close-on-click-modal":!1,size:"40%"},on:{"update:visible":function(t){return e.$set(e.schedule,"dialogVisible",t)},closed:e.schedulenDialogClosed}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("定时运行时间：")])]),e._v(" "),a("td",[a("el-date-picker",{staticClass:"main_select--medium",attrs:{type:"date",placeholder:"选择日期时间","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.schedule.scheduleData.triggerDate,callback:function(t){e.$set(e.schedule.scheduleData,"triggerDate",t)},expression:"schedule.scheduleData.triggerDate"}})],1),e._v(" "),a("td",[a("el-time-select",{staticClass:"main_select--medium",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"},placeholder:"选择时间",size:"small"},model:{value:e.schedule.scheduleData.triggerTime,callback:function(t){e.$set(e.schedule.scheduleData,"triggerTime",t)},expression:"schedule.scheduleData.triggerTime"}})],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("重复：")])]),e._v(" "),a("td",[a("el-switch",{attrs:{false:"","active-color":"#3383BA","inactive-color":"#80868C"},model:{value:e.schedule.scheduleData.is_automatic,callback:function(t){e.$set(e.schedule.scheduleData,"is_automatic",t)},expression:"schedule.scheduleData.is_automatic"}})],1),e._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==e.schedule.scheduleData.is_automatic,expression:"schedule.scheduleData.is_automatic==true"}]},[a("p",{staticClass:"inline_margin--medium"},[e._v("每")])]),e._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==e.schedule.scheduleData.is_automatic,expression:"schedule.scheduleData.is_automatic==true"}]},[a("el-input",{staticClass:"main_input--tiny inline_margin--small",attrs:{placeholder:"请输入",size:"small"},model:{value:e.schedule.scheduleData.interval.value,callback:function(t){e.$set(e.schedule.scheduleData.interval,"value",t)},expression:"schedule.scheduleData.interval.value"}})],1),e._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==e.schedule.scheduleData.is_automatic,expression:"schedule.scheduleData.is_automatic==true"}]},[a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:e.schedule.scheduleData.interval.unit.select,callback:function(t){e.$set(e.schedule.scheduleData.interval.unit,"select",t)},expression:"schedule.scheduleData.interval.unit.select"}},e._l(e.schedule.scheduleData.interval.unit.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.schedule.dialogVisible=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.singleDataScheduleAddScheduleSubmit()}}},[e._v("提交")])],1)])])],1)},[],!1,null,"bff2ae78",null));w.options.__file="ConsoleScript.vue";var y=w.exports,D=function(e){return h.a.post("/privilege/userGet",e).then(function(e){return e.data})},C=function(e){return h.a.get("/privilege/roleGet",e).then(function(e){return e.data})},x=function(e){return h.a.get("/privilege/privilegeGet",e).then(function(e){return e.data})},S=function(e){return h.a.post("/login/userLogin",e).then(function(e){return e.data})},E=function(e){return h.a.post("/login/userLoginGetSalt",e).then(function(e){return e.data})},$={name:"ConsolePrivilegeEditUser",props:{login_name:String,action:String},data:function(){return{username:"",password:"",passwordNew:"",isCheckedPass:!1,role_id:"",roleData:[]}},methods:{md5It:function(e){return e=p()(e)},randomString:function(e){e=e||32;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,i="",s=0;s<e;s++)i+=t.charAt(Math.floor(Math.random()*a));return i},userGetFront:function(){var e=this,t={user:sessionStorage.getItem("user").replace(/\"/g,"")};D(t).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):e.userData=t.data})},roleGetFront:function(){var e=this;C().then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else for(var a=0;a<t.data.length;a++)1==t.data[a].is_valid&&e.roleData.push({label:t.data[a].name,value:t.data[a].id})})},checkPass:function(){var e=this;if(""===this.password||void 0===this.password||0==this.password.length)this.$message({message:"请填写密码",type:"error"});else{var t={login_name:this.login_name};E(t).then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else{var a={login_name:e.login_name,password:e.md5It(e.md5It(e.md5It(e.password)+t.data.stable_salt)+t.data.salt),is_generate_cookie:!1};S(a).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.isCheckedPass=!0)})}})}},changePass:function(){var e=this,t=this.randomString(40);(function(e){return h.a.post("/login/userChangePassword",e).then(function(e){return e.data})})({login_name:this.login_name,stable_salt:t,password:this.md5It(this.md5It(this.passwordNew)+t)}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.passwordNew="")})},changeRole:function(){var e=this;(function(e){return h.a.post("/privilege/userRoleChange",e).then(function(e){return e.data})})({role_id:this.role_id,login_name:this.login_name}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.passwordNew="")})},userAddFront:function(){var e=this;if(""===this.username||void 0===this.username||0==this.username.length||""===this.passwordNew||void 0===this.passwordNew||0==this.passwordNew.length||""==this.role_id)this.$message({message:"请将表单填写完整后提交",type:"error"});else{var t=this.randomString(40);(function(e){return h.a.post("/login/userAdd",e).then(function(e){return e.data})})({name:this.username,role_id:this.role_id,login_name:this.login_name,stable_salt:t,password:this.md5It(this.md5It(this.passwordNew)+t)}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.$emit("close"))})}}},mounted:function(){this.isCheckedPass=!1,this.roleGetFront()}},F=(a("MxXE"),Object(l.a)($,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row",attrs:{gutter:20}},["edit"==e.action?a("div",[e.isCheckedPass?e._e():a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入原密码：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{"show-password":"",size:"small",placeholder:"请输入"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.checkPass()}}},[e._v("验证")])],1),e._v(" "),e.isCheckedPass?a("div",[a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入新密码：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{"show-password":"",size:"small",placeholder:"请输入"},model:{value:e.passwordNew,callback:function(t){e.passwordNew=t},expression:"passwordNew"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.changePass()}}},[e._v("提交")])],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请选择角色：")]),e._v(" "),a("el-select",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请选择"},model:{value:e.role_id,callback:function(t){e.role_id=t},expression:"role_id"}},e._l(e.roleData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.changeRole()}}},[e._v("提交")])],1)]):e._e()]):e._e(),e._v(" "),"new"==e.action?a("div",{staticClass:"margin_left-large"},[a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入用户名称：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入用户登录名：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.login_name,callback:function(t){e.login_name=t},expression:"login_name"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入用户密码：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{"show-password":"",size:"small",placeholder:"请输入"},model:{value:e.passwordNew,callback:function(t){e.passwordNew=t},expression:"passwordNew"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请选择角色：")]),e._v(" "),a("el-select",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请选择"},model:{value:e.role_id,callback:function(t){e.role_id=t},expression:"role_id"}},e._l(e.roleData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.userAddFront()}}},[e._v("提交")])],1):e._e()])],1)},[],!1,null,"f04f77e0",null));F.options.__file="ConsolePrivilegeEditUser.vue";var T=F.exports,z={name:"ConsolePrivilegeEditRole",props:{action:String,roleId:Number,roleName:String,roleRemark:String,privilegeData:Array,checkedPrivilege:Array},watch:{privilegeData:function(e,t){this.privilegeData=e},checkedPrivilege:function(e,t){this.checkedPrivilege=e},roleId:function(e,t){this.roleId=e},roleName:function(e,t){this.roleName=e},roleRemark:function(e,t){this.roleRemark=e}},data:function(){return{}},methods:{submit:function(){var e=this;if("edit"==this.action){this.checkedPrivilegeId=[];for(var t=0;t<this.privilegeData.length;t++)for(var a=0;a<this.checkedPrivilege.length;a++)this.privilegeData[t].label!=this.checkedPrivilege[a]||this.checkedPrivilegeId.push(this.privilegeData[t].id);(function(e){return h.a.post("/privilege/rolePrivilegeEdit",e).then(function(e){return e.data})})({role_id:this.roleId,checked_privilege_id:this.checkedPrivilegeId}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.$emit("close"))})}else if("new"==this.action){(function(e){return h.a.post("/privilege/roleEdit",e).then(function(e){return e.data})})({role_id:this.roleId,name:this.roleName,remark:this.roleRemark}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.$emit("close"))})}}},mounted:function(){}},O=(a("tWKV"),Object(l.a)(z,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row",attrs:{gutter:20}},[a("div",{staticClass:"margin_left-large"},["edit"==e.action?a("div",[a("el-checkbox-group",{staticClass:"margin_bottom-large",model:{value:e.checkedPrivilege,callback:function(t){e.checkedPrivilege=t},expression:"checkedPrivilege"}},e._l(e.privilegeData,function(e){return a("el-checkbox",{key:e,attrs:{label:e.label,value:e.id}})}),1)],1):e._e(),e._v(" "),"new"==e.action?a("div",[a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入角色名称：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入备注：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.roleRemark,callback:function(t){e.roleRemark=t},expression:"roleRemark"}})],1)]):e._e(),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确定")])],1)])],1)},[],!1,null,"c945a378",null));O.options.__file="ConsolePrivilegeEditRole.vue";var I=O.exports,N={name:"ConsolePrivilegeEditPrivilege",props:{action:String,privilegeId:Number,privilegeName:String,privilegeMark:String,privilegeRemark:String},watch:{privilegeId:function(e,t){this.privilegeId=e}},data:function(){return{}},methods:{submit:function(){var e=this;"new"==this.action&&function(e){return h.a.post("/privilege/privilegeEdit",e).then(function(e){return e.data})}({privilege_id:this.privilegeId,name:this.privilegeName,mark:this.privilegeMark,remark:this.privilegeRemark}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.$emit("close"))})}},mounted:function(){}},P=(a("q6kt"),Object(l.a)(N,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row",attrs:{gutter:20}},[a("div",{staticClass:"margin_left-large"},["new"==e.action?a("div",[a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入权限名称：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.privilegeName,callback:function(t){e.privilegeName=t},expression:"privilegeName"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入权限标识：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.privilegeMark,callback:function(t){e.privilegeMark=t},expression:"privilegeMark"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入备注：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.privilegeRemark,callback:function(t){e.privilegeRemark=t},expression:"privilegeRemark"}})],1)]):e._e(),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确定")])],1)])],1)},[],!1,null,"237e049a",null));P.options.__file="ConsolePrivilegeEditPrivilege.vue";var W={name:"ConsolePrivilege",components:{ConsolePrivilegeEditUser:T,ConsolePrivilegeEditRole:I,ConsolePrivilegeEditPrivilege:P.exports},data:function(){return{activeSystem:"用户设置",activeDiv:"",userData:[],roleData:[],privilegeData:[],edit:{title:"编辑",visible:!1,type:""}}},methods:{handleChange:function(){"用户设置"==this.activeSystem?(this.activeDiv="",this.activeDiv="用户设置",this.userGetFront()):"角色对应权限设置"==this.activeSystem?(this.activeDiv="",this.activeDiv="角色对应权限设置",this.roleGetFront()):"权限设置"==this.activeSystem&&(this.activeDiv="",this.activeDiv="权限设置",this.privilegeGetFront())},close:function(){this.edit.visible=!1,"user"==this.edit.type&&this.userGetFront(),"role"==this.edit.type&&this.roleGetFront(),"privilege"==this.edit.type&&this.privilegeGetFront()},userAdd:function(){this.edit.title="新增用户",this.edit.visible=!0,this.edit.type="user",this.edit.userEditAction="new"},userGetFront:function(){var e=this,t={user:sessionStorage.getItem("user").replace(/\"/g,"")};D(t).then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else{for(var a=0;a<t.data.length;a++)1==t.data[a].is_valid?t.data[a].is_disabled="否":0==t.data[a].is_valid&&(t.data[a].is_disabled="是");e.userData=t.data}})},userSetting:function(e){this.edit.title="修改用户密码和角色",this.edit.visible=!0,this.edit.type="user",this.edit.login_name=e,this.edit.userEditAction="edit"},userDisableFront:function(e){var t=this;(function(e){return h.a.post("/privilege/userDisable",e).then(function(e){return e.data})})({user_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):(t.$message({message:e.msg,type:"success"}),t.userGetFront())})},userEnableFront:function(e){var t=this;(function(e){return h.a.post("/privilege/userEnable",e).then(function(e){return e.data})})({user_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):(t.$message({message:e.msg,type:"success"}),t.userGetFront())})},userDeleteFront:function(e){var t=this;this.$confirm("确认删除吗?","提示",{}).then(function(){(function(e){return h.a.post("/privilege/userDelete",e).then(function(e){return e.data})})({user_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):(t.$message({message:e.msg,type:"success"}),t.userGetFront())})})},roleGetFront:function(){var e=this;C().then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else{for(var a=0;a<t.data.length;a++)1==t.data[a].is_valid?t.data[a].is_disabled="否":0==t.data[a].is_valid&&(t.data[a].is_disabled="是");e.roleData=t.data}})},roleAdd:function(){this.edit.roleEditRoleId=0,this.edit.roleEditName="",this.edit.roleEditRemark="",this.edit.roleEditAction="new",this.edit.title="新增角色",this.edit.visible=!0,this.edit.type="role"},roleSetting:function(e){var t=this;(function(e){return h.a.post("/privilege/rolePrivilegeGet",e).then(function(e){return e.data})})({role_id:e}).then(function(a){if(200!==a.code)t.$message({message:a.msg,type:"error"});else{t.edit.checkedPrivilege=[];for(var i=0;i<a.data.length;i++)t.edit.checkedPrivilege.push(a.data[i].privilege_name);x().then(function(a){if(200!==a.code)t.$message({message:a.msg,type:"error"});else{t.edit.privilegeData=[];for(var i=0;i<a.data.length;i++)t.edit.privilegeData.push({id:a.data[i].id,label:a.data[i].name});t.edit.roleEditRoleId=e,t.edit.roleEditAction="edit",t.edit.title="修改角色对应权限",t.edit.visible=!0,t.edit.type="role"}})}})},roleDisableFront:function(e){var t=this;(function(e){return h.a.post("/privilege/roleDisable",e).then(function(e){return e.data})})({role_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):(t.$message({message:e.msg,type:"success"}),t.roleGetFront())})},roleEnableFront:function(e){var t=this;(function(e){return h.a.post("/privilege/roleEnable",e).then(function(e){return e.data})})({role_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):(t.$message({message:e.msg,type:"success"}),t.roleGetFront())})},roleEditFront:function(e,t,a){this.edit.roleEditAction="new",this.edit.roleEditRoleId=e,this.edit.roleEditName=t,this.edit.roleEditRemark=a,this.edit.title="修改角色",this.edit.visible=!0,this.edit.type="role"},roleDeleteFront:function(e){var t=this;this.$confirm("确认删除吗?","提示",{}).then(function(){(function(e){return h.a.post("/privilege/roleDelete",e).then(function(e){return e.data})})({role_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):(t.$message({message:e.msg,type:"success"}),t.roleGetFront())})})},privilegeGetFront:function(){var e=this;x().then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else{e.privilegeData=[];for(var a=0;a<t.data.length;a++)e.privilegeData.push({id:t.data[a].id,label:t.data[a].name,name:t.data[a].name,mark:t.data[a].mark,remark:t.data[a].remark,is_valid:t.data[a].is_valid,update_time:t.data[a].update_time,is_disabled:1==t.data[a].is_valid?"否":"是"})}})},privilegeAdd:function(){this.edit.privilegeEditAction="new",this.edit.privilegeEditPrivilegeId=0,this.edit.privilegeEditPrivilegeName="",this.edit.privilegeEditPrivilegeMark="",this.edit.privilegeEditPrivilegeRemark="",this.edit.title="新增权限",this.edit.visible=!0,this.edit.type="privilege"},privilegeEditFront:function(e,t,a,i){this.edit.privilegeEditAction="new",this.edit.privilegeEditPrivilegeId=e,this.edit.privilegeEditPrivilegeName=t,this.edit.privilegeEditPrivilegeMark=a,this.edit.privilegeEditPrivilegeRemark=i,this.edit.title="修改权限",this.edit.visible=!0,this.edit.type="privilege"},privilegeDisableFront:function(e){var t=this;(function(e){return h.a.post("/privilege/privilegeDisable",e).then(function(e){return e.data})})({privilege_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):(t.$message({message:e.msg,type:"success"}),t.privilegeGetFront())})},privilegeEnableFront:function(e){var t=this;(function(e){return h.a.post("/privilege/privilegeEnable",e).then(function(e){return e.data})})({privilege_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):(t.$message({message:e.msg,type:"success"}),t.privilegeGetFront())})},privilegeDeleteFront:function(e){var t=this;this.$confirm("确认删除吗?","提示",{}).then(function(){(function(e){return h.a.post("/privilege/privilegeDelete",e).then(function(e){return e.data})})({privilege_id:e}).then(function(e){200!==e.code?t.$message({message:e.msg,type:"error"}):(t.$message({message:e.msg,type:"success"}),t.privilegeGetFront())})})}},mounted:function(){this.userGetFront()}},A=(a("UTh3"),Object(l.a)(W,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row margin_bottom-medium",attrs:{gutter:20}},[a("el-col",{staticClass:"lift-side-bar",attrs:{span:5}},[a("el-card",{staticClass:"left-side-box-card"},[a("el-collapse",{attrs:{accordion:""},on:{change:e.handleChange},model:{value:e.activeSystem,callback:function(t){e.activeSystem=t},expression:"activeSystem"}},[a("el-collapse-item",{attrs:{title:"用户设置",name:"用户设置"}},[a("div",{staticClass:"collapse-div"},[e._v("包括用户密码、角色的修改")])]),e._v(" "),a("el-collapse-item",{attrs:{title:"角色对应权限设置",name:"角色对应权限设置"}},[a("div",{staticClass:"collapse-div"},[e._v("包括角色的新增、角色对应权限的设置")])]),e._v(" "),a("el-collapse-item",{attrs:{title:"权限设置",name:"权限设置"}},[a("div",{staticClass:"collapse-div"},[e._v("包括权限的新增、修改和删除")])])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"right-side-bar",attrs:{span:19}},[a("el-card",{staticClass:"left-side-box-card"},["用户设置"==e.activeDiv?a("div",[a("el-button",{staticClass:"margin_bottom-small",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.userAdd()}}},[e._v("新增用户")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",height:"400",data:e.userData,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"login_name",label:"登录名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role_name",label:"角色",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_disabled",label:"是否禁用",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.is_valid,expression:"scope.row.is_valid==1"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.userDisableFront(t.row.id)}}},[e._v("禁用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.userEnableFront(t.row.id)}}},[e._v("启用")]),e._v(" "),1==t.row.is_edit?a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.userSetting(t.row.login_name)}}},[e._v("修改")]):e._e(),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.userDeleteFront(t.row.id)}}},[e._v("删除")])]}}],null,!1,2362278242)})],1)],1):e._e(),e._v(" "),"角色对应权限设置"==e.activeDiv?a("div",[a("el-button",{staticClass:"margin_bottom-small",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.roleAdd()}}},[e._v("新增角色")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",height:"400",data:e.roleData,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_disabled",label:"是否禁用",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.is_valid,expression:"scope.row.is_valid==1"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.roleDisableFront(t.row.id)}}},[e._v("禁用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.roleEnableFront(t.row.id)}}},[e._v("启用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.roleEditFront(t.row.id,t.row.name,t.row.remark)}}},[e._v("修改")]),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.roleSetting(t.row.id)}}},[e._v("配置对应权限")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.roleDeleteFront(t.row.id)}}},[e._v("删除")])]}}],null,!1,2728305531)})],1)],1):e._e(),e._v(" "),"权限设置"==e.activeDiv?a("div",[a("el-button",{staticClass:"margin_bottom-small",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.privilegeAdd()}}},[e._v("新增权限")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",height:"400",data:e.privilegeData,stripe:""}},[a("el-table-column",{attrs:{prop:"name",sortable:"",label:"名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",sortable:"",label:"标识",width:"230"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_disabled",label:"是否禁用",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.is_valid,expression:"scope.row.is_valid==1"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.privilegeDisableFront(t.row.id)}}},[e._v("禁用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.privilegeEnableFront(t.row.id)}}},[e._v("启用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.privilegeEditFront(t.row.id,t.row.name,t.row.mark,t.row.remark)}}},[e._v("修改")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.privilegeDeleteFront(t.row.id)}}},[e._v("删除")])]}}],null,!1,907084781)})],1)],1):e._e()])],1),e._v(" "),a("el-drawer",{attrs:{title:e.edit.title,visible:e.edit.visible,"close-on-click-modal":!1,size:"60%",direction:"btt"},on:{"update:visible":function(t){return e.$set(e.edit,"visible",t)},closed:e.editFormClosed}},["user"==e.edit.type&e.edit.visible?a("div",[a("ConsolePrivilegeEditUser",{attrs:{login_name:e.edit.login_name,action:e.edit.userEditAction},on:{close:function(t){return e.close()}}})],1):e._e(),e._v(" "),"role"==e.edit.type&e.edit.visible?a("div",[a("ConsolePrivilegeEditRole",{attrs:{action:e.edit.roleEditAction,checkedPrivilege:e.edit.checkedPrivilege,privilegeData:e.edit.privilegeData,roleId:e.edit.roleEditRoleId,roleName:e.edit.roleEditName,roleRemark:e.edit.roleEditRemark},on:{close:function(t){return e.close()}}})],1):e._e(),e._v(" "),"privilege"==e.edit.type&e.edit.visible?a("div",[a("ConsolePrivilegeEditPrivilege",{attrs:{action:e.edit.privilegeEditAction,privilegeId:e.edit.privilegeEditPrivilegeId,privilegeName:e.edit.privilegeEditPrivilegeName,privilegeMark:e.edit.privilegeEditPrivilegeMark,privilegeRemark:e.edit.privilegeEditPrivilegeRemark},on:{close:function(t){return e.close()}}})],1):e._e()])],1)],1)},[],!1,null,"ff08abd2",null));A.options.__file="ConsolePrivilege.vue";var M={name:"Console",components:{ConsoleScript:y,ConsolePrivilege:A.exports},data:function(){return{consoleOptions:[],drawer:{title:"",size:"",visible:!1,direction:"ttb"},activeComponent:""}},methods:{consoleGetFront:function(){var e=this;(function(e){return h.a.get("/console/get",e).then(function(e){return e.data})})().then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):e.consoleOptions=t.data})},consoleOptionClicked:function(e){this.activeComponent=e.component_name,this.drawer.title=e.name,this.drawer.visible=!0,this.drawer.direction="ttb",this.drawer.size="80%"}},created:function(){},mounted:function(){try{var e=sessionStorage.getItem("user").replace(/\"/g,"");this.user=e}catch(e){}this.consoleGetFront()}},L=(a("1ZoL"),Object(l.a)(M,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"console-main"},[a("el-row",{staticClass:"margin_bottom-large"},e._l(e.consoleOptions,function(t){return a("el-col",{key:t,attrs:{span:5,offset:1}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.name))])]),e._v(" "),a("i",{class:t.icon,staticStyle:{"font-size":"30px"}}),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small"},on:{click:function(a){return e.consoleOptionClicked(t)}}},[e._v("进入")])],1)],1)}),1),e._v(" "),a("el-drawer",{attrs:{title:e.drawer.title,visible:e.drawer.visible,direction:e.drawer.direction,size:e.drawer.size},on:{"update:visible":function(t){return e.$set(e.drawer,"visible",t)}}},[e.drawer.visible?a("div",{staticClass:"margin-medium"},["ConsoleScript"==e.activeComponent?a("div",[a("ConsoleScript")],1):e._e(),e._v(" "),"ConsolePrivilege"==e.activeComponent?a("div",[a("ConsolePrivilege")],1):e._e()]):e._e()])],1)},[],!1,null,"1116a1ba",null));L.options.__file="Console.vue";var R={name:"login",components:{Console:L.exports},data:function(){return{visible:!1,username:"",password:"",salt:"",user:"",drawer:{title:"",size:"",visible:!1,direction:"ttb"}}},methods:{md5It:function(e){return e=p()(e)},login:function(){var e=this;if(""===this.username||""===this.password||void 0===this.username||void 0===this.password||0==this.username.length||0==this.password.length)this.$notify.error({message:"请填写用户名和密码",type:"error"});else{var t={login_name:this.username};E(t).then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else{var a={login_name:e.username,password:e.md5It(e.md5It(e.md5It(e.password)+t.data.stable_salt)+t.data.salt),is_generate_cookie:!0};S(a).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.visible=!1,e.$message({message:t.msg,type:"success"}),e.$cookies.set("user_key",t.user_key),e.user=t.user,sessionStorage.setItem("user",u()(t.user)),e.$emit("user",e.user))})}})}},logout:function(){sessionStorage.removeItem("user"),this.user="",this.$message({message:"退出成功！",type:"success"}),this.$cookies.remove("user_key"),this.$emit("user","")},consoleSettingClicked:function(){this.drawer.title="控制台",this.drawer.size="500",this.drawer.visible=!0,this.drawer.direction="ttb"}},created:function(){},mounted:function(){try{var e=sessionStorage.getItem("user").replace(/\"/g,"");this.user=e}catch(e){}}},q=(a("OKON"),Object(l.a)(R,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-button"},[a("el-popover",{directives:[{name:"show",rawName:"v-show",value:""==e.user,expression:"user==''"}],staticClass:"login-popover",attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-input",{staticClass:"username",attrs:{size:"small",placeholder:"用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("el-input",{staticClass:"password",attrs:{size:"small",placeholder:"密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("el-button",{staticClass:"login",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.login()}}},[e._v("登录")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("登录")])],1),e._v(" "),a("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:""!=e.user,expression:"user!=''"}],staticClass:"user-popover",attrs:{trigger:"hover"}},[a("span",{staticClass:"el-dropdown-link userinfo-inner"},[e._v(e._s(e.user))]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.consoleSettingClicked(t)}}},[e._v("控制台")]),e._v(" "),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.logout(t)}}},[e._v("退出登录")])],1)],1),e._v(" "),a("el-drawer",{attrs:{title:e.drawer.title,visible:e.drawer.visible,direction:e.drawer.direction,size:e.drawer.size},on:{"update:visible":function(t){return e.$set(e.drawer,"visible",t)}}},[a("Console")],1)],1)},[],!1,null,"5140c7cc",null));q.options.__file="Login.vue";var j=q.exports,B={name:"weather",props:{locations:Array,user:String},data:function(){return{weathers:[{location:"",weatherForm:{tmp:"-",tmp_min:"-",tmp_max:"-",fl:"-",wind:"-",aqi:"-",tomorrow_tmp_min:"-",tomorrow_tmp_max:"-"},iconfontWeatherClass:"el-icon-more",iconfontAqiClass:"el-icon-more",iconfontTomorrowWeatherClass:"el-icon-more"}],loading:!0,todayShow:!0,popover:{visible:!1,location:""}}},watch:{locations:function(e,t){this.getWeatherDatafront(e)}},methods:{addLocation:function(){var e=this;this.popover.visible=!1,function(e){return h.a.post("/weather/weatherPersonalizedSave",e).then(function(e){return e.data})}({user:sessionStorage.getItem("user").replace(/\"/g,""),location:this.popover.location}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):e.$message({message:t.msg,type:"success"})})},weatherDelete:function(e){console.log(e)},getWeatherDatafront:function(e){var t=this;this.todayShow=!1,void 0!=e&&""!=e&&0!=e.length||(e=void 0);try{var a=sessionStorage.getItem("user").replace(/\"/g,"")}catch(e){a=void 0}void 0!=a&void 0==e||(function(e){return h.a.post("/weather/weatherData",e).then(function(e){return e.data})}({locations:e,user:a}).then(function(e){if(200!==e.code)t.$message({message:e.msg,type:"error"});else{t.weathers=[];for(var a=0;a<e.data.length;a++){var i=e.data[a],s=i.id,o=i.location,r=i.fl,l=i.tmp,n=i.wind,c=i.cond_code_d,d=(i.cond_txt_d,i.cond_code_n,i.cond_txt_n,i.tmp_max),u=i.tmp_min,m=i.tomorrow_cond_code_d,p=(i.tomorrow_cond_txt_d,i.tomorrow_tmp_max),v=i.tomorrow_tmp_min,h=i.aqi;t.weathers.push({weatherForm:{}}),t.weathers[a].weatherForm.tmp=l,t.weathers[a].weatherForm.tmp_min=u,t.weathers[a].weatherForm.tmp_max=d,t.weathers[a].weatherForm.fl=r,t.weathers[a].weatherForm.wind=n,t.weathers[a].weatherForm.aqi=h,t.weathers[a].weatherForm.tomorrow_tmp_min=v,t.weathers[a].weatherForm.tomorrow_tmp_max=p,t.weathers[a].location=o,t.weathers[a].id=s,t.loading=!1,100==c&&(t.weathers[a].iconfontWeatherClass="iconfont icon-qing"),(c>=101&&c<=102||104==c||c>=202&&c<=208)&&(t.weathers[a].iconfontWeatherClass="iconfont icon-duoyun"),103==c&&(t.weathers[a].iconfontWeatherClass="iconfont icon-duoyunzhuanyin"),200==c&&(t.weathers[a].iconfontWeatherClass="iconfont icon-feng"),201==c&&(t.weathers[a].iconfontWeatherClass="iconfont icon-qing"),c>=209&&c<=213&&(t.weathers[a].iconfontWeatherClass="iconfont icon-taifeng"),c>=301&&c<=303&&(t.weathers[a].iconfontWeatherClass="iconfont icon-baoyu"),304!=c&&313!=c||(t.weathers[a].iconfontWeatherClass="iconfont icon-bingbao"),300!=c&&305!=c&&309!=c&&314!=c||(t.weathers[a].iconfontWeatherClass="iconfont icon-xiaoyu"),306!=c&&315!=c&&399!=c||(t.weathers[a].iconfontWeatherClass="iconfont icon-zhongyu"),(c>=307&&c<=308||c>=310&&c<=312||c>=316&&c<=318)&&(t.weathers[a].iconfontWeatherClass="iconfont icon-dayu"),400!=c&&407!=c&&408!=c||(t.weathers[a].iconfontWeatherClass="iconfont icon-xiaoxue"),401!=c&&409!=c&&499!=c||(t.weathers[a].iconfontWeatherClass="iconfont icon-zhongxue"),402!=c&&410!=c||(t.weathers[a].iconfontWeatherClass="iconfont icon-daxue"),403==c&&(t.weathers[a].iconfontWeatherClass="iconfont icon-baoxue"),c>=404&&c<=406&&(t.weathers[a].iconfontWeatherClass="iconfont icon-yujiaxue"),(c>=500&&c<=501||c>=509&&c<=510||c>=514&&c<=515)&&(t.weathers[a].iconfontWeatherClass="iconfont icon-wu"),502==c&&(t.weathers[a].iconfontWeatherClass="iconfont icon-mai"),c>=503&&c<=504&&(t.weathers[a].iconfontWeatherClass="iconfont icon-shachen1"),c>=507&&c<=508&&(t.weathers[a].iconfontWeatherClass="iconfont icon-shachenbao"),h>=100&&(t.weathers[a].iconfontAqiClass="iconfont icon-PM"),h<100&&(t.weathers[a].iconfontAqiClass="iconfont icon-app_icons--"),100==m&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-qing"),(m>=101&&m<=102||104==m||m>=202&&m<=208)&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-duoyun"),103==m&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-duoyunzhuanyin"),200==m&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-feng"),201==m&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-qing"),m>=209&&m<=213&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-taifeng"),m>=301&&m<=303&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-baoyu"),304!=m&&313!=m||(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-bingbao"),300!=m&&305!=m&&309!=m&&314!=m||(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-xiaoyu"),306!=m&&315!=m&&399!=m||(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-zhongyu"),(m>=307&&m<=308||m>=310&&m<=312||m>=316&&m<=318)&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-dayu"),400!=m&&407!=m&&408!=m||(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-xiaoxue"),401!=m&&409!=m&&499!=m||(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-zhongxue"),402!=m&&410!=m||(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-daxue"),403==m&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-baoxue"),m>=404&&m<=406&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-yujiaxue"),(m>=500&&m<=501||m>=509&&m<=510||m>=514&&m<=515)&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-wu"),502==m&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-mai"),m>=503&&m<=504&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-shachen1"),m>=507&&m<=508&&(t.weathers[a].iconfontTomorrowWeatherClass="iconfont icon-shachenbao"),t.todayShow=!0}}}).catch(function(e){console.log(e)}),this.$emit("weatherLoaded",!0))}},created:function(){},mounted:function(){}},G=(a("Y6Y+"),Object(l.a)(B,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"weather"},[a("el-carousel",{attrs:{height:"250px",trigger:"click",interval:"5000","indicator-position":"outside"}},e._l(e.weathers,function(t){return a("el-carousel-item",{key:t},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.todayShow,expression:"todayShow"}],ref:"weatherForm",refInFor:!0,attrs:{type:"flex",justify:"center",model:t.weatherForm}},[a("div",[a("td",[a("div",{staticClass:"location"},[e._v(e._s(t.location))])]),e._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:0!=t.id,expression:"weather.id==0?false:true"}]},[a("i",{staticClass:"weatherDelete el-icon-delete",on:{click:function(a){return e.weatherDelete(t.location)}}})])])]),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.todayShow,expression:"todayShow"}],ref:"weatherForm",refInFor:!0,attrs:{type:"flex",justify:"center",model:t.weatherForm}},[a("td",[a("el-row",{attrs:{type:"flex",justify:"left"}},[a("td",{staticClass:"todayWeatherIcon"},[a("i",{class:t.iconfontWeatherClass,staticStyle:{"font-size":"100px"}})]),e._v(" "),a("td",{staticClass:"todayWeatherText"},[a("div",{staticClass:"todayWeatherTextDiv"},[e._v(e._s(t.weatherForm.tmp)+"°C")])])]),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"left"}},[a("td",{staticClass:"todayAqiIcon"},[a("i",{class:t.iconfontAqiClass,staticStyle:{"font-size":"50px"}})]),e._v(" "),a("td",{staticClass:"todayAqiText"},[a("div",{staticClass:"todayAqiTextDiv"},[e._v("AQI:"+e._s(t.weatherForm.aqi))])])]),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"left"}},[a("td",{staticClass:"tomorrowWeatherIcon"},[a("i",{class:t.iconfontTomorrowWeatherClass,staticStyle:{"font-size":"50px"}})]),e._v(" "),a("td",{staticClass:"tomorrowWeatherText"},[a("div",{staticClass:"tomorrowWeatherTextDiv"},[e._v("明日:"+e._s(t.weatherForm.tomorrow_tmp_min)+"°C-"+e._s(t.weatherForm.tomorrow_tmp_max)+"°C")])])])],1),e._v(" "),a("div",{staticStyle:{float:"left","margin-top":"30px",width:"1px",height:"175px",background:"darkgray","margin-left":"25px","margin-right":"25px"}}),e._v(" "),a("div",{staticClass:"weatherSideText"},[a("td",[a("div",{staticClass:"weatherSideTextDetail"},[e._v("今日: "+e._s(t.weatherForm.tmp_min)+"°C-"+e._s(t.weatherForm.tmp_max)+"°C")]),e._v(" "),a("div",{staticClass:"weatherSideTextDetail"},[e._v("风力: "+e._s(t.weatherForm.wind))]),e._v(" "),a("div",{staticClass:"weatherSideTextDetail"},[e._v("体感: "+e._s(t.weatherForm.fl)+"°C")])])])])],1)}),1),e._v(" "),a("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.popover.visible,callback:function(t){e.$set(e.popover,"visible",t)},expression:"popover.visible"}},[a("p",[e._v("添加城市：")]),e._v(" "),a("el-input",{attrs:{size:"mini",placeholder:"城市名称，如：北京"},model:{value:e.popover.location,callback:function(t){e.$set(e.popover,"location",t)},expression:"popover.location"}}),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addLocation()}}},[e._v("确定")])],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.user,expression:"user!=undefined"}],attrs:{slot:"reference",icon:"el-icon-plus",size:"mini",circle:""},slot:"reference"})],1)],1)},[],!1,null,"067a0eca",null));G.options.__file="Weather.vue";var U=G.exports,V={name:"IconComponet",props:{icons:Array},watch:{icons:function(e,t){this.iconInit()}},data:function(){return{iconData:[]}},methods:{iconChoosed:function(e){this.$emit("iconName",e)},iconInit:function(){this.iconData=[];for(var e=0;e<Math.floor(this.icons.length/12)+1;e++){this.iconData.push([]);for(var t=0;t<12&&(e!=Math.floor(this.icons.length/12)||t!=this.icons.length%12);t++)this.iconData[this.iconData.length-1].push(this.icons[12*e+t])}}},mounted:function(){this.iconInit()}},K=(a("BVTj"),Object(l.a)(V,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.iconData,function(t){return a("el-row",{key:t,staticClass:"margin_bottom-medium"},e._l(t,function(t){return a("el-col",{key:t,attrs:{span:2}},[a("el-button",{attrs:{size:"medium"},on:{click:function(a){return e.iconChoosed(t.name)}}},[a("i",{class:t.name+" icon-medium"})])],1)}),1)}),1)},[],!1,null,"7b416bab",null));K.options.__file="Icon.vue";var H=K.exports,Y=a("EbCt"),X={name:"bookmarks",props:{user:String,bookmarksData:Array},components:{SlickItem:Y.SlickItem,SlickList:Y.SlickList,IconComponet:H},watch:{bookmarksData:function(e,t){this.bookmarksDataArray=e}},data:function(){return{bookmarksDataArray:[],bookmarksEdit:{visible:!1,list:[]},bookmarksEditForm:{visible:!1,name:"",url:"https://",icon:""},bookmarksEditTempIndex:0,icon:{visible:!1,data:[]}}},methods:{bookmarksClicked:function(e){window.open(e)},bookmarksEditFormConfirmClicked:function(){var e=this;if("新增书签"==this.bookmarksEditForm.title)(function(e){return h.a.post("/bookmarks/bookmarksAdd",e).then(function(e){return e.data})})({url:this.bookmarksEditForm.url,name:this.bookmarksEditForm.name,icon:this.bookmarksEditForm.icon,user:sessionStorage.getItem("user").replace(/\"/g,"")}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.$emit("bookmarksUpdate"))});else if("编辑书签"==this.bookmarksEditForm.title){var t=this.bookmarksEditTempIndex;this.bookmarksEdit.list[t].url=this.bookmarksEditForm.url,this.bookmarksEdit.list[t].name=this.bookmarksEditForm.name,this.bookmarksEdit.list[t].icon=this.bookmarksEditForm.icon}this.bookmarksEditForm.visible=!1},bookmarksOptionButtonAddClicked:function(){this.bookmarksEditForm={title:"新增书签",visible:!0,name:"",url:"https://",icon:""}},bookmarksOptionButtonSettingClicked:function(){for(var e=[],t=0;t<this.bookmarksDataArray.length;t++)for(var a=0;a<this.bookmarksDataArray[t].length;a++)e.push({id:this.bookmarksDataArray[t][a].id,name:this.bookmarksDataArray[t][a].name,url:this.bookmarksDataArray[t][a].url,icon:this.bookmarksDataArray[t][a].icon});console.log(e),this.bookmarksEdit.list=e,this.bookmarksEdit.visible=!0},bookmarksEditSubmit:function(){for(var e=this,t=0;t<this.bookmarksEdit.list.length;t++)this.bookmarksEdit.list[t].order=t+1;console.log(this.bookmarksEdit.list),function(e){return h.a.post("/bookmarks/bookmarksEdit",e).then(function(e){return e.data})}({bookmarks:this.bookmarksEdit.list,user:sessionStorage.getItem("user").replace(/\"/g,"")}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.$message({message:t.msg,type:"success"}),e.bookmarksEdit.visible=!1),e.$emit("bookmarksUpdate")})},bookmarksSetting:function(e,t){this.bookmarksEditTempIndex=t,this.bookmarksEditForm={title:"编辑书签",visible:!0,name:e.name,url:e.url,icon:e.icon}},bookmarksDeleteSubmit:function(e,t){this.bookmarksEdit.list.splice(t,1),console.log(e,t)},bookmarksIconFront:function(){var e=this;(function(e){return h.a.get("/icon",e).then(function(e){return e.data})})().then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.icon.visible=!0,e.icon.data=t.data)})},iconNameGet:function(e){this.bookmarksEditForm.icon=e,this.icon.visible=!1}},created:function(){},mounted:function(){}},J=(a("hG3U"),Object(l.a)(X,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bookmarks-main"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",[a("div",{staticClass:"bookmarks-label"},[e._v("书签")])])]),e._v(" "),a("div",{staticClass:"bookmarks-data-row-main"},e._l(e.bookmarksDataArray,function(t){return a("el-row",{key:t,staticClass:"margin_bottom-medium"},e._l(t,function(t){return a("el-col",{key:t,attrs:{span:6}},[a("el-button",{staticClass:"bookmarks-main-button",attrs:{size:"small"},on:{click:function(a){return e.bookmarksClicked(t.url)}}},[a("i",{class:t.icon,staticStyle:{}}),e._v("\n          "+e._s(t.name)+"\n        ")])],1)}),1)}),1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.user,expression:"user!=undefined"}],staticClass:"bookmarks-option-button",attrs:{type:"flex",justify:"center"}},[a("el-button",{staticClass:"bookmarks-option-button-add",attrs:{size:"small",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.bookmarksOptionButtonAddClicked()}}}),e._v(" "),a("el-button",{staticClass:"bookmarks-option-button-edit-form",attrs:{size:"small",icon:"el-icon-setting",circle:""},on:{click:function(t){return e.bookmarksOptionButtonSettingClicked()}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.bookmarksEditForm.title,visible:e.bookmarksEditForm.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.bookmarksEditForm,"visible",t)}}},[a("el-form",{ref:"form",attrs:{model:e.bookmarksEditForm,size:"mini"}},[a("el-form-item",{attrs:{label:"网站名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"网站名称"},model:{value:e.bookmarksEditForm.name,callback:function(t){e.$set(e.bookmarksEditForm,"name",t)},expression:"bookmarksEditForm.name"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"网站链接"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"链接(需要完整填写，包括'http://')"},model:{value:e.bookmarksEditForm.url,callback:function(t){e.$set(e.bookmarksEditForm,"url",t)},expression:"bookmarksEditForm.url"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"图标名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"图标名称",disabled:""},model:{value:e.bookmarksEditForm.icon,callback:function(t){e.$set(e.bookmarksEditForm,"icon",t)},expression:"bookmarksEditForm.icon"}}),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.bookmarksIconFront()}}},[e._v("选择图标")])],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.bookmarksEditFormConfirmClicked()}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑书签",visible:e.bookmarksEdit.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.bookmarksEdit,"visible",t)}}},[a("SlickList",{staticClass:"slick_list",attrs:{lockAxis:"y"},model:{value:e.bookmarksEdit.list,callback:function(t){e.$set(e.bookmarksEdit,"list",t)},expression:"bookmarksEdit.list"}},e._l(e.bookmarksEdit.list,function(t,i){return a("SlickItem",{key:i,staticClass:"slick_list_item",attrs:{index:i}},[a("i",{staticClass:"el-icon-s-operation",staticStyle:{color:"#6a6c70"}}),e._v(" "),a("span",{staticClass:"slick_list_item_span"},[e._v(e._s(t.name))]),e._v(" "),a("div",{staticClass:"slick_list_item_button"},[a("el-button",{staticClass:"el-icon-setting",attrs:{size:"mini"},on:{click:function(a){return e.bookmarksSetting(t,i)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.bookmarksDeleteSubmit(t,i)}}})],1)])}),1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"edit-form-confirm",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.bookmarksEditSubmit()}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择喜欢的图标",visible:e.icon.visible,width:"70%"},on:{"update:visible":function(t){return e.$set(e.icon,"visible",t)}}},[a("IconComponet",{attrs:{icons:e.icon.data},on:{iconName:e.iconNameGet}})],1)],1)},[],!1,null,"09506d6a",null));J.options.__file="Bookmarks.vue";var Z=J.exports,Q={name:"stock",props:{user:String,stockData:Array},components:{SlickItem:Y.SlickItem,SlickList:Y.SlickList},watch:{stockData:function(e,t){}},data:function(){return{}},methods:{},created:function(){},mounted:function(){}},ee=(a("rX5T"),Object(l.a)(Q,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stock-main"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",[a("div",{staticClass:"label"},[e._v("股票")])])]),e._v(" "),a("el-carousel",{attrs:{height:"250px",trigger:"click",interval:"5000","indicator-position":"outside"}},e._l(e.weathers,function(e){return a("el-carousel-item",{key:e})}),1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:void 0!=e.user,expression:"user!=undefined"}],staticClass:"bookmarks-option-button",attrs:{type:"flex",justify:"center"}},[a("el-button",{staticClass:"bookmarks-option-button-add",attrs:{size:"small",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.bookmarksOptionButtonAddClicked()}}}),e._v(" "),a("el-button",{staticClass:"bookmarks-option-button-edit-form",attrs:{size:"small",icon:"el-icon-setting",circle:""},on:{click:function(t){return e.bookmarksOptionButtonSettingClicked()}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.bookmarksEditForm.title,visible:e.bookmarksEditForm.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.bookmarksEditForm,"visible",t)}}},[a("el-form",{ref:"form",attrs:{model:e.bookmarksEditForm,size:"mini"}},[a("el-form-item",{attrs:{label:"网站名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"网站名称"},model:{value:e.bookmarksEditForm.name,callback:function(t){e.$set(e.bookmarksEditForm,"name",t)},expression:"bookmarksEditForm.name"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"网站链接"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"链接(需要完整填写，包括'http://')"},model:{value:e.bookmarksEditForm.url,callback:function(t){e.$set(e.bookmarksEditForm,"url",t)},expression:"bookmarksEditForm.url"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"图标名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"图标名称",disabled:""},model:{value:e.bookmarksEditForm.icon,callback:function(t){e.$set(e.bookmarksEditForm,"icon",t)},expression:"bookmarksEditForm.icon"}}),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.bookmarksIconFront()}}},[e._v("选择图标")])],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.bookmarksEditFormConfirmClicked()}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑书签",visible:e.bookmarksEdit.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.bookmarksEdit,"visible",t)}}},[a("SlickList",{staticClass:"slick_list",attrs:{lockAxis:"y"},model:{value:e.bookmarksEdit.list,callback:function(t){e.$set(e.bookmarksEdit,"list",t)},expression:"bookmarksEdit.list"}},e._l(e.bookmarksEdit.list,function(t,i){return a("SlickItem",{key:i,staticClass:"slick_list_item",attrs:{index:i}},[a("i",{staticClass:"el-icon-s-operation",staticStyle:{color:"#6a6c70"}}),e._v(" "),a("span",{staticClass:"slick_list_item_span"},[e._v(e._s(t.name))]),e._v(" "),a("div",{staticClass:"slick_list_item_button"},[a("el-button",{staticClass:"el-icon-setting",attrs:{size:"mini"},on:{click:function(a){return e.bookmarksSetting(t,i)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.bookmarksDeleteSubmit(t,i)}}})],1)])}),1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"edit-form-confirm",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.bookmarksEditSubmit()}}},[e._v("确定")])],1)],1)],1)},[],!1,null,"7af7eac0",null));ee.options.__file="Stock.vue";var te={components:{search:c,login:j,weather:U,bookmarks:Z,stock:ee.exports},data:function(){return{user:"",locations:[],bookmarksData:[],show:{weather:!1}}},methods:{userInfoFront:function(){var e=this;try{var t=sessionStorage.getItem("user").replace(/\"/g,"")}catch(e){t=void 0}this.user=t,function(e){return h.a.post("/userInfo",e).then(function(e){return e.data})}({user:t}).then(function(t){200!==t.code?e.$message({message:t.msg,type:"error"}):(e.locations=t.data.locations,e.bookmarksData=t.data.bookmarks)})},userLoginedOrLogout:function(e){""!=e?this.userInfoFront():location.reload()},weatherLoaded:function(){this.show.weather=!0}},created:function(){this.userInfoFront()}},ae=(a("A0++"),Object(l.a)(te,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-row",{staticClass:"loginRow"},[a("login",{on:{user:e.userLoginedOrLogout}})],1),e._v(" "),a("el-row",{staticClass:"searchRow"},[a("search")],1),e._v(" "),a("el-row",{staticClass:"cardRow"},[a("el-col",{attrs:{span:7,offset:1}},[a("transition",{attrs:{name:"el-zoom-in-top"}},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.show.weather,expression:"show.weather"}],attrs:{shadow:"hover"}},[a("weather",{attrs:{locations:e.locations,user:e.user},on:{weatherLoaded:e.weatherLoaded}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7,offset:1}},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.show.weather,expression:"show.weather"}],attrs:{shadow:"hover"}},[a("bookmarks",{attrs:{bookmarksData:e.bookmarksData,user:e.user},on:{bookmarksUpdate:e.userInfoFront}})],1)],1)],1)],1)},[],!1,null,null,null));ae.options.__file="App.vue";var ie=ae.exports,se=a("jE9Z");i.default.use(se.a);var oe=new se.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[]}),re=a("L2JU"),le=(a("vjVy"),a("H1Ta"),a("Kyfw")),ne=a.n(le);i.default.use(ne.a),i.default.use(o.a),i.default.use(re.a),new i.default({router:oe,el:"#app",render:function(e){return e(ie)}})},WXP2:function(e,t,a){},WpSa:function(e,t,a){},"Y6Y+":function(e,t,a){"use strict";var i=a("Jych");a.n(i).a},ZDEO:function(e,t,a){},h95k:function(e,t,a){},hG3U:function(e,t,a){"use strict";var i=a("7sz2");a.n(i).a},mPn2:function(e,t,a){},oNX8:function(module,__webpack_exports__,__webpack_require__){"use strict";var babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("gDS+"),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0__),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("vDqi"),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),_api_search__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("GSUI");__webpack_exports__.a={name:"search",data:function(){return{word:"",searchIcon:"search-icon el-icon-search",searchEngines:{select:"",select_engine_id:0,main_url:"",auto_complete_url:"",options:[]}}},methods:{searchEnginesDataFront:function(){var e=this;Object(_api_search__WEBPACK_IMPORTED_MODULE_2__.b)().then(function(t){if(200!==t.code)e.$message({message:t.msg,type:"error"});else{for(var a=0;a<t.data.length;a++)e.searchEngines.options.push({id:t.data[a].id,main_url:t.data[a].main_url,auto_complete_url:t.data[a].auto_complete_url,icon:t.data[a].icon,label:t.data[a].name,value:t.data[a].name});e.searchEngines.select=e.searchEngines.options[0].value,e.searchEngines.select_engine_id=e.searchEngines.options[0].id,e.searchEngines.main_url=e.searchEngines.options[0].main_url,e.searchEngines.auto_complete_url=e.searchEngines.options[0].auto_complete_url}})},search:function(){for(var e=0;e<this.searchEngines.options.length&&this.searchEngines.options[e].value!=this.searchEngines.select;e++);this.searchEngines.select_engine_id=this.searchEngines.options[e].id;var t=this.searchEngines.options[e].main_url.replace("%word%",this.word);window.open(t);try{var a=sessionStorage.getItem("user").replace(/\"/g,"")}catch(e){a=void 0}var i={user:a,engine_id:this.searchEngines.select_engine_id,search_text:this.word};Object(_api_search__WEBPACK_IMPORTED_MODULE_2__.c)(i).then(function(e){200!==e.code&&console.log(e.msg)}),this.word="",this.autoComplete("")},autoComplete:function autoComplete(queryString,cb){if(""===queryString||queryString===[]||void 0===queryString)try{cb([])}catch(e){}else{var lastWord=sessionStorage.getItem("lastWord");if(lastWord==queryString)cb(eval(sessionStorage.getItem("lastWordAutoComplete")));else{sessionStorage.setItem("lastWord",queryString);var autoCompleteUrl=this.searchEngines.auto_complete_url.replace("%word%",this.word);try{var user=sessionStorage.getItem("user").replace(/\"/g,"")}catch(e){var user=void 0}var para={autoCompleteUrl:autoCompleteUrl,name:this.searchEngines.select,user:user};Object(_api_search__WEBPACK_IMPORTED_MODULE_2__.a)(para).then(function(e){var t=e.data.map(function(e){return{value:e}});sessionStorage.setItem("lastWordAutoComplete",babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default()(t)),cb(t)})}}}},created:function(){this.searchEnginesDataFront()},mounted:function(){this.$refs.input.focus()}}},q6kt:function(e,t,a){"use strict";var i=a("s2uz");a.n(i).a},rX5T:function(e,t,a){"use strict";var i=a("h95k");a.n(i).a},s2uz:function(e,t,a){},tWKV:function(e,t,a){"use strict";var i=a("mPn2");a.n(i).a},vjVy:function(e,t,a){},xUNX:function(e,t,a){},zmCa:function(e,t,a){}},[["Vtdi","runtime","chunk-elementUI","chunk-libs"]]]);