(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{"/pAc":function(e,t,a){"use strict";var i=a("k5Kj");a.n(i).a},"1hKi":function(e,t,a){},"1iwD":function(e,t,a){"use strict";var i=a("1hKi");a.n(i).a},"2cz+":function(e,t,a){"use strict";var i=a("UIrj");a.n(i).a},"89bo":function(e,t,a){"use strict";var i=a("ovKT");a.n(i).a},"A0++":function(e,t,a){"use strict";var i=a("xUNX");a.n(i).a},ALTg:function(e,t,a){},Af8c:function(e,t,a){},EGwq:function(e,t,a){},EPpt:function(e,t,a){},EpTT:function(e,t,a){"use strict";var i=a("OIVN");a.n(i).a},JVHC:function(e,t,a){"use strict";var i=a("WGpX");a.n(i).a},OIVN:function(e,t,a){},PrQV:function(e,t,a){"use strict";var i=a("j7E0");a.n(i).a},QkgJ:function(e,t,a){"use strict";var i=a("Zgd/");a.n(i).a},RSqK:function(e,t,a){"use strict";var i=a("i7fK");a.n(i).a},TbCT:function(e,t,a){"use strict";var i=a("ge9n");a.n(i).a},UIrj:function(e,t,a){},VkTb:function(e,t,a){},Vtdi:function(e,t,a){"use strict";a.r(t);var i=a("Kw5r"),s=a("XJYT"),r=a.n(s),n=(a("D66Q"),a("14Xm")),o=a.n(n),l=a("D3Ub"),c=a.n(l),d=a("vDqi"),u=a.n(d),m={name:"githubConner"},p=(a("RSqK"),a("KHd+")),v=Object(p.a)(m,function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"github-corner",attrs:{href:"https://github.com/shr1213/PersonalHomepage",target:"_blank","aria-label":"View source on GitHub"}},[t("svg",{staticStyle:{fill:"#409EFF",color:"#fff",position:"absolute",top:"0",border:"0",left:"0",transform:"scale(-1, 1)","z-index":"1"},attrs:{width:"60",height:"60",viewBox:"0 0 250 250","aria-hidden":"true"}},[t("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),this._v(" "),t("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),this._v(" "),t("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])},[],!1,null,null,null);v.options.__file="GithubConner.vue";var _=v.exports,f=a("oNX8").a,g=(a("u8DK"),Object(p.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("div",[a("i",{class:e.searchIcon})]),e._v(" "),a("div",[a("el-autocomplete",{ref:"input",staticClass:"search-input",attrs:{placeholder:"请输入内容","fetch-suggestions":e.autoComplete},on:{select:function(t){return e.search()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.word,callback:function(t){e.word=t},expression:"word"}},[a("el-select",{staticClass:"search-engine-select",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchEngines.select,callback:function(t){e.$set(e.searchEngines,"select",t)},expression:"searchEngines.select"}},e._l(e.searchEngines.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{staticClass:"search-button",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search()}},slot:"append"})],1)],1)])},[],!1,null,"401bd9cd",null));g.options.__file="Search.vue";var h=g.exports,b=a("gDS+"),w=a.n(b),k=a("gjeX"),y=a.n(k),x="/privilege/userGet",D="/privilege/roleGet",C="/privilege/userRoleChange",S="/login/userLogin",E="/login/userLoginSalt",$="/login/userChangePassword",T="/login/userAdd",z={name:"PrivilegeEditUser",props:{user_id:Number,login_name:String,action:String},data:function(){return{username:"",password:"",passwordNew:"",isCheckedPass:!1,role_id:"",roleData:[]}},methods:{md5It:function(e){return e=y()(e)},randomString:function(e){e=e||32;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,i="",s=0;s<e;s++)i+=t.charAt(Math.floor(Math.random()*a));return i},userGetFront:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(x,{user_id:e.user_id});case 3:a=t.sent,i=a.data,e.userData=i.data,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 12:case"end":return t.stop()}},t,e,[[0,8]])}))()},roleGetFront:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get(D);case 3:for(a=t.sent,i=a.data,s=0;s<i.data.length;s++)1==i.data[s].is_valid&&e.roleData.push({label:i.data[s].name,value:i.data[s].id});t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 12:case"end":return t.stop()}},t,e,[[0,8]])}))()},checkPass:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.password&&void 0!==e.password&&0!=e.password.length){t.next=4;break}e.$message({message:"请填写密码",type:"error"}),t.next=22;break;case 4:return t.prev=4,t.next=7,u.a.post(E,{login_name:e.login_name});case 7:return a=t.sent,i=a.data,s={login_name:e.login_name,password:e.md5It(e.md5It(e.md5It(e.password)+i.data.stable_salt)+i.data.salt),is_generate_cookie:!1},t.next=12,u.a.post(S,s);case 12:r=t.sent,n=r.data,e.$message({message:n.msg,type:"success"}),e.isCheckedPass=!0,t.next=22;break;case 18:t.prev=18,t.t0=t.catch(4),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 22:case"end":return t.stop()}},t,e,[[4,18]])}))()},changePass:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.randomString(40),i={login_name:e.login_name,stable_salt:a,password:e.md5It(e.md5It(e.passwordNew)+a)},t.prev=2,t.next=5,u.a.post($,i);case 5:s=t.sent,r=s.data,e.$message({message:r.msg,type:"success"}),e.passwordNew="",t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 15:case"end":return t.stop()}},t,e,[[2,11]])}))()},changeRole:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(C,{role_id:e.role_id,login_name:e.login_name});case 3:a=t.sent,i=a.data,e.$message({message:i.msg,type:"success"}),e.passwordNew="",t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},userAddFront:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.username&&void 0!==e.username&&0!=e.username.length&&""!==e.passwordNew&&void 0!==e.passwordNew&&0!=e.passwordNew.length&&""!=e.role_id){t.next=4;break}e.$message({message:"请将表单填写完整后提交",type:"error"}),t.next=19;break;case 4:return a=e.randomString(40),i={name:e.username,role_id:e.role_id,login_name:e.login_name,stable_salt:a,password:e.md5It(e.md5It(e.passwordNew)+a)},t.prev=6,t.next=9,u.a.post(T,i);case 9:s=t.sent,r=s.data,e.$message({message:r.msg,type:"success"}),e.$emit("close"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(6),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 19:case"end":return t.stop()}},t,e,[[6,15]])}))()}},mounted:function(){this.isCheckedPass=!1,this.roleGetFront()}},F=(a("cN/y"),Object(p.a)(z,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row",attrs:{gutter:20}},["edit"==e.action?a("div",[e.isCheckedPass?e._e():a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入原密码：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{"show-password":"",size:"small",placeholder:"请输入"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.checkPass()}}},[e._v("验证")])],1),e._v(" "),e.isCheckedPass?a("div",[a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入新密码：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{"show-password":"",size:"small",placeholder:"请输入"},model:{value:e.passwordNew,callback:function(t){e.passwordNew=t},expression:"passwordNew"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.changePass()}}},[e._v("提交")])],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium margin_left-large"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请选择角色：")]),e._v(" "),a("el-select",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请选择"},model:{value:e.role_id,callback:function(t){e.role_id=t},expression:"role_id"}},e._l(e.roleData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.changeRole()}}},[e._v("提交")])],1)]):e._e()]):e._e(),e._v(" "),"new"==e.action?a("div",{staticClass:"margin_left-large"},[a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入用户名称：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入用户登录名：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.login_name,callback:function(t){e.login_name=t},expression:"login_name"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入用户密码：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{"show-password":"",size:"small",placeholder:"请输入"},model:{value:e.passwordNew,callback:function(t){e.passwordNew=t},expression:"passwordNew"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请选择角色：")]),e._v(" "),a("el-select",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请选择"},model:{value:e.role_id,callback:function(t){e.role_id=t},expression:"role_id"}},e._l(e.roleData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.userAddFront()}}},[e._v("提交")])],1):e._e()])],1)},[],!1,null,"50480f2a",null));F.options.__file="PrivilegeEditUser.vue";var I=F.exports,M="/privilege/rolePrivilegeEdit",O="/privilege/roleEdit",N={name:"PrivilegeEditRole",props:{action:String,roleId:Number,roleName:String,roleRemark:String,privilegeData:Array,checkedPrivilege:Array},watch:{privilegeData:function(e,t){this.privilegeData=e},checkedPrivilege:function(e,t){this.checkedPrivilege=e},roleId:function(e,t){this.roleId=e},roleName:function(e,t){this.roleName=e},roleRemark:function(e,t){this.roleRemark=e}},data:function(){return{}},methods:{submit:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s,r,n,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("edit"!=e.action){t.next=30;break}e.checkedPrivilegeId=[],a=0;case 3:if(!(a<e.privilegeData.length)){t.next=15;break}i=0;case 5:if(!(i<e.checkedPrivilege.length)){t.next=12;break}if(e.privilegeData[a].label!=e.checkedPrivilege[i]){t.next=9;break}return e.checkedPrivilegeId.push(e.privilegeData[a].id),t.abrupt("continue",9);case 9:i++,t.next=5;break;case 12:a++,t.next=3;break;case 15:return t.prev=15,t.next=18,u.a.post(M,{role_id:e.roleId,checked_privilege_id:e.checkedPrivilegeId});case 18:s=t.sent,r=s.data,e.$message({message:r.msg,type:"success"}),e.$emit("close"),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(15),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 28:t.next=44;break;case 30:if("new"!=e.action){t.next=44;break}return t.prev=31,t.next=34,u.a.post(O,{role_id:e.roleId,name:e.roleName,remark:e.roleRemark});case 34:n=t.sent,l=n.data,e.$message({message:l.msg,type:"success"}),e.$emit("close"),t.next=44;break;case 40:t.prev=40,t.t1=t.catch(31),console.log(t.t1),e.$message({message:t.t1.response.data.msg,type:"error"});case 44:case"end":return t.stop()}},t,e,[[15,24],[31,40]])}))()}},mounted:function(){console.log(this.checkedPrivilege)}},P=(a("EpTT"),Object(p.a)(N,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row",attrs:{gutter:20}},[a("div",{staticClass:"margin_left-large"},["edit"==e.action?a("div",[a("el-checkbox-group",{staticClass:"margin_bottom-large",model:{value:e.checkedPrivilege,callback:function(t){e.checkedPrivilege=t},expression:"checkedPrivilege"}},e._l(e.privilegeData,function(e){return a("el-checkbox",{key:e,staticStyle:{"min-width":"300px"},attrs:{label:e.label,value:e.id}})}),1)],1):e._e(),e._v(" "),"new"==e.action?a("div",[a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入角色名称：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入备注：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.roleRemark,callback:function(t){e.roleRemark=t},expression:"roleRemark"}})],1)]):e._e(),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确定")])],1)])],1)},[],!1,null,"bf605fa6",null));P.options.__file="PrivilegeEditRole.vue";var A=P.exports,L="/privilege/privilegeEdit",W={name:"PrivilegeEditPrivilege",props:{action:String,privilegeId:Number,privilegeName:String,privilegeMark:String,privilegeRemark:String},watch:{privilegeId:function(e,t){this.privilegeId=e}},data:function(){return{}},methods:{submit:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("new"!=e.action){t.next=14;break}return t.prev=1,t.next=4,u.a.post(L,{privilege_id:e.privilegeId,name:e.privilegeName,mark:e.privilegeMark,remark:e.privilegeRemark});case 4:a=t.sent,i=a.data,e.$message({message:i.msg,type:"success"}),e.$emit("close"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 14:case"end":return t.stop()}},t,e,[[1,10]])}))()}},mounted:function(){}},R=(a("h4RD"),Object(p.a)(W,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row",attrs:{gutter:20}},[a("div",{staticClass:"margin_left-large"},["new"==e.action?a("div",[a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入权限名称：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.privilegeName,callback:function(t){e.privilegeName=t},expression:"privilegeName"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入权限标识：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.privilegeMark,callback:function(t){e.privilegeMark=t},expression:"privilegeMark"}})],1),e._v(" "),a("div",{staticClass:"div-flex margin_bottom-medium"},[a("div",{staticClass:"td__p--label td--label"},[e._v("请输入备注：")]),e._v(" "),a("el-input",{staticClass:"width--medium margin_right-small",attrs:{size:"small",placeholder:"请输入"},model:{value:e.privilegeRemark,callback:function(t){e.privilegeRemark=t},expression:"privilegeRemark"}})],1)]):e._e(),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确定")])],1)])],1)},[],!1,null,"087018ae",null));R.options.__file="PrivilegeEditPrivilege.vue";var B="/privilege/userGet",G="/privilege/userDisable",j="/privilege/userEnable",q="/privilege/userDelete",U="/privilege/roleGet",V="/privilege/rolePrivilegeGet",K="/privilege/roleDisable",H="/privilege/roleEnable",Y="/privilege/privilegeGet",X="/privilege/privilegeDisable",J="/privilege/privilegeEnable",Z="/privilege/privilegeDelete",Q={name:"ConsolePrivilege",components:{PrivilegeEditUser:I,PrivilegeEditRole:A,PrivilegeEditPrivilege:R.exports},props:{user_id:Number,login_name:String},data:function(){return{activeSystem:"用户设置",userData:[],roleData:[],privilegeData:[],edit:{title:"编辑",visible:!1,type:""}}},methods:{handleChange:function(){"用户设置"==this.activeSystem?(this.userData=[],this.userGet()):"角色对应权限设置"==this.activeSystem?(this.roleData=[],this.roleGet()):"权限设置"==this.activeSystem&&(this.privilegeData=[],this.privilegeGet())},close:function(){this.edit.visible=!1,"user"==this.edit.type&&this.userGet(),"role"==this.edit.type&&this.roleGet(),"privilege"==this.edit.type&&this.privilegeGet()},userAdd:function(){this.edit.title="新增用户",this.edit.visible=!0,this.edit.type="user",this.edit.userEditAction="new"},userSetting:function(e){this.edit.login_name=e,this.edit.title="修改用户密码和角色",this.edit.visible=!0,this.edit.type="user",this.edit.userEditAction="edit"},userGet:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(B,{user_id:e.user_id});case 3:for(a=t.sent,i=a.data,s=0;s<i.data.length;s++)1==i.data[s].is_valid?i.data[s].is_disabled="否":0==i.data[s].is_valid&&(i.data[s].is_disabled="是");e.userData=i.data,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},userDisable:function(e){var t=this;return c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(G,{user_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.userGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])}))()},userEnable:function(e){var t=this;return c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(j,{user_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.userGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])}))()},userDelete:function(e){var t=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("确认删除吗?","提示",{}).then(c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(q,{user_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.userGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])})));case 1:case"end":return a.stop()}},a,t)}))()},roleAdd:function(){this.edit.roleEditRoleId=0,this.edit.roleEditName="",this.edit.roleEditRemark="",this.edit.roleEditAction="new",this.edit.title="新增角色",this.edit.visible=!0,this.edit.type="role"},roleEdit:function(e,t,a){this.edit.roleEditAction="new",this.edit.roleEditRoleId=e,this.edit.roleEditName=t,this.edit.roleEditRemark=a,this.edit.title="修改角色",this.edit.visible=!0,this.edit.type="role"},roleGet:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get(U);case 3:for(a=t.sent,i=a.data,s=0;s<i.data.length;s++)1==i.data[s].is_valid?i.data[s].is_disabled="否":0==i.data[s].is_valid&&(i.data[s].is_disabled="是");e.roleData=i.data,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},roleSetting:function(e){var t=this;return c()(o.a.mark(function a(){var i,s,r,n,l,c;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(V,{role_id:e});case 3:for(i=a.sent,s=i.data,t.edit.checkedPrivilege=[],r=0;r<s.data.length;r++)t.edit.checkedPrivilege.push(s.data[r].privilege_name);return a.next=9,u.a.get(Y);case 9:for(n=a.sent,l=n.data,t.edit.privilegeData=[],c=0;c<l.data.length;c++)t.edit.privilegeData.push({id:l.data[c].id,label:l.data[c].name});t.edit.roleEditRoleId=e,t.edit.roleEditAction="edit",t.edit.title="修改角色对应权限",t.edit.type="role",t.edit.visible=!0,a.next=24;break;case 20:a.prev=20,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 24:case"end":return a.stop()}},a,t,[[0,20]])}))()},roleDisable:function(e){var t=this;return c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(K,{role_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.roleGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])}))()},roleEnable:function(e){var t=this;return c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(H,{role_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.roleGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])}))()},roleDelete:function(e){var t=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("确认删除吗?","提示",{}).then(c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(q,{role_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.roleGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])})));case 1:case"end":return a.stop()}},a,t)}))()},privilegeAdd:function(){this.edit.privilegeEditAction="new",this.edit.privilegeEditPrivilegeId=0,this.edit.privilegeEditPrivilegeName="",this.edit.privilegeEditPrivilegeMark="",this.edit.privilegeEditPrivilegeRemark="",this.edit.title="新增权限",this.edit.visible=!0,this.edit.type="privilege"},privilegeEditFront:function(e,t,a,i){this.edit.privilegeEditAction="new",this.edit.privilegeEditPrivilegeId=e,this.edit.privilegeEditPrivilegeName=t,this.edit.privilegeEditPrivilegeMark=a,this.edit.privilegeEditPrivilegeRemark=i,this.edit.title="修改权限",this.edit.visible=!0,this.edit.type="privilege"},privilegeGet:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get(Y);case 3:for(a=t.sent,i=a.data,e.privilegeData=[],s=0;s<i.data.length;s++)e.privilegeData.push({id:i.data[s].id,label:i.data[s].name,name:i.data[s].name,mark:i.data[s].mark,remark:i.data[s].remark,is_valid:i.data[s].is_valid,update_time:i.data[s].update_time,is_disabled:1==i.data[s].is_valid?"否":"是"});t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},privilegeDisable:function(e){var t=this;return c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(X,{privilege_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.privilegeGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])}))()},privilegeEnable:function(e){var t=this;return c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(J,{privilege_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.privilegeGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])}))()},privilegeDelete:function(e){var t=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("确认删除吗?","提示",{}).then(c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(Z,{privilege_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.privilegeGet(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])})));case 1:case"end":return a.stop()}},a,t)}))()}},mounted:function(){this.userGet()}},ee=(a("PrQV"),Object(p.a)(Q,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row margin_bottom-medium",attrs:{gutter:20}},[a("el-col",{staticClass:"lift-side-bar",attrs:{span:5}},[a("el-card",{staticClass:"left-side-box-card"},[a("el-collapse",{attrs:{accordion:""},on:{change:e.handleChange},model:{value:e.activeSystem,callback:function(t){e.activeSystem=t},expression:"activeSystem"}},[a("el-collapse-item",{attrs:{title:"用户设置",name:"用户设置"}},[a("div",{staticClass:"collapse-div"},[e._v("包括用户密码、角色的修改")])]),e._v(" "),a("el-collapse-item",{attrs:{title:"角色对应权限设置",name:"角色对应权限设置"}},[a("div",{staticClass:"collapse-div"},[e._v("包括角色的新增、角色对应权限的设置")])]),e._v(" "),a("el-collapse-item",{attrs:{title:"权限设置",name:"权限设置"}},[a("div",{staticClass:"collapse-div"},[e._v("包括权限的新增、修改和删除")])])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"right-side-bar",attrs:{span:19}},[a("el-card",{staticClass:"left-side-box-card"},["用户设置"==e.activeSystem?a("div",[a("el-button",{staticClass:"margin_bottom-small",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.userAdd()}}},[e._v("新增用户")]),e._v(" "),a("el-table",{key:Math.random(),ref:"userTable",staticStyle:{width:"100%"},attrs:{size:"mini",height:"400",data:e.userData,stripe:""}},[a("el-table-column",{key:Math.random(),attrs:{prop:"name",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"login_name",label:"登录名",width:"180"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"role_name",label:"角色",width:"120"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"is_disabled",label:"是否禁用",width:"80"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"update_time",label:"修改时间"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.is_valid,expression:"scope.row.is_valid==1"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.userDisable(t.row.id)}}},[e._v("禁用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.userEnable(t.row.id)}}},[e._v("启用")]),e._v(" "),1==t.row.is_edit?a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.userSetting(t.row.login_name)}}},[e._v("修改")]):e._e(),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.userDelete(t.row.id)}}},[e._v("删除")])]}}],null,!1,2842079811)})],1)],1):e._e(),e._v(" "),"角色对应权限设置"==e.activeSystem?a("div",[a("el-button",{staticClass:"margin_bottom-small",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.roleAdd()}}},[e._v("新增角色")]),e._v(" "),a("el-table",{key:Math.random(),ref:"roleTable",staticStyle:{width:"100%"},attrs:{size:"mini",height:"400",data:e.roleData,stripe:""}},[a("el-table-column",{key:Math.random(),attrs:{prop:"name",label:"名称",width:"180"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"remark",label:"备注",width:"180"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"is_disabled",label:"是否禁用",width:"80"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"update_time",label:"修改时间",width:"180"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.is_valid,expression:"scope.row.is_valid==1"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.roleDisable(t.row.id)}}},[e._v("禁用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.roleEnable(t.row.id)}}},[e._v("启用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.roleEdit(t.row.id,t.row.name,t.row.remark)}}},[e._v("修改")]),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.roleSetting(t.row.id)}}},[e._v("配置对应权限")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.roleDelete(t.row.id)}}},[e._v("删除")])]}}],null,!1,2747313691)})],1)],1):e._e(),e._v(" "),"权限设置"==e.activeSystem?a("div",[a("el-button",{staticClass:"margin_bottom-small",attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.privilegeAdd()}}},[e._v("新增权限")]),e._v(" "),a("el-table",{key:Math.random(),ref:"privilegeTable",staticStyle:{width:"100%"},attrs:{size:"mini",height:"400",data:e.privilegeData,stripe:""}},[a("el-table-column",{key:Math.random(),attrs:{prop:"name",sortable:"",label:"名称",width:"220"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"mark",sortable:"",label:"标识",width:"200"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"remark",label:"备注",width:"170"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"is_disabled",label:"是否禁用",width:"70"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{prop:"update_time",sortable:"",label:"修改时间"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.is_valid,expression:"scope.row.is_valid==1"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.privilegeDisable(t.row.id)}}},[e._v("禁用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.privilegeEnable(t.row.id)}}},[e._v("启用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.privilegeEditFront(t.row.id,t.row.name,t.row.mark,t.row.remark)}}},[e._v("修改")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.is_valid,expression:"scope.row.is_valid==0"}],staticClass:"noMargin",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.privilegeDelete(t.row.id)}}},[e._v("删除")])]}}],null,!1,1447037356)})],1)],1):e._e()])],1),e._v(" "),a("el-drawer",{attrs:{title:e.edit.title,visible:e.edit.visible,size:"60%",direction:"btt"},on:{"update:visible":function(t){return e.$set(e.edit,"visible",t)},closed:e.editFormClosed}},["user"==e.edit.type&e.edit.visible?a("div",[a("PrivilegeEditUser",{attrs:{user_id:e.user_id,login_name:e.edit.login_name,action:e.edit.userEditAction},on:{close:function(t){return e.close()}}})],1):e._e(),e._v(" "),"role"==e.edit.type&e.edit.visible?a("div",[a("PrivilegeEditRole",{attrs:{action:e.edit.roleEditAction,checkedPrivilege:e.edit.checkedPrivilege,privilegeData:e.edit.privilegeData,roleId:e.edit.roleEditRoleId,roleName:e.edit.roleEditName,roleRemark:e.edit.roleEditRemark},on:{close:function(t){return e.close()}}})],1):e._e(),e._v(" "),"privilege"==e.edit.type&e.edit.visible?a("div",[a("PrivilegeEditPrivilege",{attrs:{action:e.edit.privilegeEditAction,privilegeId:e.edit.privilegeEditPrivilegeId,privilegeName:e.edit.privilegeEditPrivilegeName,privilegeMark:e.edit.privilegeEditPrivilegeMark,privilegeRemark:e.edit.privilegeEditPrivilegeRemark},on:{close:function(t){return e.close()}}})],1):e._e()])],1)],1)},[],!1,null,"84477148",null));ee.options.__file="Privilege.vue";var te=ee.exports,ae=function(e){return JSON.parse(w()(e))},ie=function(e){var t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return a>=1&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i),t+"-"+a+"-"+i},se="/script/subSystem",re="/script/subSystemAdd",ne="/script/subSystemDelete",oe={name:"ScriptColumn",props:{user_id:Number,formData:{default:[]}},data:function(){return{activeSystem:"",subSystem:[],subSystemName:""}},watch:{activeSystem:function(e,t){if(""!=e){for(var a=0;a<this.subSystem.length&&e!=this.subSystem[a].title;a++);this.$emit("subSystemClicked",this.subSystem[a].id)}}},methods:{newTab:function(){this.$emit("newTab")},scriptLabelClicked:function(e){this.$emit("scriptNameClicked",e)},subSystemGet:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get(se,{user_id:e.user_id});case 3:for(a=t.sent,i=a.data,e.subSystem=[],s=0;s<i.data.length;s++)e.subSystem.push({id:i.data[s].id,title:i.data[s].name});t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},subSystemAdd:function(){var e=this;return c()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(re,{sub_system_name:e.subSystemName,user_id:e.user_id});case 3:a=t.sent,a.data,e.subSystem=[],e.subSystemGet(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},subSystemDelete:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$confirm("确认删除吗?","提示",{}).then(c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=0;case 2:if(!(a<e.subSystem.length)){t.next=8;break}if(e.activeSystem!=e.subSystem[a].title){t.next=5;break}return t.abrupt("break",8);case 5:a++,t.next=2;break;case 8:return t.next=10,u.a.post(ne,{sub_system_id:e.subSystem[a].id,user_id:e.user_id});case 10:i=t.sent,i.data,e.$message({message:"成功！",type:"success"}),e.subSystemGet(),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 20:case"end":return t.stop()}},t,e,[[0,16]])})));case 1:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.subSystemGet()}},le=(a("Y7Xj"),Object(p.a)(oe,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"left-side-box-card"},[a("el-collapse",{attrs:{accordion:""},model:{value:e.activeSystem,callback:function(t){e.activeSystem=t},expression:"activeSystem"}},e._l(e.subSystem,function(t){return a("el-collapse-item",{key:t.key,attrs:{title:t.title,name:t.title}},[a("a",{staticStyle:{color:"#606266","font-size":"12px","font-family":"Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif"}},[e._v("包括：")]),e._v(" "),e._l(e.formData,function(t,i){return a("a",{key:t.key},[a("a",{staticStyle:{cursor:"pointer",color:"#409EFF","font-size":"12px","font-family":"Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.scriptLabelClicked(t.title)}}},[e._v(e._s(t.title))]),e._v(" "),i!=e.formData.length-1?a("a",{staticStyle:{color:"#606266","font-size":"12px","font-family":"Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif"}},[e._v("、")]):e._e()])}),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:0==e.formData.length,expression:"formData.length==0"}],staticClass:"collapse-div",staticStyle:{color:"#606266","font-size":"12px","font-family":"Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif"}},[e._v("本栏目暂无脚本")]),e._v(" "),a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.formData.length,expression:"formData.length==0"}],attrs:{type:"text",size:"small"},on:{click:e.newTab}},[e._v("需要新增？")]),e._v(" "),a("el-button",{staticClass:"noMargin",staticStyle:{color:"#f56c6c"},attrs:{type:"text",size:"small"},on:{click:function(t){return e.subSystemDelete()}}},[e._v("删除栏目")])],1)],2)}),1),e._v(" "),a("el-popover",{attrs:{placement:"right",trigger:"hover"}},[a("el-input",{staticStyle:{width:"170px"},attrs:{size:"mini",placeholder:"请输入栏目名称"},model:{value:e.subSystemName,callback:function(t){e.subSystemName=t},expression:"subSystemName"}}),e._v(" "),a("el-button",{staticClass:"margin_top-mini",attrs:{size:"mini"},on:{click:e.subSystemAdd}},[e._v("确定")]),e._v(" "),a("el-button",{staticClass:"margin_top-medium",attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("新增栏目")])],1)],1)},[],!1,null,"f4a1e664",null));le.options.__file="ScriptColumn.vue";var ce,de=le.exports,ue=a("YEIV"),me=a.n(ue),pe=a("H7qB"),ve="/script/replay",_e="/script/delete",fe="/script/getLogs",ge="/script/getNewestLog",he="/script/schedule",be="/script/scheduleEdit",we="/script/scheduleDelete",ke=(ce={name:"ConsoleScriptButtons",components:{},props:{user_id:Number,singleForm:Array},watch:{},data:function(){return{schedule:{label:"新建定时任务",popoverVisible:!1,dialogVisible:!1,loading:!1,schedules:[],scheduleData:{schedule_id:0,triggerDate:"",triggerTime:"",is_automatic:!1,interval:{value:1,unit:{select:2,options:[{value:1,label:"小时"},{value:2,label:"天"}]}}}},output:{canBeTerminate:!1,loading:!1,log_id:0,logs:[],visible:!1,text:"",important_fields:[],isAlert:!1}}}},me()(ce,"watch",{}),me()(ce,"methods",{singleDataReplay:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(ve,{script_id:e.singleForm.id,user_id:e.user_id});case 3:for(a=t.sent,200!=(i=a.data).code?e.$message({message:i.msg,type:"error"}):e.singleForm.version!=i.data.version?e.$message({message:"检测到脚本配置发生过修改(V"+i.data.version+"→V"+e.singleForm.version+")，可能无法完美恢复上一次参数",type:"info"}):e.$message({message:"参数填充成功",type:"success"}),s=0;s<e.singleForm.formDataDetail.length;s++)try{e.singleForm.formDataDetail[s].value=i.data.detail[e.singleForm.formDataDetail[s].label]}catch(t){console.log("["+e.singleForm.formDataDetail[s].label+"]恢复失败："+t)}e.$emit("replay",e.singleForm),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 14:case"end":return t.stop()}},t,e,[[0,10]])}))()},singleDataLog:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(ge,{script_id:e.singleForm.id,user_id:e.user_id});case 3:a=t.sent,i=a.data,e.$emit("output",i.data[0].output),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 12:case"end":return t.stop()}},t,e,[[0,8]])}))()},singleDataShowLogs:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.output.loading=!0,e.output.logs=[],t.prev=2,t.next=5,u.a.post(fe,{script_id:e.singleForm.id,user_id:e.user_id});case 5:for(a=t.sent,i=a.data,e.output.logs=i.data.logs,e.output.important_fields=i.data.important_fields,s=0;s<e.output.logs.length;s++)for(r=0;r<e.output.important_fields.length;r++)e.output.logs[s][e.output.important_fields[r]]=e.output.logs[s].detail[e.output.important_fields[r]];t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 16:e.output.loading=!1;case 17:case"end":return t.stop()}},t,e,[[2,12]])}))()},log_output:function(e){this.$emit("output",e)},log_replay:function(e,t){for(var a=0;a<this.singleForm.formDataDetail.length;a++)try{this.singleForm.formDataDetail[a].value=t[this.singleForm.formDataDetail[a].label]}catch(e){console.log("["+this.singleForm.formDataDetail[a].label+"]恢复失败："+e)}this.singleForm.version!=e?this.$message({message:"参数填充成功，但是检测到脚本配置发生过修改(V"+e+"→V"+this.singleForm.version+")，可能无法完美恢复上一次参数，请关闭列表弹出框后查看",type:"info",duration:4e3}):(this.$message({message:"参数填充成功，请关闭列表弹出框后点击提交按钮以运行",type:"success"}),this.$emit("replay",this.singleForm))},scheduleShow:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.schedule.loading=!0,e.schedule.schedules=[],t.prev=2,t.next=5,u.a.post(he,{script_id:e.singleForm.id,user_id:e.user_id});case 5:a=t.sent,i=a.data,e.schedule.loading=!1,e.schedule.schedules=i.data,e.schedule.popoverVisible=!0,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 16:case"end":return t.stop()}},t,e,[[2,12]])}))()},scheduleAdd:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="cd "+e.singleForm.start_folder+" && "+e.singleForm.start_script,i=e.command_get(a,e.singleForm.type),s=i.command,r=i.detail,t.prev=4,t.next=7,u.a.post(be,{user_id:e.user_id,script_id:e.singleForm.id,command:s,detail:r,version:e.singleForm.version,trigger_time:e.schedule.scheduleData.triggerDate+" "+e.schedule.scheduleData.triggerTime,is_automatic:1==e.schedule.scheduleData.is_automatic?1:0,interval_raw:Number(e.schedule.scheduleData.interval.value),interval_unit:e.schedule.scheduleData.interval.unit.select,schedule_id:e.schedule.scheduleData.schedule_id});case 7:n=t.sent,n.data,e.$message({message:"成功！",type:"success"}),e.schedule.dialogVisible=!1,e.schedule.scheduleData.triggerDate="",e.schedule.scheduleData.triggerTime="",e.schedule.scheduleData.is_automatic=!1,e.schedule.scheduleData.schedule_id=0,e.schedule.scheduleData.interval.value="",e.schedule.scheduleData.interval.unit.select=2,t.next=23;break;case 19:t.prev=19,t.t0=t.catch(4),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 23:case"end":return t.stop()}},t,e,[[4,19]])}))()},scheduleEdit:function(e){console.log(e),this.schedule.label="编辑定时任务",this.schedule.scheduleData.schedule_id=e.schedule_id,this.schedule.scheduleData.is_automatic=!!e.is_automatic,this.schedule.scheduleData.triggerDate=e.trigger_time.split(" ")[0],this.schedule.scheduleData.triggerTime=e.trigger_time.split(" ")[1].substr(0,5),this.schedule.scheduleData.interval.unit.select=e.is_automatic?e.interval_unit:2,this.schedule.scheduleData.interval.value=e.is_automatic?e.interval_raw:1,this.schedule.dialogVisible=!0},scheduleDelete:function(e){var t=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("确认停止并删除定时任务吗?","提示",{}).then(c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(we,{user_id:t.user_id,schedule_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 12:case"end":return a.stop()}},a,t,[[0,8]])})));case 1:case"end":return a.stop()}},a,t)}))()},singleDataSetting:function(){this.$emit("edit")},singleDataDelete:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$confirm("确认删除吗?","提示",{}).then(c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(_e,{script_id:e.singleForm.id,user_id:e.user_id});case 3:a=t.sent,i=a.data,e.$message({message:i.msg,type:"success"}),e.$emit("deleted"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))).catch(function(){});case 1:case"end":return t.stop()}},t,e)}))()},command_get:function(e,t){var a="",i={};if("1"==t){for(var s=0;s<this.singleForm.formDataDetail.length;s++)if(i[this.singleForm.formDataDetail[s].label]=this.singleForm.formDataDetail[s].value,"dateRange"!=this.singleForm.formDataDetail[s].type)a=a+" "+this.singleForm.formDataDetail[s].value;else{if(null==this.singleForm.formDataDetail[s].value)continue;for(var r=0;r<this.singleForm.formDataDetail[s].value.length;r++)a=a+" "+this.singleForm.formDataDetail[s].value[r]}a=e+a}else if("2"==t){var n=e;for(s=0;s<this.singleForm.formDataDetail.length;s++)if(i[this.singleForm.formDataDetail[s].label]=this.singleForm.formDataDetail[s].value,"dateRange"!=this.singleForm.formDataDetail[s].type){c=new RegExp("%"+this.singleForm.formDataDetail[s].label+"%","g");n=n.replace(c,this.singleForm.formDataDetail[s].value)}else{if(null==this.singleForm.formDataDetail[s].value)continue;for(var o="",l=0;l<this.singleForm.formDataDetail[s].value.length;l++)o=o+" "+this.singleForm.formDataDetail[s].value[l];var c=new RegExp("%"+this.singleForm.formDataDetail[s].label+"%","g");n=n.replace(c,o)}a=n}return{command:a,detail:i}}}),me()(ce,"mounted",function(){}),ce),ye=(a("2cz+"),Object(p.a)(ke,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"single-data-setting"},[a("el-tooltip",{attrs:{effect:"dark",content:"回放最近一次由我运行的参数",placement:"top"}},[a("el-button",{staticClass:"noMargin",attrs:{type:"primary",plain:"",icon:"el-icon-refresh-left",circle:""},on:{click:function(t){return e.singleDataReplay()}}})],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"查看最近一次由我运行的日志",placement:"top"}},[a("el-button",{staticClass:"noMargin",attrs:{type:"primary",plain:"",icon:"el-icon-tickets",circle:""},on:{click:function(t){return e.singleDataLog()}}})],1),e._v(" "),a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"查看最近50次运行记录",placement:"top"}},[a("el-popover",{attrs:{placement:"left",width:"1010",trigger:"click"}},[a("div",{ref:"scrollbarDiv",staticClass:"scrollbar-div max-height-medium"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.output.loading,expression:"output.loading"}],attrs:{size:"small",data:e.output.logs,stripe:""}},[a("el-table-column",{attrs:{width:"110",property:"user",label:"运行人"}}),e._v(" "),e._l(e.output.important_fields,function(e){return a("el-table-column",{key:e,attrs:{"min-width":"110",property:e,label:e}})}),e._v(" "),a("el-table-column",{attrs:{"min-width":"235",property:"options",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",width:"350",trigger:"hover"}},[e._l(t.row.detail,function(t,i){return a("tr",{key:t},[a("td",{staticClass:"td--label"},[a("b",[e._v(e._s(i+":"))])]),e._v(" "),a("td",[e._v(e._s(t))])])}),e._v(" "),a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"primary",icon:"el-icon-set-up"},slot:"reference"},[e._v("参数")])],2),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-tickets"},on:{click:function(a){return e.log_output(t.row.output)}}},[e._v("日志")]),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-refresh-left"},on:{click:function(a){return e.log_replay(t.row.version,t.row.detail)}}},[e._v("回放")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150",property:"update_time",label:"运行开始时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",property:"duration",label:"耗时"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",property:"log_id",label:"运行ID"}})],2)],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",icon:"el-icon-files",circle:"",loading:e.output.loading},on:{click:function(t){return e.singleDataShowLogs()}},slot:"reference"})],1)],1),e._v(" "),a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"定时运行",placement:"top"}},[a("el-popover",{attrs:{placement:"left",width:"900",trigger:"click","v-model":e.schedule.popoverVisible}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.schedule.loading,expression:"schedule.loading"}],attrs:{data:e.schedule.schedules,stripe:""}},[a("el-table-column",{attrs:{width:"100",property:"schedule_id",label:"定时任务ID"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",property:"user_name",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{width:"50",property:"is_automatic_text",label:"重复"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",property:"trigger_time",label:"下次运行时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",property:"update_time",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"250",property:"options",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",width:"350",trigger:"hover"}},[e._l(t.row.detail,function(t,i){return a("tr",{key:t},[a("td",{staticClass:"td--label"},[a("b",[e._v(e._s(i+":"))])]),e._v(" "),a("td",[e._v(e._s(t))])])}),e._v(" "),a("el-button",{attrs:{slot:"reference",plain:"",size:"mini",type:"primary",icon:"el-icon-set-up"},slot:"reference"},[e._v("参数")])],2),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.scheduleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.scheduleDelete(t.row.schedule_id)}}},[e._v("停止")])]}}])})],1),e._v(" "),a("div",{staticClass:"add",staticStyle:{width:"99.87%"},on:{click:function(t){e.schedule.dialogVisible=!0}}},[a("span",[e._v("\n            + 使用\n            "),a("b",[e._v("当前表单填写的参数")]),e._v(" 创建定时任务\n          ")])]),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",icon:"el-icon-alarm-clock",circle:""},on:{click:function(t){return e.scheduleShow()}},slot:"reference"})],1)],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"编辑脚本",placement:"top"}},[a("el-popover",{attrs:{placement:"bottom-end",width:"250",trigger:"hover"}},[a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[e._v(e._s("最后修改人:"))])]),e._v(" "),a("td",[e._v(e._s(e.singleForm.user))])]),e._v(" "),a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[e._v(e._s("版本:"))])]),e._v(" "),a("td",[e._v(e._s("V"+e.singleForm.version))])]),e._v(" "),a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[e._v(e._s("运行次数:"))])]),e._v(" "),a("td",[e._v(e._s(e.singleForm.runs+"次"))])]),e._v(" "),a("tr",[a("td",{staticClass:"td--label--medium"},[a("b",[e._v(e._s("更新时间:"))])]),e._v(" "),a("td",[e._v(e._s(e.singleForm.update_time))])]),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",plain:"",icon:"el-icon-setting",circle:""},on:{click:function(t){return e.singleDataSetting()}},slot:"reference"})],1)],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"删除脚本",placement:"top"}},[a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.singleDataDelete()}}})],1)],1),e._v(" "),a("el-drawer",{attrs:{title:e.schedule.label,visible:e.schedule.dialogVisible,"close-on-click-modal":!1,size:"40%"},on:{"update:visible":function(t){return e.$set(e.schedule,"dialogVisible",t)},closed:e.schedulenDialogClosed}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("定时运行时间：")])]),e._v(" "),a("td",[a("el-date-picker",{staticClass:"main_select--medium",attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.schedule.scheduleData.triggerDate,callback:function(t){e.$set(e.schedule.scheduleData,"triggerDate",t)},expression:"schedule.scheduleData.triggerDate"}})],1),e._v(" "),a("td",[a("el-time-select",{staticClass:"main_select--medium",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"},placeholder:"选择时间",size:"small"},model:{value:e.schedule.scheduleData.triggerTime,callback:function(t){e.$set(e.schedule.scheduleData,"triggerTime",t)},expression:"schedule.scheduleData.triggerTime"}})],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("重复：")])]),e._v(" "),a("td",[a("el-switch",{attrs:{false:"","active-color":"#409EFF","inactive-color":"#80868C"},model:{value:e.schedule.scheduleData.is_automatic,callback:function(t){e.$set(e.schedule.scheduleData,"is_automatic",t)},expression:"schedule.scheduleData.is_automatic"}})],1),e._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==e.schedule.scheduleData.is_automatic,expression:"schedule.scheduleData.is_automatic==true"}]},[a("p",{staticClass:"inline_margin--medium"},[e._v("每")])]),e._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==e.schedule.scheduleData.is_automatic,expression:"schedule.scheduleData.is_automatic==true"}]},[a("el-input",{staticClass:"main_input--tiny inline_margin--small",attrs:{placeholder:"请输入",size:"small"},model:{value:e.schedule.scheduleData.interval.value,callback:function(t){e.$set(e.schedule.scheduleData.interval,"value",t)},expression:"schedule.scheduleData.interval.value"}})],1),e._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:1==e.schedule.scheduleData.is_automatic,expression:"schedule.scheduleData.is_automatic==true"}]},[a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:e.schedule.scheduleData.interval.unit.select,callback:function(t){e.$set(e.schedule.scheduleData.interval.unit,"select",t)},expression:"schedule.scheduleData.interval.unit.select"}},e._l(e.schedule.scheduleData.interval.unit.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.schedule.dialogVisible=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.scheduleAdd()}}},[e._v("提交")])],1)])])],1)},[],!1,null,"f54bc2de",null));ye.options.__file="ScriptButtons.vue";var xe=ye.exports,De="/script/edit",Ce="/script/scriptAll",Se={name:"ScriptEdit",props:{user_id:Number,edit:Array},data:function(){return{singleDataOptionDialog:{visible:!1,index:0,data:[]},cloneSettings:{visible:!1,script:{value:"",data:[]}}}},watch:{},methods:{swapItem:function(e,t,a){return e[t]=e.splice(a,1,e[t])[0],e},editFormAddSingleData:function(){this.edit.formData.push({type:"",label:"",value:"",placeHolder:"",options:"",createable:"",disabled:"",is_important:"",remark:""})},editFormDeleted:function(e){this.edit.formData.splice(e,1)},editFormMoveUp:function(e){e>0?this.swapItem(this.edit.formData,e,e-1):this.$message({message:"已经是第一位，不能再上移了哦",type:"info"})},editFormMoveDown:function(e){e<this.edit.formData.length-1?this.swapItem(this.edit.formData,e,e+1):this.$message({message:"已经是最后一位，不能再下移了哦",type:"info"})},singleDataOptionDialogClicked:function(e,t){this.singleDataOptionDialog.index=e,this.singleDataOptionDialog.visible=!0,this.singleDataOptionDialog.data=0==t.length?[]:ae(t)},singleDataOptionDialogClosed:function(){this.singleDataOptionDialog.data=[]},singleDataOptionDialogDeleted:function(e){this.singleDataOptionDialog.data.splice(e,1)},singleDataOptionDialogAddSingleData:function(){this.singleDataOptionDialog.data.push({label:"",value:""})},singleDataOptionDialogSubmited:function(){this.edit.formData[this.singleDataOptionDialog.index].options=this.singleDataOptionDialog.data,this.singleDataOptionDialog.visible=!1},editFormCloneButtonActive:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(Ce);case 3:a=t.sent,200!==(i=a.data).code?e.$message({message:i.msg,type:"error"}):(e.cloneSettings.script.data=i.data,e.cloneSettings.visible=!0),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 12:case"end":return t.stop()}},t,e,[[0,8]])}))()},editFormClone:function(e,t){this.edit.formData=t.detail,this.$message({message:"成功",type:"success"})},editFormSubmited:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.edit.buttonLoading=!0,t.prev=1,t.next=4,u.a.post(De,{sub_system_id:e.edit.sub_system_id,script_id:e.edit.id,name:e.edit.title,start_folder:e.edit.start_folder,start_script:e.edit.start_script,type:Number(e.edit.type),detail:e.edit.formData,user_id:e.user_id});case 4:a=t.sent,i=a.data,e.$message({message:i.msg,type:"success"}),e.edit.visible=!1,e.$emit("done"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 15:e.edit.buttonLoading=!1;case 16:case"end":return t.stop()}},t,e,[[1,11]])}))()}}},Ee=(a("bv7I"),Object(p.a)(Se,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"edit-form-card margin_left-medium margin_right-medium"},[a("div",{ref:"scrollbarDiv",staticClass:"scrollbar-div max-height-large padding-right-19"},[a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"margin_bottom-medium"},[a("el-card",[a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("脚本名称：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.edit.title,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入名称"},model:{value:e.edit.title,callback:function(t){e.$set(e.edit,"title",t)},expression:"edit.title"}})],1)],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("起始文件夹：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.edit.start_folder,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入起始文件夹"},model:{value:e.edit.start_folder,callback:function(t){e.$set(e.edit,"start_folder",t)},expression:"edit.start_folder"}})],1)],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("起始脚本：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:e.edit.start_script,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入起始脚本"},model:{value:e.edit.start_script,callback:function(t){e.$set(e.edit,"start_script",t)},expression:"edit.start_script"}})],1)],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("组合方式：")])]),e._v(" "),a("td",[a("div",[a("td",{staticClass:"dialog-type-order"},[a("el-radio",{attrs:{label:"1"},model:{value:e.edit.type,callback:function(t){e.$set(e.edit,"type",t)},expression:"edit.type"}},[e._v("顺序")])],1),e._v(" "),a("td",{staticClass:"dialog-type-tooltip"},[a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"顺序组合组件值来生成脚本",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),e._v(" "),a("td",{staticClass:"dialog-type-replace"},[a("el-radio",{attrs:{label:"2"},model:{value:e.edit.type,callback:function(t){e.$set(e.edit,"type",t)},expression:"edit.type"}},[e._v("替换")])],1),e._v(" "),a("td",{staticClass:"dialog-type-tooltip"},[a("el-tooltip",{staticClass:"question-mark",attrs:{effect:"dark",content:"使用组件值替换起始脚本中格式为'%组件名称%'的字段来生成脚本",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)])])])])],1),e._v(" "),e._l(e.edit.formData,function(t){return a("div",{key:t.key},[a("div",{staticClass:"margin_bottom-medium"},[a("el-card",{staticClass:"edit-form-card"},[a("el-col",{attrs:{span:21}},[a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("组件名称：")])]),e._v(" "),a("td",[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入组件名称"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"singleData.label"}})],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("组件类型：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"请选择组件类型",filterable:"","default-first-option":""},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"singleData.type"}},e._l(e.edit.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),"select"==t.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("选项：")])]),e._v(" "),a("td",[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){e.singleDataOptionDialogClicked(e.edit.formData.indexOf(t),t.options)}}},[e._v("编辑选项")])],1)]):e._e(),e._v(" "),"select"==t.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否可创建选项：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:t.createable,callback:function(a){e.$set(t,"createable",a)},expression:"singleData.createable"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]):e._e(),e._v(" "),"date"!=t.type&&"dateRange"!=t.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("默认值：")])]),e._v(" "),"select"!=t.type?a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.value,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"如无默认值可以留空"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}})],1)],1):e._e(),e._v(" "),"select"==t.type?a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.value,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入选项中的'值'作为默认值，如无默认值可留空"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}})],1)],1):e._e(),e._v(" "),"select"==t.type?a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"注意：如选择器有默认值，需要填写的是选项中的'值'，而非'标签'",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1):e._e()]):e._e(),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否只读：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:t.disabled,callback:function(a){e.$set(t,"disabled",a)},expression:"singleData.disabled"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),"dateRange"!=t.type?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("占位文字：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.placeHolder,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"如无占位文字可以留空"},model:{value:t.placeHolder,callback:function(a){e.$set(t,"placeHolder",a)},expression:"singleData.placeHolder"}})],1)],1)]):e._e(),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("备注：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.remark,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"如无备注可以留空"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"singleData.remark"}})],1)],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否有额外按钮：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:t.extra_button,callback:function(a){e.$set(t,"extra_button",a)},expression:"singleData.extra_button"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"额外按钮配置为'是'时，组件右侧会出现一个按钮，点击按钮可以运行'额外按钮运行脚本'的脚本",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]),e._v(" "),1==t.extra_button?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("额外按钮名称：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.extra_button_label,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入额外按钮名称"},model:{value:t.extra_button_label,callback:function(a){e.$set(t,"extra_button_label",a)},expression:"singleData.extra_button_label"}})],1)],1)]):e._e(),e._v(" "),1==t.extra_button?a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("额外按钮运行脚本：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.extra_button_script,placement:"top"}},[a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:"请输入额外按钮运行脚本"},model:{value:t.extra_button_script,callback:function(a){e.$set(t,"extra_button_script",a)},expression:"singleData.extra_button_script"}})],1)],1),e._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"点击'额外按钮'可以运行此处填写的脚本，并将此处脚本的运行输出返回至页面",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]):e._e(),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否在列表展示：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为否",filterable:"","default-first-option":""},model:{value:t.is_important,callback:function(a){e.$set(t,"is_important",a)},expression:"singleData.is_important"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"选为是会将此组件使用单独的一列在运行记录中展示，建议不要设置太多列，否则会拖慢页面速度",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]),e._v(" "),a("div",[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("是否显示：")])]),e._v(" "),a("td",[a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:"不选择时为是",filterable:"","default-first-option":""},model:{value:t.visible,callback:function(a){e.$set(t,"visible",a)},expression:"singleData.visible"}},e._l(e.edit.boolOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("td",[a("el-tooltip",{staticClass:"edit-form-question-mark question-mark",attrs:{effect:"dark",content:"当选为'否'时，组件在页面上将不可见",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"div-flex"},[a("div",[a("i",{staticClass:"editFormRightButton editFormMoveUp el-icon-top",on:{click:function(a){e.editFormMoveUp(e.edit.formData.indexOf(t))}}})]),e._v(" "),a("div",[a("i",{staticClass:"editFormRightButton editFormMoveDown el-icon-bottom",on:{click:function(a){e.editFormMoveDown(e.edit.formData.indexOf(t))}}})]),e._v(" "),a("div",[a("i",{staticClass:"editFormRightButton editFormDeleted el-icon-close",on:{click:function(a){e.editFormDeleted(e.edit.formData.indexOf(t))}}})])])])],1)],1)])}),e._v(" "),a("div",{staticClass:"add",staticStyle:{width:"99.87%"},on:{click:function(t){return e.editFormAddSingleData()}}},[a("span",[e._v("+ 添加参数")])])],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{slot:"reference",size:"small"},nativeOn:{click:function(t){return e.editFormCloneButtonActive()}},slot:"reference"},[e._v("复制现有脚本的组件配置")]),e._v(" "),a("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){e.edit.visible=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",loading:e.edit.buttonLoading},nativeOn:{click:function(t){return e.editFormSubmited()}}},[e._v("提交")])],1)]),e._v(" "),a("el-drawer",{attrs:{title:"选择想要复制的配置",visible:e.cloneSettings.visible,"close-on-click-modal":!1,size:"25%"},on:{"update:visible":function(t){return e.$set(e.cloneSettings,"visible",t)}}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",{staticClass:"min_height-medium scrollbar-div"},[a("el-table",{attrs:{data:e.cloneSettings.script.data,size:"mini"}},[a("el-table-column",{attrs:{label:"名称",width:"250",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editFormClone(t.$index,t.row)}}},[e._v("选择")])]}}])})],1)],1)])]),e._v(" "),a("el-drawer",{attrs:{title:"编辑",visible:e.singleDataOptionDialog.visible,"close-on-click-modal":!1,size:"40%"},on:{"update:visible":function(t){return e.$set(e.singleDataOptionDialog,"visible",t)},closed:e.singleDataOptionDialogClosed}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",{ref:"scrollbarDiv",staticClass:"scrollbar-div max-height-large padding-right-19 padding_bottom-medium"},[e._l(e.singleDataOptionDialog.data,function(t){return a("div",{key:t.key},[a("div",[a("td",{staticClass:"td--label--short",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v("标签：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.label,placement:"top"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入选项展示文字"},model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"singleDataOption.label"}})],1)],1),e._v(" "),a("td",{staticClass:"td--label--short",attrs:{type:"flex"}},[a("p",{staticClass:"singleDataOptionDialogValue"},[e._v("值：")])]),e._v(" "),a("td",[a("el-tooltip",{attrs:{"open-delay":"1000",effect:"dark",content:t.value,placement:"top"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入选项实际的值"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleDataOption.value"}})],1)],1),e._v(" "),a("td",[a("i",{staticClass:"singleDataOptionDialogDeleted el-icon-delete",on:{click:function(a){e.singleDataOptionDialogDeleted(e.singleDataOptionDialog.data.indexOf(t))}}})])])])}),e._v(" "),a("div",{staticClass:"add",staticStyle:{width:"99.87%"},on:{click:function(t){return e.singleDataOptionDialogAddSingleData()}}},[a("span",[e._v("+ 添加选项")])])],2),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.singleDataOptionDialog.visible=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.singleDataOptionDialogSubmited()}}},[e._v("保存")])],1)])])],1)},[],!1,null,null,null));Ee.options.__file="ScriptEdit.vue";var $e="/script/subSystemScript",Te="/script/run",ze="/script/terminate",Fe="/script/runOutput",Ie="/script/saveOutput",Me="/script/extraButtonScriptRun",Oe={name:"ConsoleScriptDetail",components:{ScriptButtons:xe,ScriptEdit:Ee.exports},props:{user_id:Number,systemId:Number,newTabBool:Boolean,activeScriptName:String},watch:{systemId:function(e,t){this.systemIdChanged(e)},activeTab:function(e,t){this.activeTabChanged(e)},activeScriptName:function(e,t){console.log(e),this.activeTab=e},newTabBool:function(e,t){e&&!t&&this.newScript()}},data:function(){return{activeTab:"",activeTabIndex:0,activeScriptId:0,formData:[],extra_button:{visible:!1,output:"",buttonLoading:!1,loading:!1,output_temp:""},output:{canBeTerminate:!1,loading:!1,log_id:0,logs:[],visible:!1,text:"",important_fields:[],isAlert:!1,scrollInit:!0},edit:{buttonLoading:!1,dialogTitle:"编辑",id:0,sub_system_id:0,title:"",start_folder:"",start_script:"",type:0,visible:!1,typeOptions:[{label:"输入框",value:"input"},{label:"选择器",value:"select"},{label:"日期",value:"date"},{label:"日期范围",value:"dateRange"}],boolOptions:[{label:"是",value:1},{label:"否",value:0}],formData:[]},submitButtonLoading:!1}},methods:{newScript:function(){this.edit.dialogTitle="新增脚本",this.edit.sub_system_id=this.systemId,this.edit.id=0,this.edit.visible=!0},singleDataReplay:function(e){this.formData[this.activeTabIndex]=e},singleDataLog:function(e){var t=this;this.output.visible=!0,this.output.text=e,this.output.scrollInit&&(this.$nextTick(function(){try{new pe.a(t.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1}).refresh()}catch(e){console.log("滚动条设置失败"+e)}}),this.output.scrollInit=!1)},flush:function(){this.systemIdChanged(this.systemId)},activeTabChanged:function(e){for(var t=0;t<this.formData.length;t++)if(this.formData[t].title==e){this.activeTabIndex=t,this.activeScriptId=this.formData[t].id;break}},systemIdChanged:function(e){var t=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(""!=e){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,t.subSystemScript(e);case 4:0!=t.formData.length&&(t.activeTab=t.formData[0].title),t.$emit("formData",t.formData);case 6:case"end":return a.stop()}},a,t)}))()},subSystemScript:function(e){var t=this;return c()(o.a.mark(function a(){var i,s,r,n,l;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.formDataLoading=!0,a.prev=1,a.next=4,u.a.post($e,{user_id:t.user_id,sub_system_id:e});case 4:for(i=a.sent,s=i.data,t.formData=[],r=0;r<s.data.length;r++)for(t.formData.push((n={title:s.data[r].name,id:s.data[r].id,start_folder:s.data[r].start_folder,start_script:s.data[r].start_script,runs:s.data[r].runs,user:s.data[r].user,update_time:s.data[r].update_time,version:s.data[r].version},me()(n,"update_time",s.data[r].update_time),me()(n,"type",s.data[r].type),me()(n,"sub_system_id",s.data[r].sub_system_id),me()(n,"formDataDetail",[]),n)),l=0;l<s.data[r].detail.length;l++)t.formData[t.formData.length-1].formDataDetail.push({type:s.data[r].detail[l].type,label:s.data[r].detail[l].label,value:s.data[r].detail[l].value,placeHolder:s.data[r].detail[l].place_holder,options:s.data[r].detail[l].options,createable:s.data[r].detail[l].createable,disabled:s.data[r].detail[l].disabled,remark:s.data[r].detail[l].remark,is_important:s.data[r].detail[l].is_important,visible:s.data[r].detail[l].visible,extra_button:s.data[r].detail[l].extra_button,extra_button_label:s.data[r].detail[l].extra_button_label,extra_button_script:s.data[r].detail[l].extra_button_script,version:s.data[r].detail[l].version});return t.formDataLoading=!1,a.abrupt("return",t.formData);case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 16:case"end":return a.stop()}},a,t,[[1,12]])}))()},singleDataSetting:function(){var e=this;this.subSystemScript(this.systemId).then(function(t){e.edit.dialogTitle="编辑脚本",e.edit.title=t[e.activeTabIndex].title,e.edit.id=t[e.activeTabIndex].id,e.edit.start_folder=t[e.activeTabIndex].start_folder,e.edit.start_script=t[e.activeTabIndex].start_script,e.edit.type=String(t[e.activeTabIndex].type),e.edit.formData=t[e.activeTabIndex].formDataDetail,e.edit.sub_system_id=t[e.activeTabIndex].sub_system_id,e.edit.visible=!0})},editFormClosed:function(){this.edit.dialogTitle="编辑",this.edit.id=0,this.edit.title="",this.edit.start_folder="",this.edit.start_script="",this.edit.type=1,this.edit.formData=[]},extraButtonClicked:function(e,t,a){var i=this;if(this.extra_button.visible)this.extra_button.visible=!1;else{this.extra_button.output="",this.extra_button.output_temp="",this.extra_button.buttonLoading=!0;var s=this.command_get(a,2).command;this.extra_button.loading=!0;try{u.a.post(Me,{user_id:this.user_id,command:s}).then(function(a){if(-1==a.data.data.process_id)i.$message({message:"任务创建错误，请联系管理员！",type:"error"});else var s=a.data.data.process_id;i.extraButtonFlushOutput(e,t,s)})}catch(e){console.log(e),this.$message({message:e.response.data.msg,type:"error"})}}},extraButtonFlushOutput:function(e,t,a){var i=this;try{u.a.post(Fe,{process_id:a,user_id:this.user_id}).then(function(s){if(-1==s.data.data.status)return i.$message({message:data.msg,type:"error"}),i.extra_button.loading=!1,void(i.extra_button.buttonLoading=!1);if(0==s.data.data.status){try{var r=JSON.parse(i.extra_button.output_temp+s.data.data.output);i.extra_button.output=r.data.msg.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),void 0!=r.data.value&&(i.formData[e].formDataDetail[t].value=r.data.value),void 0!=r.data.options&&(i.formData[e].formDataDetail[t].options=r.data.options)}catch(e){i.extra_button.output=(i.extra_button.output_temp+s.data.data.output).replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")}return i.extra_button.loading=!1,void(i.extra_button.buttonLoading=!1)}1==s.data.data.status&&(i.extra_button.output_temp=i.extra_button.output_temp+s.data.data.output,i.extraButtonFlushOutput(e,t,a))})}catch(e){console.log(e),this.$message({message:e.response.data.msg,type:"error"})}},submit:function(){var e=this;this.submitButtonLoading=!0;var t="cd "+this.formData[this.activeTabIndex].start_folder+" && "+this.formData[this.activeTabIndex].start_script,a=this.command_get(t,this.formData[this.activeTabIndex].type),i=a.command,s=Math.floor(1e14*Math.random()),r=y()(this.formData[this.activeTabIndex].id+this.$cookies.get("user_id")+this.$cookies.get("user_key")+s+i);try{u.a.post(Te,{id:this.formData[this.activeTabIndex].id,command:i,version:this.formData[this.activeTabIndex].version,detail:a.detail,user_id:this.user_id,salt:s,sign:r}).then(function(t){-1==t.data.data.process_id?e.$message({message:"任务创建错误，请联系管理员！",type:"error"}):(e.output.log_id=t.data.data.log_id,e.output.visible=!0,e.output.text=i+"<br>",e.output.process_id=t.data.data.process_id,e.output.canBeTerminate=!0,e.flushOutput(t.data.data.process_id))})}catch(e){console.log(e),this.$message({message:e.response.data.msg,type:"error"})}},terminate:function(){var e=this;return c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$confirm("确定要停止运行吗?","提示",{}).then(c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(ze,{user_id:e.user_id,process_id:e.output.process_id});case 3:a=t.sent,i=a.data,e.$message({message:i.msg,type:"success"}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 12:case"end":return t.stop()}},t,e,[[0,8]])})));case 1:case"end":return t.stop()}},t,e)}))()},flushOutput:function(e){var t=this;this.output.isAlert=!0;try{u.a.post(Fe,{process_id:e,user_id:this.user_id}).then(function(a){if(-1==a.data.data.status)return t.$message({message:data.msg,type:"error"}),void(t.submitButtonLoading=!1);if(0!=a.data.data.status)1==a.data.data.status&&(t.output.text=t.output.text+a.data.data.output.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),t.$nextTick(function(){try{var e=new pe.a(t.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1});e.scrollTo(0,e.maxScrollY),e.destroy()}catch(e){console.log("滚动条设置失败"+e)}}),t.flushOutput(e));else{t.output.canBeTerminate=!1,t.output.isAlert=!1,t.output.text="<div>"+t.output.text+"</div>"+a.data.data.output.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),t.output.text=t.output.text.replace(/#&nbsp;/g," "),t.$message({message:"运行结束，请查看输出。",type:"success"}),t.$nextTick(function(){var e=new pe.a(t.$refs.outputDialog,{scrollY:!0,scrollbar:{fade:!0,interactive:!0},momentumLimitDistance:300,mouseWheel:!0,preventDefault:!1});e.scrollTo(0,e.maxScrollY)});try{u.a.post(Ie,{log_id:t.output.log_id,output:t.output.text}).then(function(e){t.submitButtonLoading=!1})}catch(e){console.log(e),t.$message({message:"记录运行日志错误！请联系管理员"+e.response.data.msg,type:"error"})}}})}catch(e){console.log(e),this.$message({message:e.response.data.msg,type:"error"})}},command_get:function(e,t){var a="",i={};if("1"==t){for(var s=0;s<this.formData[this.activeTabIndex].formDataDetail.length;s++)if(i[this.formData[this.activeTabIndex].formDataDetail[s].label]=this.formData[this.activeTabIndex].formDataDetail[s].value,"dateRange"!=this.formData[this.activeTabIndex].formDataDetail[s].type)a=a+" "+this.formData[this.activeTabIndex].formDataDetail[s].value;else{if(null==this.formData[this.activeTabIndex].formDataDetail[s].value)continue;for(var r=0;r<this.formData[this.activeTabIndex].formDataDetail[s].value.length;r++)a=a+" "+this.formData[this.activeTabIndex].formDataDetail[s].value[r]}a=e+a}else if("2"==t){var n=e;for(s=0;s<this.formData[this.activeTabIndex].formDataDetail.length;s++)if(i[this.formData[this.activeTabIndex].formDataDetail[s].label]=this.formData[this.activeTabIndex].formDataDetail[s].value,"dateRange"!=this.formData[this.activeTabIndex].formDataDetail[s].type){c=new RegExp("%"+this.formData[this.activeTabIndex].formDataDetail[s].label+"%","g");n=n.replace(c,this.formData[this.activeTabIndex].formDataDetail[s].value)}else{if(null==this.formData[this.activeTabIndex].formDataDetail[s].value)continue;for(var o="",l=0;l<this.formData[this.activeTabIndex].formDataDetail[s].value.length;l++)o=o+" "+this.formData[this.activeTabIndex].formDataDetail[s].value[l];var c=new RegExp("%"+this.formData[this.activeTabIndex].formDataDetail[s].label+"%","g");n=n.replace(c,o)}a=n}return{command:a,detail:i}},outputDialogClose:function(e){var t=this;this.output.isAlert?this.$confirm("在运行中关闭运行窗口会导致运行日志保存不完整，仍然要关闭吗?","提示",{}).then(function(a){t.output.text="",e()}):(this.output.text="",e())}}},Ne=(a("e7A+"),Object(p.a)(Oe,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.formDataLoading,expression:"formDataLoading"}],staticClass:"right-side-box-card"},[a("el-row",[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.formData.length,expression:"formData.length==0"}],staticClass:"info-text"},[a("i",{staticClass:"el-icon-back"}),e._v(" "),a("div",[e._v("请选择左侧系统")])]),e._v(" "),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:0!=e.formData.length,expression:"formData.length!=0"}],attrs:{addable:""},on:{"tab-add":e.newScript},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.formData,function(t,i){return a("el-tab-pane",{key:t.key,attrs:{label:t.title,name:t.title,lazy:!0}},[a("div",{staticClass:"div-flex"},[a("div",e._l(t.formDataDetail,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.visible,expression:"singleData.visible==1"}],key:t.key},[a("el-row",{staticClass:"singleData"},[a("td",{staticClass:"td--label",attrs:{type:"flex"}},[a("p",{staticClass:"td__p--label"},[e._v(e._s(t.label)+"：")])]),e._v(" "),a("td",{staticClass:"singleDataCol",attrs:{type:"flex"}},[a("el-tooltip",{staticClass:"item",attrs:{"open-delay":"500",content:t.value,placement:"top"}},["input"==t.type?a("el-input",{staticClass:"main_input--large",attrs:{size:"small",placeholder:t.placeHolder,disabled:0!=t.disabled},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}}):e._e()],1),e._v(" "),"select"==t.type?a("el-select",{staticClass:"main_select--large",attrs:{size:"small",placeholder:t.placeHolder,disabled:0!=t.disabled,filterable:"","allow-create":0!=t.createable,"default-first-option":""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e(),e._v(" "),"date"==t.type?a("el-date-picker",{staticClass:"main_select--large",attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:t.placeHolder,disabled:0!=t.disabled},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}}):e._e(),e._v(" "),"dateRange"==t.type?a("el-date-picker",{staticClass:"main_select--large",attrs:{size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",placeholder:t.placeHolder,disabled:0!=t.disabled},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"singleData.value"}}):e._e()],1),e._v(" "),a("td",{staticClass:"padding_left-small padding_right-small min_width-small"},[a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:""!=t.remark,expression:"singleData.remark!=''"}],staticClass:"question-mark",attrs:{effect:"dark",content:t.remark,placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),e._v(" "),0!=t.extra_button?a("td",[a("el-popover",{attrs:{placement:"right",width:"300",trigger:"click"},on:{"after-leave":function(t){e.extra_button.output="",e.extra_button.output_temp=""}},model:{value:e.extra_button.visible,callback:function(t){e.$set(e.extra_button,"visible",t)},expression:"extra_button.visible"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.extra_button.loading,expression:"extra_button.loading"}],staticClass:"min_height-medium",domProps:{innerHTML:e._s(e.extra_button.output)}}),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"small",disabled:e.extra_button.buttonLoading},on:{click:function(a){return e.extraButtonClicked(i,s,t.extra_button_script)}},slot:"reference"},[e._v(e._s(t.extra_button_label))])],1)],1):e._e()])],1)}),0),e._v(" "),a("ScriptButtons",{attrs:{user_id:e.user_id,singleForm:t},on:{replay:e.singleDataReplay,output:e.singleDataLog,deleted:e.flush,edit:e.singleDataSetting}})],1)])}),1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"60px","margin-left":"10","margin-right":"10px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.formData.length,expression:"formData.length!=0"}],staticStyle:{margin:"20px 20px 20px 20px",position:"absolute",bottom:"0",right:"0","z-index":"99"},attrs:{loading:e.submitButtonLoading,type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1),e._v(" "),a("el-drawer",{attrs:{title:"输出","v-if":e.output.visible,visible:e.output.visible,size:"70%",direction:"btt","before-close":e.outputDialogClose},on:{"update:visible":function(t){return e.$set(e.output,"visible",t)}}},[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{ref:"outputDialog",staticClass:"output-div"},[a("div",{staticClass:"output-html",domProps:{innerHTML:e._s(e.output.text)}})])])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.output.canBeTerminate,expression:"output.canBeTerminate"}],staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"small",plain:"",type:"danger"},nativeOn:{click:function(t){return e.terminate()}}},[e._v("停止运行")])],1)]),e._v(" "),a("el-drawer",{attrs:{title:e.edit.dialogTitle,visible:e.edit.visible,"close-on-click-modal":!1,size:"60%"},on:{"update:visible":function(t){return e.$set(e.edit,"visible",t)},closed:e.editFormClosed}},[a("ScriptEdit",{attrs:{user_id:e.user_id,edit:e.edit},on:{done:e.flush}})],1)],1)},[],!1,null,null,null));Ne.options.__file="ScriptDetail.vue";var Pe={name:"Script",components:{ScriptColumn:de,ScriptDetail:Ne.exports},props:{user_id:Number},data:function(){return{systemId:Number,scriptName:String,newTabBool:!1,formData:[]}},watch:{},methods:{newTab:function(){this.newTabBool=!0},subSystemClicked:function(e){this.systemId=e},scriptNameClicked:function(e){this.scriptName=e},formDataChanged:function(e){this.formData=e}}},Ae=(a("JVHC"),Object(p.a)(Pe,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{staticClass:"main-row margin_bottom-medium",attrs:{gutter:20}},[a("el-col",{staticClass:"lift-side-bar",attrs:{span:5}},[a("ScriptColumn",{attrs:{user_id:e.user_id,formData:e.formData},on:{newTab:e.newTab,subSystemClicked:e.subSystemClicked,scriptNameClicked:e.scriptNameClicked}})],1),e._v(" "),a("el-col",{staticClass:"right-side-bar",attrs:{span:19}},[a("ScriptDetail",{attrs:{activeScriptName:e.scriptName,systemId:e.systemId,user_id:e.user_id,newTabBool:e.newTabBool},on:{formData:e.formDataChanged}})],1)],1)],1)},[],!1,null,null,null));Ae.options.__file="Script.vue";var Le=Ae.exports,We="/console/get",Re={name:"Console",props:{user_id:Number,login_name:String},components:{Script:Le,Privilege:te},data:function(){return{consoleOptions:[],drawer:{title:"",size:"",visible:!1,direction:"ttb"},activeComponent:""}},methods:{consoleGetFront:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get(We);case 3:a=t.sent,i=a.data,e.consoleOptions=i.data,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 12:case"end":return t.stop()}},t,e,[[0,8]])}))()},consoleOptionClicked:function(e){this.activeComponent=e.component_name,this.drawer.title=e.name,this.drawer.visible=!0,this.drawer.direction="ttb",this.drawer.size="80%"}},created:function(){},mounted:function(){this.consoleGetFront()}},Be=(a("/pAc"),Object(p.a)(Re,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"console-main"},[a("el-row",{staticClass:"margin_bottom-large"},e._l(e.consoleOptions,function(t){return a("el-col",{key:t,attrs:{span:5,offset:1}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.name))])]),e._v(" "),a("i",{class:t.icon,staticStyle:{"font-size":"30px"}}),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small"},on:{click:function(a){return e.consoleOptionClicked(t)}}},[e._v("进入")])],1)],1)}),1),e._v(" "),a("el-drawer",{attrs:{title:e.drawer.title,visible:e.drawer.visible,direction:e.drawer.direction,size:e.drawer.size},on:{"update:visible":function(t){return e.$set(e.drawer,"visible",t)}}},[1==e.drawer.visible?a("div",{staticClass:"margin-medium"},["Privilege"==e.activeComponent?a("div",[a("Privilege",{attrs:{user_id:e.user_id,login_name:e.login_name}})],1):e._e(),e._v(" "),"Script"==e.activeComponent?a("div",[a("Script",{attrs:{user_id:e.user_id}})],1):e._e()]):e._e()])],1)},[],!1,null,"7b2828e6",null));Be.options.__file="Console.vue";var Ge=Be.exports,je="/cloudDrive/get",qe="/cloudDrive/save",Ue="/cloudDrive/delete",Ve={name:"CloudDrive",props:{user_id:Number},components:{},watch:{},data:function(){return{tableData:[],pagination:{currentPage:1,pageSize:10,total:0}}},methods:{paginationCurrentChange:function(e){this.pagination.currentPage=e,this.get()},paginationSizeChange:function(e){this.pagination.pageSize=e,this.get()},uploadSuccess:function(e,t,a){this.save(e.data.id),this.$emit("cloudStatusChanged",0),this.$refs.upload.clearFiles()},uploadProgress:function(){this.$emit("cloudStatusChanged",1)},get:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(je,{user_id:e.user_id,pagination_size:e.pagination.pageSize,current_page:e.pagination.currentPage});case 3:a=t.sent,i=a.data,e.tableData=i.data.list,e.pagination.total=i.data.total,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},save:function(e){var t=this;return c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(qe,{user_id:t.user_id,file_id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.get(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])}))()},download:function(e){var t=this;return c()(o.a.mark(function a(){var i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:try{(i=document.createElement("iframe")).src="/download?file_id="+e,i.style.display="none",document.body.appendChild(i)}catch(e){console.log(e),t.$message({message:e.response.data.msg,type:"error"})}case 1:case"end":return a.stop()}},a,t)}))()},del:function(e){var t=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("确认删除吗？","提示",{}).then(c()(o.a.mark(function a(){var i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(Ue,{user_id:t.user_id,id:e});case 3:i=a.sent,s=i.data,t.$message({message:s.msg,type:"success"}),t.get(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 13:case"end":return a.stop()}},a,t,[[0,9]])})));case 1:case"end":return a.stop()}},a,t)}))()}},mounted:function(){this.get(),this.timer=window.setInterval(this.get,6e4)},beforeDestroy:function(){window.clearInterval(this.timer)}},Ke=Object(p.a)(Ve,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",[a("el-row",{staticClass:"margin_bottom-large"},[a("div",{staticClass:"margin_left-medium margin_right-medium",staticStyle:{"text-align":"center"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{"text-align":"center"},attrs:{drag:"",action:"/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-progress":e.uploadProgress,"on-success":e.uploadSuccess,"before-remove":e.beforeRemove,"before-upload":e.beforeUpload,"on-exceed":e.handleExceed}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n          将文件拖到此处，或\n          "),a("em",[e._v("点击上传")])])])],1)]),e._v(" "),a("el-row",[a("div",{staticClass:"margin_left-medium margin_right-medium"},[a("div",{staticClass:"scrollbar-div",staticStyle:{"max-height":"calc(100vh - 400px)",height:"calc(100vh - 400px)"}},[a("el-table",{staticStyle:{"text-align":"center"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{prop:"file_name",label:"文件名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"上传时间"}}),e._v(" "),a("el-table-column",{key:Math.random(),attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"primary"},on:{click:function(a){return e.download(t.row.file_id)}}},[e._v("下载")]),e._v(" "),a("el-button",{staticClass:"noMargin",attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){return e.del(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-pagination",{staticClass:"margin_top-medium",staticStyle:{"text-align":"center"},attrs:{small:"","current-page":e.pagination.currentPage,"page-sizes":[5,10,20,30],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next",total:e.pagination.total},on:{"size-change":e.paginationSizeChange,"current-change":e.paginationCurrentChange}})],1)])],1)},[],!1,null,null,null);Ke.options.__file="CloudDrive.vue";var He="/login/userLogin",Ye="/login/userLoginSalt",Xe={name:"login",components:{Console:Ge,CloudDrive:Ke.exports},props:{login_name:String,user_name:String,user_id:Number},data:function(){return{visible:!1,password:"",salt:"",user:"",cloudStatus:0,drawer:{title:"",size:"",visible:!1,direction:"ttb"}}},methods:{md5It:function(e){return e=y()(e)},login:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.login_name&&""!==e.password&&void 0!==e.login_name&&void 0!==e.password&&0!=e.login_name.length&&0!=e.password.length){t.next=4;break}e.$notify.error({message:"请填写用户名和密码",type:"error"}),t.next=27;break;case 4:return t.prev=4,t.next=7,u.a.post(Ye,{login_name:e.login_name});case 7:return a=t.sent,i=a.data,s={login_name:e.login_name,password:e.md5It(e.md5It(e.md5It(e.password)+i.data.stable_salt)+i.data.salt),is_generate_cookie:!0},t.next=12,u.a.post(He,s);case 12:r=t.sent,n=r.data,e.visible=!1,e.$message({message:n.msg,type:"success"}),e.$cookies.set("user_key",n.user_key),e.$cookies.set("user_name",w()(n.user_name).replace(/\"/g,"")),e.$cookies.set("login_name",w()(n.login_name).replace(/\"/g,"")),e.$cookies.set("user_id",w()(n.user_id)),location.reload(),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(4),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 27:case"end":return t.stop()}},t,e,[[4,23]])}))()},logout:function(){this.$cookies.remove("user_key"),this.$cookies.remove("user_name"),this.$cookies.remove("login_name"),this.$cookies.remove("user_id"),this.$message({message:"退出成功！",type:"success"}),location.reload()},consoleClicked:function(){this.drawer.title="控制台",this.drawer.size="500",this.drawer.visible=!0,this.drawer.direction="ttb"},cloudClicked:function(){this.drawer.title="网盘",this.drawer.size="40%",this.drawer.visible=!0,this.drawer.direction="rtl",this.cloudStatus=0},cloudStatusChanged:function(e){this.cloudStatus=e},drawerBeforeClose:function(e){var t=this;1==this.cloudStatus?this.$confirm("检测到您的文件仍在上传中，关闭页面会打断上传，仍然要关闭吗?","提示",{}).then(function(a){t.drawer.title="",e(),t.cloudStatus=0}):(this.drawer.title="",e())}},created:function(){},mounted:function(){}},Je=(a("Z0kL"),Object(p.a)(Xe,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-button"},[a("el-popover",{directives:[{name:"show",rawName:"v-show",value:0==e.user_id,expression:"user_id==0"}],staticClass:"login-popover",attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-input",{staticClass:"login_name",attrs:{size:"small",placeholder:"用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.login_name,callback:function(t){e.login_name=t},expression:"login_name"}}),e._v(" "),a("el-input",{staticClass:"password",attrs:{size:"small",placeholder:"密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("el-button",{staticClass:"login",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.login()}}},[e._v("登录")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("登录")])],1),e._v(" "),a("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:0!=e.user_id,expression:"user_id!=0"}],staticClass:"user-popover",attrs:{trigger:"hover"}},[a("span",{staticClass:"el-dropdown-link userinfo-inner"},[e._v(e._s(e.user_name))]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.consoleClicked(t)}}},[e._v("控制台")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){return e.cloudClicked(t)}}},[e._v("网盘")]),e._v(" "),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.logout(t)}}},[e._v("退出登录")])],1)],1),e._v(" "),a("el-drawer",{attrs:{title:e.drawer.title,visible:e.drawer.visible,direction:e.drawer.direction,size:e.drawer.size,"before-close":e.drawerBeforeClose},on:{"update:visible":function(t){return e.$set(e.drawer,"visible",t)}}},["控制台"==e.drawer.title?a("Console",{attrs:{user_id:e.user_id,login_name:e.login_name}}):e._e(),e._v(" "),"网盘"==e.drawer.title?a("CloudDrive",{attrs:{user_id:e.user_id},on:{cloudStatusChanged:e.cloudStatusChanged}}):e._e()],1)],1)},[],!1,null,"0cb518c2",null));Je.options.__file="Login.vue";var Ze=Je.exports,Qe=a("EbCt"),et={name:"SlickSort",components:{SlickItem:Qe.SlickItem,SlickList:Qe.SlickList},props:{list:Array,can_be_edit:Boolean},watch:{list:function(e,t){},deep:!0},data:function(){return{}},methods:{edit:function(e,t){this.$emit("edit",e,t)},del:function(e,t){this.list.splice(t,1)},submit:function(){this.$emit("submit",this.list)}}},tt=(a("89bo"),Object(p.a)(et,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("SlickList",{staticClass:"slick_list",attrs:{lockAxis:"y"},model:{value:e.list,callback:function(t){e.list=t},expression:"list"}},e._l(e.list,function(t,i){return a("SlickItem",{key:i,staticClass:"slick_list_item",attrs:{index:i}},[a("i",{staticClass:"el-icon-s-operation",staticStyle:{color:"#6a6c70"}}),e._v(" "),a("span",{staticClass:"slick_list_item_span"},[e._v(e._s(t.name))]),e._v(" "),a("div",{staticClass:"slick_list_item_button"},[e.can_be_edit?a("el-button",{staticClass:"el-icon-setting",attrs:{size:"mini"},on:{click:function(a){return e.edit(t,i)}}}):e._e(),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.del(t,i)}}})],1)])}),1)],1),e._v(" "),a("el-row",{staticClass:"margin_top-medium"},[a("el-button",{staticClass:"edit-form-confirm",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submit()}}},[e._v("确定")])],1)],1)},[],!1,null,"edf8cada",null));tt.options.__file="SlickSort.vue";var at=tt.exports,it={name:"WidgetButton",props:{buttons:Array},data:function(){return{}},methods:{add:function(){this.$emit("add")},sort:function(){this.$emit("sort")},setting:function(){this.$emit("setting")},notify:function(){this.$emit("notify")}}},st=(a("1iwD"),Object(p.a)(it,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"margin_top-medium",attrs:{type:"flex",justify:"center"}},[-1!=e.buttons.indexOf("add")?a("el-button",{staticClass:"margin_left-mini margin_right-mini",attrs:{size:"small",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.add()}}}):e._e(),e._v(" "),-1!=e.buttons.indexOf("sort")?a("el-button",{staticClass:"bmargin_left-mini margin_right-mini",attrs:{size:"small",icon:"el-icon-setting",circle:""},on:{click:function(t){return e.sort()}}}):e._e(),e._v(" "),-1!=e.buttons.indexOf("setting")?a("el-button",{staticClass:"bmargin_left-mini margin_right-mini",attrs:{size:"small",icon:"el-icon-setting",circle:""},on:{click:function(t){return e.setting()}}}):e._e(),e._v(" "),-1!=e.buttons.indexOf("notify")?a("el-button",{staticClass:"margin_left-mini margin_right-mini",attrs:{size:"small",icon:"el-icon-bell",circle:""},on:{click:function(t){return e.notify()}}}):e._e()],1)},[],!1,null,"2edee53d",null));st.options.__file="WidgetButton.vue";var rt=st.exports,nt="/weather/get",ot="/weather/weatherLocationCreate",lt="/weather/weatherLocationListEdit",ct={name:"weather",props:{user_id:Number,widget_id:Number,buttons:Array,flush:Number},components:{SlickSort:at,WidgetButton:rt},watch:{},data:function(){return{locationEdit:{list:[],visible:!1},weathers:[{location:"",weatherForm:{tmp:"-",tmp_min:"-",tmp_max:"-",fl:"-",wind:"-",aqi:"-",tomorrow_tmp_min:"-",tomorrow_tmp_max:"-"},iconfontWeatherClass:"el-icon-more",iconfontAqiClass:"el-icon-more",iconfontTomorrowWeatherClass:"el-icon-more"}],loading:!0,edit:{visible:!1,location:""}}},methods:{add:function(){this.edit.visible=!0},sort:function(){this.locationEdit.list=[];for(var e=1;e<this.weathers.length;e++)this.locationEdit.list.push({name:this.weathers[e].location});this.locationEdit.visible=!0},locationEditSubmit:function(e){var t=this;return c()(o.a.mark(function a(){var i,s,r,n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(a.prev=0,i=[],s=0;s<e.length;s++)i.push(e[s].name);return a.next=5,u.a.post(lt,{user_id:t.user_id,locations:i});case 5:r=a.sent,n=r.data,t.$message({message:n.msg,type:"success"}),t.locationEdit.visible=!1,t.weatherData(),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 16:case"end":return a.stop()}},a,t,[[0,12]])}))()},locationAdd:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.edit.visible=!1,t.prev=1,t.next=4,u.a.post(ot,{user_id:e.user_id,location:e.edit.location});case 4:a=t.sent,i=a.data,e.$message({message:i.msg,type:"success"}),e.weatherData(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 14:case"end":return t.stop()}},t,e,[[1,10]])}))()},weatherData:function(e){var t=this;return c()(o.a.mark(function e(){var a,i,s,r,n,l,c,d,m,p,v,_,f,g,h,b;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post(nt,{user_id:t.user_id});case 3:for(a=e.sent,i=a.data,t.weathers=[],s=0;s<i.data.length;s++)r=i.data[s],n=r.id,l=r.location,c=r.fl,d=r.tmp,m=r.wind,p=r.cond_code_d,r.cond_txt_d,r.cond_code_n,r.cond_txt_n,v=r.tmp_max,_=r.tmp_min,f=r.tomorrow_cond_code_d,r.tomorrow_cond_txt_d,g=r.tomorrow_tmp_max,h=r.tomorrow_tmp_min,b=r.aqi,t.weathers.push({weatherForm:{}}),t.weathers[s].weatherForm.tmp=d,t.weathers[s].weatherForm.tmp_min=_,t.weathers[s].weatherForm.tmp_max=v,t.weathers[s].weatherForm.fl=c,t.weathers[s].weatherForm.wind=m,t.weathers[s].weatherForm.aqi=b,t.weathers[s].weatherForm.tomorrow_tmp_min=h,t.weathers[s].weatherForm.tomorrow_tmp_max=g,t.weathers[s].location=l,t.weathers[s].id=n,t.loading=!1,100==p&&(t.weathers[s].iconfontWeatherClass="iconfont icon-qing"),(p>=101&&p<=102||104==p||p>=202&&p<=208)&&(t.weathers[s].iconfontWeatherClass="iconfont icon-duoyun"),103==p&&(t.weathers[s].iconfontWeatherClass="iconfont icon-duoyunzhuanyin"),200==p&&(t.weathers[s].iconfontWeatherClass="iconfont icon-feng"),201==p&&(t.weathers[s].iconfontWeatherClass="iconfont icon-qing"),p>=209&&p<=213&&(t.weathers[s].iconfontWeatherClass="iconfont icon-taifeng"),p>=301&&p<=303&&(t.weathers[s].iconfontWeatherClass="iconfont icon-baoyu"),304!=p&&313!=p||(t.weathers[s].iconfontWeatherClass="iconfont icon-bingbao"),300!=p&&305!=p&&309!=p&&314!=p||(t.weathers[s].iconfontWeatherClass="iconfont icon-xiaoyu"),306!=p&&315!=p&&399!=p||(t.weathers[s].iconfontWeatherClass="iconfont icon-zhongyu"),(p>=307&&p<=308||p>=310&&p<=312||p>=316&&p<=318)&&(t.weathers[s].iconfontWeatherClass="iconfont icon-dayu"),400!=p&&407!=p&&408!=p||(t.weathers[s].iconfontWeatherClass="iconfont icon-xiaoxue"),401!=p&&409!=p&&499!=p||(t.weathers[s].iconfontWeatherClass="iconfont icon-zhongxue"),402!=p&&410!=p||(t.weathers[s].iconfontWeatherClass="iconfont icon-daxue"),403==p&&(t.weathers[s].iconfontWeatherClass="iconfont icon-baoxue"),p>=404&&p<=406&&(t.weathers[s].iconfontWeatherClass="iconfont icon-yujiaxue"),(p>=500&&p<=501||p>=509&&p<=510||p>=514&&p<=515)&&(t.weathers[s].iconfontWeatherClass="iconfont icon-wu"),502==p&&(t.weathers[s].iconfontWeatherClass="iconfont icon-mai"),p>=503&&p<=504&&(t.weathers[s].iconfontWeatherClass="iconfont icon-shachen1"),p>=507&&p<=508&&(t.weathers[s].iconfontWeatherClass="iconfont icon-shachenbao"),b>=100&&(t.weathers[s].iconfontAqiClass="iconfont icon-PM"),b<100&&(t.weathers[s].iconfontAqiClass="iconfont icon-app_icons--"),100==f&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-qing"),(f>=101&&f<=102||104==f||f>=202&&f<=208)&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-duoyun"),103==f&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-duoyunzhuanyin"),200==f&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-feng"),201==f&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-qing"),f>=209&&f<=213&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-taifeng"),f>=301&&f<=303&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-baoyu"),304!=f&&313!=f||(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-bingbao"),300!=f&&305!=f&&309!=f&&314!=f||(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-xiaoyu"),306!=f&&315!=f&&399!=f||(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-zhongyu"),(f>=307&&f<=308||f>=310&&f<=312||f>=316&&f<=318)&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-dayu"),400!=f&&407!=f&&408!=f||(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-xiaoxue"),401!=f&&409!=f&&499!=f||(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-zhongxue"),402!=f&&410!=f||(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-daxue"),403==f&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-baoxue"),f>=404&&f<=406&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-yujiaxue"),(f>=500&&f<=501||f>=509&&f<=510||f>=514&&f<=515)&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-wu"),502==f&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-mai"),f>=503&&f<=504&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-shachen1"),f>=507&&f<=508&&(t.weathers[s].iconfontTomorrowWeatherClass="iconfont icon-shachenbao");t.$emit("done"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),t.$message({message:e.t0.response.data.msg,type:"error"});case 14:case"end":return e.stop()}},e,t,[[0,10]])}))()}},created:function(){},mounted:function(){this.weatherData(),this.timer=window.setInterval(this.weatherData,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},dt=(a("TbCT"),Object(p.a)(ct,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"weather"},[a("el-carousel",{attrs:{height:"250px",trigger:"click",interval:"5000","indicator-position":"outside"}},e._l(e.weathers,function(t){return a("el-carousel-item",{key:t},[a("el-row",{ref:"weatherForm",refInFor:!0,attrs:{type:"flex",justify:"center",model:t.weatherForm}},[a("div",[a("div",{staticClass:"location"},[e._v(e._s(t.location))])])]),e._v(" "),a("el-row",{ref:"weatherForm",refInFor:!0,attrs:{type:"flex",justify:"center",model:t.weatherForm}},[a("td",[a("el-row",{attrs:{type:"flex",justify:"left"}},[a("td",{staticClass:"todayWeatherIcon"},[a("i",{class:t.iconfontWeatherClass,staticStyle:{"font-size":"100px"}})]),e._v(" "),a("td",{staticClass:"todayWeatherText"},[a("div",{staticClass:"todayWeatherTextDiv"},[e._v(e._s(t.weatherForm.tmp)+"°C")])])]),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"left"}},[a("td",{staticClass:"todayAqiIcon"},[a("i",{class:t.iconfontAqiClass,staticStyle:{"font-size":"50px"}})]),e._v(" "),a("td",{staticClass:"todayAqiText"},[a("div",{staticClass:"todayAqiTextDiv"},[e._v("AQI:"+e._s(t.weatherForm.aqi))])])]),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"left"}},[a("td",{staticClass:"tomorrowWeatherIcon"},[a("i",{class:t.iconfontTomorrowWeatherClass,staticStyle:{"font-size":"50px"}})]),e._v(" "),a("td",{staticClass:"tomorrowWeatherText"},[a("div",{staticClass:"tomorrowWeatherTextDiv"},[e._v("\n                明日:"+e._s(t.weatherForm.tomorrow_tmp_min)+"°C-"+e._s(t.weatherForm.tomorrow_tmp_max)+"°C\n              ")])])])],1),e._v(" "),a("div",{staticStyle:{float:"left","margin-top":"30px",width:"1px",height:"175px",background:"darkgray","margin-left":"25px","margin-right":"25px"}}),e._v(" "),a("div",{staticClass:"weatherSideText"},[a("td",[a("div",{staticClass:"weatherSideTextDetail"},[e._v("\n              今日: "+e._s(t.weatherForm.tmp_min)+"°C-"+e._s(t.weatherForm.tmp_max)+"°C\n            ")]),e._v(" "),a("div",{staticClass:"weatherSideTextDetail"},[e._v("风力: "+e._s(t.weatherForm.wind))]),e._v(" "),a("div",{staticClass:"weatherSideTextDetail"},[e._v("体感: "+e._s(t.weatherForm.fl)+"°C")])])])])],1)}),1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:0!=e.user_id,expression:"user_id != 0"}],attrs:{type:"flex",justify:"center"}},[a("WidgetButton",{attrs:{user_id:e.user_id,widget_id:e.widget_id,buttons:e.buttons},on:{add:function(t){return e.add()},sort:function(t){return e.sort()}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑地区",visible:e.locationEdit.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.locationEdit,"visible",t)}}},[e.locationEdit.visible?a("SlickSort",{attrs:{list:e.locationEdit.list,can_be_edit:!1},on:{submit:e.locationEditSubmit}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"添加城市",visible:e.edit.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.edit,"visible",t)}}},[a("el-form",{ref:"form",attrs:{model:e.edit,size:"mini"}},[a("el-form-item",{attrs:{label:"城市名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"mini",placeholder:"城市名称，如：北京"},model:{value:e.edit.location,callback:function(t){e.$set(e.edit,"location",t)},expression:"edit.location"}})],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.locationAdd()}}},[e._v("确定")])],1)],1)],1)},[],!1,null,"714afd4b",null));dt.options.__file="Weather.vue";var ut=dt.exports,mt={name:"IconComponet",props:{icons:Array},watch:{icons:function(e,t){this.iconInit()}},data:function(){return{iconData:[]}},methods:{iconChoosed:function(e){this.$emit("iconName",e)},iconInit:function(){this.iconData=[];for(var e=0;e<Math.floor(this.icons.length/12)+1;e++){this.iconData.push([]);for(var t=0;t<12&&(e!=Math.floor(this.icons.length/12)||t!=this.icons.length%12);t++)this.iconData[this.iconData.length-1].push(this.icons[12*e+t])}}},mounted:function(){this.iconInit()}},pt=(a("yDdZ"),Object(p.a)(mt,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.iconData,function(t){return a("el-row",{key:t,staticClass:"margin_bottom-medium"},e._l(t,function(t){return a("el-col",{key:t,attrs:{span:2}},[a("el-button",{attrs:{size:"medium"},on:{click:function(a){return e.iconChoosed(t.name)}}},[a("i",{class:t.name+" icon-medium"})])],1)}),1)}),1)},[],!1,null,"22020d01",null));pt.options.__file="Icon.vue";var vt=pt.exports,_t="/bookmarks/get",ft="/bookmarks/bookmarksAdd",gt="/bookmarks/bookmarksEdit",ht="/icon",bt={name:"bookmarks",props:{user_id:Number,widget_id:Number,buttons:Array},components:{IconComponet:vt,SlickSort:at,WidgetButton:rt},data:function(){return{bookmarksDataRaw:[],bookmarksSuites:[],bookmarksEdit:{visible:!1,list:[]},bookmarksEditForm:{visible:!1,name:"",url:"https://",icon:""},bookmarksEditTempIndex:0,icon:{visible:!1,data:[]}}},methods:{bookmarksClicked:function(e){window.open(e)},bookmarksSuitesGenerate:function(){for(var e=[],t=[],a=0;a<this.bookmarksDataRaw.length;a+=4){e.push([]);for(var i=0;i<4;i++)void 0!=this.bookmarksDataRaw[a+i]&&e[e.length-1].push(this.bookmarksDataRaw[a+i])}for(var s=0;s<e.length;s+=3){t.push([]);for(var r=0;r<3;r++)t[t.length-1].push(e[s+r])}this.bookmarksSuites=t},bookmarksGet:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(_t,{user_id:e.user_id});case 3:a=t.sent,i=a.data,e.bookmarksDataRaw=i.data,e.bookmarksSuitesGenerate(),e.$emit("done"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 14:case"end":return t.stop()}},t,e,[[0,10]])}))()},bookmarksEditFormConfirmClicked:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("新增书签"!=e.bookmarksEditForm.title){t.next=16;break}return t.prev=1,t.next=4,u.a.post(ft,{url:e.bookmarksEditForm.url,name:e.bookmarksEditForm.name,icon:e.bookmarksEditForm.icon,user_id:e.user_id});case 4:a=t.sent,i=a.data,e.$message({message:i.msg,type:"success"}),e.bookmarksGet(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 14:t.next=17;break;case 16:"编辑书签"==e.bookmarksEditForm.title&&(s=e.bookmarksEditTempIndex,e.bookmarksEdit.list[s].url=e.bookmarksEditForm.url,e.bookmarksEdit.list[s].name=e.bookmarksEditForm.name,e.bookmarksEdit.list[s].icon=e.bookmarksEditForm.icon);case 17:e.bookmarksEditForm.visible=!1;case 18:case"end":return t.stop()}},t,e,[[1,10]])}))()},add:function(){this.bookmarksEditForm={title:"新增书签",visible:!0,name:"",url:"https://",icon:""}},sort:function(){this.bookmarksEdit.list=ae(this.bookmarksDataRaw),this.bookmarksEdit.visible=!0},bookmarksEditSubmit:function(e){var t=this;return c()(o.a.mark(function a(){var i,s,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(i=0;i<e.length;i++)e[i].order=i+1;return a.prev=1,a.next=4,u.a.post(gt,{bookmarks:e,user_id:t.user_id});case 4:s=a.sent,r=s.data,t.$message({message:r.msg,type:"success"}),t.bookmarksEdit.visible=!1,t.bookmarksGet(),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 15:case"end":return a.stop()}},a,t,[[1,11]])}))()},bookmarksSetting:function(e,t){this.bookmarksEditTempIndex=t,this.bookmarksEditForm={title:"编辑书签",visible:!0,name:e.name,url:e.url,icon:e.icon}},bookmarksDeleteSubmit:function(e,t){this.bookmarksEdit.list.splice(t,1),console.log(e,t)},bookmarksIconFront:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.get(ht,{bookmarks:e.bookmarksEdit.list,user_id:e.user_id});case 3:a=t.sent,i=a.data,e.icon.visible=!0,e.icon.data=i.data,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},iconNameGet:function(e){this.bookmarksEditForm.icon=e,this.icon.visible=!1}},mounted:function(){this.bookmarksGet()}},wt=(a("QkgJ"),Object(p.a)(bt,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bookmarks-main"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",[a("div",{staticClass:"widget-label"},[e._v("书签")])])]),e._v(" "),a("div",{staticClass:"bookmarks-data-row-main"},[a("el-carousel",{attrs:{height:"180px",trigger:"click",autoplay:!1,"indicator-position":"outside"}},e._l(e.bookmarksSuites,function(t){return a("el-carousel-item",{key:t},e._l(t,function(t){return a("el-row",{key:t,staticClass:"margin_bottom-medium"},e._l(t,function(t){return a("el-col",{key:t,attrs:{span:6}},[a("el-button",{staticClass:"bookmarks-main-button",attrs:{size:"small"},on:{click:function(a){return e.bookmarksClicked(t.url)}}},[a("i",{class:t.icon,staticStyle:{}}),e._v("\n              "+e._s(t.name)+"\n            ")])],1)}),1)}),1)}),1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:0!=e.user_id,expression:"user_id!=0"}],attrs:{type:"flex",justify:"center"}},[a("WidgetButton",{attrs:{user_id:e.user_id,widget_id:e.widget_id,buttons:e.buttons},on:{add:function(t){return e.add()},sort:function(t){return e.sort()},notify:function(t){return e.notify()}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.bookmarksEditForm.title,visible:e.bookmarksEditForm.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.bookmarksEditForm,"visible",t)}}},[a("el-form",{ref:"form",attrs:{model:e.bookmarksEditForm,size:"mini"}},[a("el-form-item",{attrs:{label:"网站名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"网站名称"},model:{value:e.bookmarksEditForm.name,callback:function(t){e.$set(e.bookmarksEditForm,"name",t)},expression:"bookmarksEditForm.name"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"网站链接"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"链接(需要完整填写，包括'http://')"},model:{value:e.bookmarksEditForm.url,callback:function(t){e.$set(e.bookmarksEditForm,"url",t)},expression:"bookmarksEditForm.url"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"图标名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"图标名称",disabled:""},model:{value:e.bookmarksEditForm.icon,callback:function(t){e.$set(e.bookmarksEditForm,"icon",t)},expression:"bookmarksEditForm.icon"}}),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.bookmarksIconFront()}}},[e._v("选择图标")])],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.bookmarksEditFormConfirmClicked()}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑书签",visible:e.bookmarksEdit.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.bookmarksEdit,"visible",t)}}},[e.bookmarksEdit.visible?a("SlickSort",{attrs:{list:e.bookmarksEdit.list,can_be_edit:!0},on:{submit:e.bookmarksEditSubmit,edit:e.bookmarksSetting}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"选择喜欢的图标",visible:e.icon.visible,width:"70%"},on:{"update:visible":function(t){return e.$set(e.icon,"visible",t)}}},[a("IconComponet",{attrs:{icons:e.icon.data},on:{iconName:e.iconNameGet}})],1)],1)},[],!1,null,"13402c8c",null));wt.options.__file="Bookmarks.vue";var kt=wt.exports,yt="/push/get",xt="/push/add",Dt="/push/edit",Ct={name:"PushEdit",props:{user_id:Number,widget_id:Number},data:function(){return{id:0,notifyData:{form:{notify:{select:0,options:[{value:0,label:"否"},{value:1,label:"是"}]},notifyMethod:{select:1,options:[{value:1,label:"微信"},{value:2,label:"邮件"}]},triggerDate:"",triggerTime:"",interval:{value:"",unit:{select:1,options:[{value:1,label:"小时"},{value:2,label:"天"}]}}}}}},methods:{get:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(yt,{user_id:e.user_id,widget_id:e.widget_id});case 3:if(a=t.sent,0!=(i=a.data).data.length){t.next=12;break}return s=new Date,e.notifyData.form.triggerDate=ie(new Date(s.getTime()+864e5)),e.notifyData.form.triggerTime="08:00",t.abrupt("return");case 12:e.id=i.data.id,e.notifyData.form.notify.select=i.data.notify,e.notifyData.form.notifyMethod.select=i.data.notify_method,e.notifyData.form.triggerDate=i.data.notify_trigger_time.split(" ")[0],e.notifyData.form.triggerTime=i.data.notify_trigger_time.split(" ")[1].substr(0,5),e.notifyData.form.interval.value=i.data.notify_interval_raw,e.notifyData.form.interval.unit.select=i.data.notify_interval_unit;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 25:case"end":return t.stop()}},t,e,[[0,21]])}))()},edit:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,0==e.id){t.next=10;break}return t.next=4,u.a.post(Dt,{id:e.id,user_id:e.user_id,widget_id:e.widget_id,notify:e.notifyData.form.notify.select,notify_method:e.notifyData.form.notifyMethod.select,notify_interval_raw:Number(e.notifyData.form.interval.value),notify_interval_unit:e.notifyData.form.interval.unit.select,notify_trigger_time:e.notifyData.form.triggerDate+" "+e.notifyData.form.triggerTime});case 4:a=t.sent,i=a.data,e.$message({message:i.msg,type:"success"}),e.$emit("done"),t.next=17;break;case 10:if(0!=e.id){t.next=17;break}return t.next=13,u.a.post(xt,{id:e.id,user_id:e.user_id,widget_id:e.widget_id,notify:e.notifyData.form.notify.select,notify_method:e.notifyData.form.notifyMethod.select,notify_interval_raw:Number(e.notifyData.form.interval.value),notify_interval_unit:e.notifyData.form.interval.unit.select,notify_trigger_time:e.notifyData.form.triggerDate+" "+e.notifyData.form.triggerTime});case 13:s=t.sent,r=s.data,e.$message({message:r.msg,type:"success"}),e.$emit("done");case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 23:case"end":return t.stop()}},t,e,[[0,19]])}))()}},mounted:function(){this.get()}},St=(a("W1Ys"),Object(p.a)(Ct,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",staticClass:"padding_bottom-medium",attrs:{model:e.notifyData.form,size:"mini"}},[a("el-form-item",{attrs:{label:"是否推送"}},[a("div",{staticClass:"div-flex"},[a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:e.notifyData.form.notify.select,callback:function(t){e.$set(e.notifyData.form.notify,"select",t)},expression:"notifyData.form.notify.select"}},e._l(e.notifyData.form.notify.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.notifyData.form.notify.select,expression:"notifyData.form.notify.select == 1"}],attrs:{label:"推送方式"}},[a("div",{staticClass:"div-flex",staticStyle:{width:"324px"}},[a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:e.notifyData.form.notifyMethod.select,callback:function(t){e.$set(e.notifyData.form.notifyMethod,"select",t)},expression:"notifyData.form.notifyMethod.select"}},e._l(e.notifyData.form.notifyMethod.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.notifyData.form.notify.select,expression:"notifyData.form.notify.select == 1"}],attrs:{label:"提醒间隔"}},[a("div",{staticClass:"div-flex"},[a("div",[e._v("每")]),e._v(" "),a("el-input",{staticClass:"main_input--tiny inline_margin--small",attrs:{placeholder:"请输入",size:"small"},model:{value:e.notifyData.form.interval.value,callback:function(t){e.$set(e.notifyData.form.interval,"value",t)},expression:"notifyData.form.interval.value"}}),e._v(" "),a("el-select",{staticClass:"main_select--medium",attrs:{placeholder:"请选择",size:"small"},model:{value:e.notifyData.form.interval.unit.select,callback:function(t){e.$set(e.notifyData.form.interval.unit,"select",t)},expression:"notifyData.form.interval.unit.select"}},e._l(e.notifyData.form.interval.unit.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.notifyData.form.notify.select,expression:"notifyData.form.notify.select == 1"}],attrs:{label:"在此时间后开始推送"}},[a("div",{staticClass:"div-flex"},[a("el-date-picker",{staticClass:"main_select--medium",attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.notifyData.form.triggerDate,callback:function(t){e.$set(e.notifyData.form,"triggerDate",t)},expression:"notifyData.form.triggerDate"}}),e._v(" "),a("el-time-select",{staticClass:"main_select--medium",attrs:{"picker-options":{start:"00:00",step:"00:15",end:"24:00"},placeholder:"选择时间",size:"small"},model:{value:e.notifyData.form.triggerTime,callback:function(t){e.$set(e.notifyData.form,"triggerTime",t)},expression:"notifyData.form.triggerTime"}})],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit()}}},[e._v("确定")])],1)],1)},[],!1,null,"52782906",null));St.options.__file="PushEdit.vue";var Et=St.exports,$t="/app/get",Tt="/app/add",zt="/app/edit",Ft={name:"AppMonitor",props:{user_id:Number,widget_id:Number,buttons:Array,flush:Boolean},components:{SlickSort:at,WidgetButton:rt,PushEdit:Et},watch:{flush:function(e,t){e&&this.appGet()}},data:function(){return{appSortEdit:{visible:!1,list:[]},notifyVisible:!1,appRawData:[],appSuite:[],edit:{visible:!1,title:"",form:{index:"",name:"",url:"",expect_price:0}}}},methods:{add:function(){this.edit.title="新增App",this.edit.visible=!0},notify:function(){this.notifyVisible=!this.notifyVisible},sort:function(){this.appSortEdit.visible=!0,this.appSortEdit.list=ae(this.appRawData)},appSortEditSetting:function(e,t){this.edit.title="编辑App",this.edit.form.name=e.name,this.edit.form.url=e.url,this.edit.form.expect_price=e.expect_price,this.edit.form.index=t,this.edit.visible=!0},appGet:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s,r,n,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post($t,{user_id:e.user_id});case 3:for(a=t.sent,i=a.data,e.appRawData=i.data,s=4,r=[],n=0;n<i.data.length;n+=s)for(r.push([]),l=0;l<s;l++)void 0!=i.data[n+l]&&r[r.length-1].push(i.data[n+l]);e.appSuite=r,e.$emit("done"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 17:case"end":return t.stop()}},t,e,[[0,13]])}))()},editSubmit:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("新增App"!=e.edit.title){t.next=16;break}return t.prev=1,t.next=4,u.a.post(Tt,{user_id:e.user_id,name:e.edit.form.name,url:e.edit.form.url,expect_price:e.edit.form.expect_price});case 4:a=t.sent,a.data,e.appGet(),e.edit.visible=!1,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 14:t.next=17;break;case 16:(e.edit.title="编辑App")&&(i=e.edit.form.index,e.appSortEdit.list[i].name=e.edit.form.name,e.appSortEdit.list[i].url=e.edit.form.url,e.appSortEdit.list[i].expect_price=e.edit.form.expect_price,e.edit.visible=!1);case 17:case"end":return t.stop()}},t,e,[[1,10]])}))()},appSortEditSubmit:function(e){var t=this;return c()(o.a.mark(function a(){var i,s,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(i=0;i<e.length;i++)e[i].order=i+1;return a.prev=1,a.next=4,u.a.post(zt,{apps:e,user_id:t.user_id});case 4:s=a.sent,r=s.data,t.$message({message:r.msg,type:"success"}),t.appSortEdit.visible=!1,t.appGet(),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 15:case"end":return a.stop()}},a,t,[[1,11]])}))()}},mounted:function(){this.appGet(),this.timer=window.setInterval(this.appGet,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},It=(a("Y3yM"),Object(p.a)(Ft,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",[a("div",{staticClass:"widget-label"},[e._v("APP")])])]),e._v(" "),a("el-carousel",{attrs:{height:"180px",trigger:"click",interval:"5000","indicator-position":"outside"}},e._l(e.appSuite,function(t){return a("el-carousel-item",{key:t},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t,size:"mini"}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"当前价格",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"180"}})],1)],1)}),1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:0!=e.user_id,expression:"user_id != 0"}]},[a("WidgetButton",{attrs:{user_id:e.user_id,widget_id:e.widget_id,buttons:e.buttons},on:{add:function(t){return e.add()},sort:function(t){return e.sort()},notify:function(t){return e.notify()}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.edit.title,visible:e.edit.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.edit,"visible",t)}}},[a("el-form",{ref:"form",attrs:{model:e.edit.form,size:"mini"}},[a("el-form-item",{attrs:{label:"App名称"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"名称"},model:{value:e.edit.form.name,callback:function(t){e.$set(e.edit.form,"name",t)},expression:"edit.form.name"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"AppURL"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"App Store链接(如：'https://apps.apple.com/cn/app/id958955657')"},model:{value:e.edit.form.url,callback:function(t){e.$set(e.edit.form,"url",t)},expression:"edit.form.url"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"期望价格"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"small",placeholder:"当小于期望价格时，如果设置了通知，会发送提醒"},model:{value:e.edit.form.expect_price,callback:function(t){e.$set(e.edit.form,"expect_price",t)},expression:"edit.form.expect_price"}})],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editSubmit()}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提醒",visible:e.notifyVisible,width:"40%"},on:{"update:visible":function(t){e.notifyVisible=t}}},[e.notifyVisible?a("PushEdit",{attrs:{user_id:e.user_id,widget_id:e.widget_id},on:{done:function(t){return e.notify()}}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑App",visible:e.appSortEdit.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.appSortEdit,"visible",t)}}},[e.appSortEdit.visible?a("SlickSort",{attrs:{list:e.appSortEdit.list,can_be_edit:!0},on:{submit:e.appSortEditSubmit,edit:e.appSortEditSetting}}):e._e()],1)],1)},[],!1,null,"54d548a6",null));It.options.__file="AppMonitor.vue";var Mt=It.exports,Ot="/gold/get",Nt="/gold/edit",Pt={name:"gold",props:{user_id:Number,widget_id:Number,buttons:Array,flush:Number},components:{WidgetButton:rt,PushEdit:Et},watch:{},data:function(){return this.chartSettings={min:["dataMin"],max:["dataMax"]},{name:"黄金价格",chartData:{columns:[],rows:[]},notifyVisible:!1,settingForm:{visible:!1,pushThresholdMin:0,pushThresholdMax:0}}},methods:{notify:function(){this.notifyVisible=!this.notifyVisible},setting:function(){this.settingForm.visible=!0},settingConfirm:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(Nt,{user_id:e.user_id,threshold_min:e.settingForm.pushThresholdMin,threshold_max:e.settingForm.pushThresholdMax});case 3:a=t.sent,i=a.data,e.$message({message:i.msg,type:"success"}),e.settingForm.visible=!1,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},goldPriceGet:function(){var e=this;return c()(o.a.mark(function t(){var a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(Ot,{user_id:e.user_id});case 3:for(a=t.sent,i=a.data,e.chartData.rows=[],e.chartData.columns=["日期","价格"],s=0;s<i.data.price_list.length;s++)e.chartData.rows.push({"日期":i.data.price_list[s].update_time,"价格":i.data.price_list[s].price});e.$nextTick(function(t){e.$refs.chart.echarts.resize()}),0!=i.data.threshold.length&&(e.settingForm.pushThresholdMin=i.data.threshold[0],e.settingForm.pushThresholdMax=i.data.threshold[1]),e.$emit("done"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 17:case"end":return t.stop()}},t,e,[[0,13]])}))()}},mounted:function(){this.goldPriceGet(),this.timer=window.setInterval(this.goldPriceGet,this.flush)},beforeDestroy:function(){window.clearInterval(this.timer)}},At=Object(p.a)(Pt,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gold-main"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("div",[a("div",{staticClass:"widget-label"},[e._v("黄金价格")])])]),e._v(" "),a("ve-line",{ref:"chart",attrs:{height:"210px",settings:e.chartSettings,data:e.chartData,"legend-visible":!1}}),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:0!=e.user_id,expression:"user_id!=0"}],attrs:{type:"flex",justify:"center"}},[a("WidgetButton",{attrs:{user_id:e.user_id,widget_id:e.widget_id,buttons:e.buttons},on:{add:function(t){return e.add()},sort:function(t){return e.sort()},notify:function(t){return e.notify()},setting:function(t){return e.setting()}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"提醒",visible:e.notifyVisible,width:"40%"},on:{"update:visible":function(t){e.notifyVisible=t}}},[e.notifyVisible?a("PushEdit",{attrs:{user_id:e.user_id,widget_id:e.widget_id},on:{done:function(t){return e.notify()}}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"修改提醒阈值",visible:e.settingForm.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.settingForm,"visible",t)}}},[a("el-form",{ref:"form",attrs:{model:e.settingForm,size:"mini"}},[a("el-form-item",{attrs:{label:"当价格不在此范围内时提醒我"}},[a("div",{staticClass:"div-flex"},[a("el-input",{attrs:{size:"mini",placeholder:"最小值"},model:{value:e.settingForm.pushThresholdMin,callback:function(t){e.$set(e.settingForm,"pushThresholdMin",t)},expression:"settingForm.pushThresholdMin"}}),e._v("~\n          "),a("el-input",{attrs:{size:"mini",placeholder:"最大值"},model:{value:e.settingForm.pushThresholdMax,callback:function(t){e.$set(e.settingForm,"pushThresholdMax",t)},expression:"settingForm.pushThresholdMax"}})],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.settingConfirm()}}},[e._v("确定")])],1)],1)],1)},[],!1,null,null,null);At.options.__file="Gold.vue";var Lt=At.exports,Wt="/widget/get",Rt="/widget/suite/get",Bt={name:"widget",props:{user_id:Number},components:{weather:ut,bookmarks:kt,appMonitor:Mt,gold:Lt},data:function(){return{widgetSuiteLabelActiveName:"",widgetSuiteLabels:[],widgetSuite:[],widget:[]}},methods:{widgetSuiteLableGet:function(){var e=this;return c()(o.a.mark(function t(){var a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(Rt,{user_id:e.user_id});case 3:a=t.sent,i=a.data,e.widgetSuiteLabels=i.data,0!=e.widgetSuiteLabels.length&&(e.widgetSuiteLabelActiveName=e.widgetSuiteLabels[0].name,e.widgetGet(e.widgetSuiteLabels[0].id)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 13:case"end":return t.stop()}},t,e,[[0,9]])}))()},handleClick:function(e){for(var t=0,a=0;a<this.widgetSuiteLabels.length;a++)if(e.name==this.widgetSuiteLabels[a].name){t=this.widgetSuiteLabels[a].id;break}this.widgetGet(t)},widgetGet:function(e){var t=this;return c()(o.a.mark(function a(){var i,s,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.a.post(Wt,{user_id:t.user_id,widget_suite_id:e});case 3:for(i=a.sent,s=i.data,r=0;r<s.data.length;r++)s.data[r].show=!1,s.data[r].flush=!1;return t.widget=s.data,a.next=9,t.widgetSuiteGenerate();case 9:a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0),t.$message({message:a.t0.response.data.msg,type:"error"});case 15:case"end":return a.stop()}},a,t,[[0,11]])}))()},widgetSuiteGenerate:function(){var e=0;this.widgetSuite=[],this.widgetSuite.push([]);for(var t=0;t<this.widget.length;t++)e>=24&&(this.widgetSuite.push([]),this.count=0),this.widgetSuite[this.widgetSuite.length-1].push(this.widget[t]),e+=this.widget[t].span},done:function(e,t){this.widgetSuite[e][t].show=!0,this.widgetSuite[e][t].flush=!1}},mounted:function(){this.widgetSuiteLableGet()}},Gt=Object(p.a)(Bt,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.widgetSuiteLabels.length>1?a("el-tabs",{staticStyle:{"padding-bottom":"30px",width:"70%","text-align":"center",margin:"0 auto"},attrs:{stretch:"true"},on:{"tab-click":e.handleClick},model:{value:e.widgetSuiteLabelActiveName,callback:function(t){e.widgetSuiteLabelActiveName=t},expression:"widgetSuiteLabelActiveName"}},e._l(e.widgetSuiteLabels,function(e){return a("el-tab-pane",{key:e,attrs:{label:e.name,name:e.name}})}),1):e._e(),e._v(" "),e._l(e.widgetSuite,function(t,i){return a("el-row",{key:t,staticClass:"margin_bottom-large"},e._l(t,function(t,s){return a("el-col",{key:t,attrs:{span:t.span}},[a("transition",{attrs:{name:"el-zoom-in-top"}},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"singleWidget.show"}],staticClass:"margin_left-medium margin_right-medium",attrs:{shadow:"hover"}},["weather"==t.name?a("weather",{attrs:{user_id:e.user_id,widget_id:t.id,buttons:t.buttons,flush:t.auto_update},on:{done:function(t){return e.done(i,s)}}}):e._e(),e._v(" "),"bookmarks"==t.name?a("bookmarks",{attrs:{user_id:e.user_id,widget_id:t.id,buttons:t.buttons},on:{done:function(t){return e.done(i,s)}}}):e._e(),e._v(" "),"app"==t.name?a("appMonitor",{attrs:{user_id:e.user_id,widget_id:t.id,buttons:t.buttons,flush:t.auto_update},on:{done:function(t){return e.done(i,s)}}}):e._e(),e._v(" "),"gold"==t.name?a("gold",{attrs:{user_id:e.user_id,widget_id:t.id,buttons:t.buttons,flush:t.auto_update},on:{done:function(t){return e.done(i,s)}}}):e._e()],1)],1)],1)}),1)})],2)},[],!1,null,null,null);Gt.options.__file="Widget.vue";var jt="/userInfo",qt={components:{githubConner:_,search:h,login:Ze,widget:Gt.exports},data:function(){return{user:"",user_id:0,widget:[],widgetSuite:[],flush:!1,activeName:"second"}},methods:{userInfo:function(){var e=this;return c()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post(jt,{user_id:e.user_id});case 3:a=t.sent,a.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),401==t.t0.response.status?(e.$cookies.remove("user_key"),e.$cookies.remove("user_name"),e.$cookies.remove("user_id"),e.$cookies.remove("login_name"),e.user="",e.user_id=0):403==t.t0.response.status?console.log(t.t0.response.data.msg):e.$message({message:t.t0.response.data.msg,type:"error"});case 10:e.userIdFlush();case 11:case"end":return t.stop()}},t,e,[[0,7]])}))()},userIdFlush:function(){try{this.user_name=null==this.$cookies.get("user_name")?"":this.$cookies.get("user_name"),this.user_id=null==this.$cookies.get("user_id")?0:this.$cookies.get("user_id"),this.login_name=null==this.$cookies.get("login_name")?"":this.$cookies.get("login_name")}catch(e){this.user_name="",this.user_id=0,this.login_name=""}}},created:function(){this.userIdFlush()},mounted:function(){this.userInfo()}},Ut=(a("A0++"),Object(p.a)(qt,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("githubConner"),e._v(" "),a("el-row",{staticClass:"loginRow"},[a("login",{attrs:{user_id:e.user_id,user_name:e.user_name,login_name:e.login_name}})],1),e._v(" "),a("el-row",{staticClass:"searchRow"},[a("search",{attrs:{user_id:e.user_id}})],1),e._v(" "),a("div",{staticClass:"cardRow"},[a("widget",{attrs:{user_id:e.user_id}})],1)],1)},[],!1,null,null,null));Ut.options.__file="App.vue";var Vt=Ut.exports,Kt=a("jE9Z");i.default.use(Kt.a);var Ht=new Kt.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[]}),Yt=a("L2JU"),Xt=(a("vjVy"),a("Af8c"),a("H1Ta"),a("Kyfw")),Jt=a.n(Xt),Zt=a("KBne"),Qt=a.n(Zt);i.default.use(Jt.a),i.default.use(r.a),i.default.use(Qt.a),i.default.use(Yt.a),new i.default({router:Ht,el:"#app",render:function(e){return e(Vt)}})},Vwi6:function(e,t,a){},W1Ys:function(e,t,a){"use strict";var i=a("oD+p");a.n(i).a},WGpX:function(e,t,a){},Y3yM:function(e,t,a){"use strict";var i=a("pBDb");a.n(i).a},Y7Xj:function(e,t,a){"use strict";var i=a("o2ra");a.n(i).a},Z0kL:function(e,t,a){"use strict";var i=a("ALTg");a.n(i).a},"Zgd/":function(e,t,a){},bv7I:function(e,t,a){"use strict";var i=a("VkTb");a.n(i).a},"cN/y":function(e,t,a){"use strict";var i=a("j6g0");a.n(i).a},"e7A+":function(e,t,a){"use strict";var i=a("EGwq");a.n(i).a},ge9n:function(e,t,a){},h4RD:function(e,t,a){"use strict";var i=a("Vwi6");a.n(i).a},i7fK:function(e,t,a){},j6g0:function(e,t,a){},j7E0:function(e,t,a){},k5Kj:function(e,t,a){},mPeC:function(e,t,a){},o2ra:function(e,t,a){},"oD+p":function(e,t,a){},oNX8:function(module,__webpack_exports__,__webpack_require__){"use strict";var babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("gDS+"),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("14Xm"),babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("D3Ub"),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__),axios__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("vDqi"),axios__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__),api={searchEnginesData:"/search/searchEnginesData",searchEnginesAutoComplete:"/search/searchEnginesAutoComplete",searchLog:"/search/searchLog"};__webpack_exports__.a={name:"search",props:{user_id:Number},data:function(){return{word:"",searchIcon:"search-icon el-icon-search",searchEngines:{select:"",select_engine_id:0,main_url:"",auto_complete_url:"",options:[]}}},methods:{searchEnginesDataFront:function(){var e=this;return babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function t(){var a,i,s;return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(api.searchEnginesData);case 3:for(a=t.sent,i=a.data,s=0;s<i.data.length;s++)e.searchEngines.options.push({id:i.data[s].id,main_url:i.data[s].main_url,auto_complete_url:i.data[s].auto_complete_url,icon:i.data[s].icon,label:i.data[s].name,value:i.data[s].name});e.searchEngines.select=e.searchEngines.options[0].value,e.searchEngines.select_engine_id=e.searchEngines.options[0].id,e.searchEngines.main_url=e.searchEngines.options[0].main_url,e.searchEngines.auto_complete_url=e.searchEngines.options[0].auto_complete_url,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),e.$message({message:t.t0.response.data.msg,type:"error"});case 16:case"end":return t.stop()}},t,e,[[0,12]])}))()},search:function(){var e=this;return babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function t(){var a,i,s;return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<e.searchEngines.options.length)){t.next=7;break}if(e.searchEngines.options[a].value!=e.searchEngines.select){t.next=4;break}return t.abrupt("break",7);case 4:a++,t.next=1;break;case 7:return e.searchEngines.select_engine_id=e.searchEngines.options[a].id,i=e.searchEngines.options[a].main_url.replace("%word%",e.word),window.open(i),e.autoComplete(""),t.prev=11,t.next=14,axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(api.searchLog,{user_id:e.user_id,engine_id:e.searchEngines.select_engine_id,search_text:e.word});case 14:s=t.sent,s.data,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),console.log(t.t0);case 21:e.word="";case 22:case"end":return t.stop()}},t,e,[[11,18]])}))()},autoComplete:function autoComplete(queryString,cb){var _this3=this;return babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee3(){var lastWord,autoCompleteUrl,String2Dict,_ref3,res,result;return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(""!==queryString&&queryString!==[]&&void 0!==queryString){_context3.next=4;break}try{cb([])}catch(e){}_context3.next=26;break;case 4:if(lastWord=sessionStorage.getItem("lastWord"),lastWord!=queryString){_context3.next=9;break}cb(eval(sessionStorage.getItem("lastWordAutoComplete"))),_context3.next=26;break;case 9:return sessionStorage.setItem("lastWord",queryString),autoCompleteUrl=_this3.searchEngines.auto_complete_url.replace("%word%",_this3.word),_context3.prev=11,String2Dict=function(e){return{value:e}},_context3.next=15,axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(api.searchEnginesAutoComplete,{autoCompleteUrl:autoCompleteUrl,name:_this3.searchEngines.select,user_id:_this3.user_id});case 15:_ref3=_context3.sent,res=_ref3.data,result=res.data.map(String2Dict),sessionStorage.setItem("lastWordAutoComplete",babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default()(result)),cb(result),_context3.next=26;break;case 22:_context3.prev=22,_context3.t0=_context3.catch(11),console.log(_context3.t0),_this3.$message({message:_context3.t0.response.data.msg,type:"error"});case 26:case"end":return _context3.stop()}},_callee3,_this3,[[11,22]])}))()}},created:function(){this.searchEnginesDataFront()},mounted:function(){this.$refs.input.focus()}}},ovKT:function(e,t,a){},pBDb:function(e,t,a){},u8DK:function(e,t,a){"use strict";var i=a("mPeC");a.n(i).a},vjVy:function(e,t,a){},xUNX:function(e,t,a){},yDdZ:function(e,t,a){"use strict";var i=a("EPpt");a.n(i).a}},[["Vtdi","runtime","chunk-elementUI","chunk-libs"]]]);